import{a as Xs,b as Ks,r as x,u as _a,N as Qe,d as Oe,O as Js,e as Ra,L as Ia,f as er,B as tr,h as ar,i as X}from"./react-vendor-DaGjvQ9R.js";import{t as sr,c as rr,a as it}from"./utils-BMrmdSYR.js";import{H as ir,B as nr,D as re,L as Aa,a as fe,b as vt,U as Rt,C as ye,S as or,c as ie,d as La,e as Ea,X as oe,A as Y,m as P,I as It,f as se,g as me,h as xe,i as K,j as Ne,k as ue,l as Xe,R as Le,n as lr,o as cr,T as be,Z as ee,p as F,q as nt,r as At,s as $a,W as Ee,t as ot,u as dr,v as Lt,w as Et,x as $t,Y as Wt,y as Ot,z as Ke,E as Wa,F as Vt,G as U,J as we,K as Oa,M as G,N as Bt,O as mr,P as ur,Q as hr,V as le,_ as Ht,$ as pr,a0 as xr,a1 as J,a2 as ze,a3 as jt,a4 as Ye,a5 as Je,a6 as gr,a7 as lt,a8 as Va,a9 as fr,aa as br,ab as ct,ac as $e,ad as wt,ae as Ba,af as ve,ag as yr,ah as Ft,ai as vr,aj as jr,ak as zt,al as wr,am as Nr,an as kr,ao as et,ap as Sr,aq as Cr,ar as Mr,as as Nt,at as kt,au as Tr,av as Ha,aw as Pr,ax as Dr,ay as _r,az as Rr,aA as Ir,aB as Fa,aC as Ar,aD as Lr}from"./ui-vendor-mxRGUvOY.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=s(i);fetch(i.href,n)}})();var pt={exports:{}},Te={};var ra;function Er(){if(ra)return Te;ra=1;var t=Xs(),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};function o(u,m,c){var d,l={},h=null,p=null;c!==void 0&&(h=""+c),m.key!==void 0&&(h=""+m.key),m.ref!==void 0&&(p=m.ref);for(d in m)r.call(m,d)&&!n.hasOwnProperty(d)&&(l[d]=m[d]);if(u&&u.defaultProps)for(d in m=u.defaultProps,m)l[d]===void 0&&(l[d]=m[d]);return{$$typeof:a,type:u,key:h,ref:p,props:l,_owner:i.current}}return Te.Fragment=s,Te.jsx=o,Te.jsxs=o,Te}var ia;function $r(){return ia||(ia=1,pt.exports=Er()),pt.exports}var e=$r(),He={},na;function Wr(){if(na)return He;na=1;var t=Ks();return He.createRoot=t.createRoot,He.hydrateRoot=t.hydrateRoot,He}var Or=Wr();function g(...t){return sr(rr(t))}const ne="focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2",q={fast:"transition-all duration-150 ease-in-out",colors:"transition-colors duration-200",transform:"transition-transform duration-200"},za=[{to:"/",icon:ir,label:"Home",exact:!0},{to:"/clients",icon:nr,label:"Clients"},{to:"/data",icon:re,label:"Data"},{to:"/integration",icon:Aa,label:"Devices"},{to:"/insights",icon:fe,label:"Insights"},{to:"/protocols",icon:vt,label:"Protocols"},{to:"/coach",icon:Rt,label:"Coach"},{to:"/api",icon:ye,label:"API"},{to:"/admin",icon:or,label:"Settings"}],Ya=x.forwardRef(({className:t,...a},s)=>{const r=_a();return e.jsxs("aside",{ref:s,className:g("w-64 bg-white border-r border-slate-200 flex flex-col h-screen sticky top-0",t),...a,children:[e.jsx("div",{className:"h-24 flex items-center px-5 border-b border-slate-100",children:e.jsxs(Qe,{to:"/",className:"flex items-center gap-3",children:[e.jsx("img",{src:"/serif_logo-removebg-preview.png",alt:"Serif",className:"w-[72px] h-[72px] object-contain"}),e.jsx("span",{className:"font-semibold text-xl text-slate-800 tracking-tight",children:"Serif"})]})}),e.jsx("nav",{className:"flex-1 py-4 px-3 overflow-y-auto",children:e.jsx("ul",{className:"space-y-0.5",children:za.map(i=>{const n=i.icon,o=i.exact?r.pathname===i.to:r.pathname.startsWith(i.to);return e.jsx("li",{children:e.jsxs(Qe,{to:i.to,className:g("flex items-center gap-3 px-4 py-2.5 text-sm font-medium rounded-lg","transition-all duration-200",o?"bg-primary-50 text-primary-600 border-l-2 border-l-serif-cyan":"text-slate-600 hover:bg-slate-50 hover:text-slate-900 border-l-2 border-l-transparent"),children:[e.jsx(n,{className:g("w-[18px] h-[18px]",o?"text-primary-500":"text-slate-400")}),i.label]})},i.to)})})}),e.jsx("div",{className:"px-5 py-4 border-t border-slate-100",children:e.jsx("p",{className:"text-[10px] text-slate-400 font-medium tracking-wide",children:"Personalized Health Intelligence"})})]})});Ya.displayName="Sidebar";const Vr=x.forwardRef(({className:t,isCollapsed:a=!1,onToggle:s,...r},i)=>{const n=_a();return e.jsxs("aside",{ref:i,className:g("bg-white border-r border-slate-200 flex flex-col h-screen sticky top-0","transition-all duration-200",a?"w-[72px]":"w-64",t),...r,children:[e.jsxs("div",{className:"h-24 flex items-center justify-between px-3 border-b border-slate-100",children:[e.jsxs(Qe,{to:"/",className:"flex items-center gap-2",children:[e.jsx("img",{src:"/serif_logo-removebg-preview.png",alt:"Serif",className:"w-[72px] h-[72px] object-contain flex-shrink-0"}),!a&&e.jsx("span",{className:"font-semibold text-lg text-slate-800 tracking-tight",children:"Serif"})]}),e.jsx("button",{onClick:s,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-50 rounded-lg transition-colors",children:a?e.jsx(ie,{className:"w-4 h-4"}):e.jsx(La,{className:"w-4 h-4"})})]}),e.jsx("nav",{className:"flex-1 py-4 px-2 overflow-y-auto",children:e.jsx("ul",{className:"space-y-0.5",children:za.map(o=>{const u=o.icon,m=o.exact?n.pathname===o.to:n.pathname.startsWith(o.to);return e.jsx("li",{children:e.jsxs(Qe,{to:o.to,className:g("flex items-center gap-3 px-3 py-2.5 rounded-lg","transition-all duration-200",a&&"justify-center",m?"bg-primary-50 text-primary-600":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"),title:a?o.label:void 0,children:[e.jsx(u,{className:g("w-[18px] h-[18px] flex-shrink-0",m?"text-primary-500":"text-slate-400")}),!a&&e.jsx("span",{className:"text-sm font-medium",children:o.label})]})},o.to)})})})]})});Vr.displayName="CollapsibleSidebar";const ke=it((t,a)=>({isGuidedMode:!1,guidedMode:!1,currentStepIndex:0,isPaused:!1,showChaos:!1,chaosMode:!1,config:{certaintyThreshold:.75,minEffectSize:.1,minDataDays:14,populationPriorEnabled:!0},certaintyThreshold:75,connectedDevices:["oura","apple-watch"],labConnectionStatus:"disconnected",syncSchedule:{wearables:"hourly",bloodwork:"on-result",insightDelivery:"immediate",protocolTimes:["04:00","12:00"]},syncLog:[],isSyncing:!1,syncStatus:"idle",activeInsightId:null,activeMemberId:null,simulatorActions:{},toasts:[],setGuidedMode:s=>t({isGuidedMode:s,guidedMode:s,currentStepIndex:0}),nextStep:()=>t(s=>({currentStepIndex:s.currentStepIndex+1})),prevStep:()=>t(s=>({currentStepIndex:Math.max(0,s.currentStepIndex-1)})),goToStep:s=>t({currentStepIndex:s}),togglePause:()=>t(s=>({isPaused:!s.isPaused})),toggleChaos:()=>{const s=!a().showChaos;t({showChaos:s,chaosMode:s}),a().addToast({type:s?"warning":"info",title:s?"Chaos Mode Enabled":"Chaos Mode Disabled",message:s?"Simulating degraded conditions":"Normal operation restored"})},toggleChaosMode:()=>{a().toggleChaos()},setCertaintyThreshold:s=>t(r=>({certaintyThreshold:s,config:{...r.config,certaintyThreshold:s/100}})),updateConfig:s=>t(r=>({config:{...r.config,...s}})),toggleDevice:s=>t(r=>({connectedDevices:r.connectedDevices.includes(s)?r.connectedDevices.filter(i=>i!==s):[...r.connectedDevices,s]})),setLabConnection:s=>t({labConnectionStatus:s}),setSyncStatus:s=>t({syncStatus:s}),updateSyncSchedule:s=>t(r=>({syncSchedule:{...r.syncSchedule,...s}})),addSyncLog:s=>t(r=>({syncLog:[s,...r.syncLog].slice(0,20)})),triggerSync:async()=>{t({isSyncing:!0}),await new Promise(i=>setTimeout(i,1500));const s=a().showChaos,r={id:`sync_${Date.now()}`,timestamp:new Date().toISOString(),type:"full",duration:s?"4.2s":"1.5s",status:s?"partial":"success",rowsIngested:s?8421:14203,source:"Health Connect + Vitals+ Labs"};t(i=>({isSyncing:!1,syncLog:[r,...i.syncLog].slice(0,20)})),a().addToast({type:s?"warning":"success",title:s?"Partial Sync Complete":"Sync Complete",message:`${r.rowsIngested.toLocaleString()} rows ingested in ${r.duration}`})},setActiveInsight:s=>t({activeInsightId:s}),setActiveMember:s=>t({activeMemberId:s}),toggleSimulatorAction:s=>t(r=>({simulatorActions:{...r.simulatorActions,[s]:!r.simulatorActions[s]}})),setSimulatorAction:(s,r)=>t(i=>({simulatorActions:{...i.simulatorActions,[s]:r}})),resetSimulator:()=>t({simulatorActions:{}}),addToast:s=>{const r=`toast_${Date.now()}`;t(n=>({toasts:[...n.toasts,{...s,id:r}]}));const i=s.duration??4e3;setTimeout(()=>{a().removeToast(r)},i)},removeToast:s=>t(r=>({toasts:r.toasts.filter(i=>i.id!==s)}))})),Br={id:"default",name:"Loading...",avatar:"",age:0,archetype:"",narrative:"",daysOfData:0,devices:[],hasBloodwork:!1,labDraws:0,thresholds:{caffeineCutoff:"14:00",workoutEndTime:"19:00",bedroomTempCeiling:20,eatingWindowHours:10,minSleepHours:7,maxAlcoholUnits:2},currentMetrics:{sleepScore:0,deepSleepMin:0,remSleepMin:0,sleepLatencyMin:0,hrv:0,restingHr:0,fastingGlucose:0,weight:0,trainingLoad:"optimal"},tags:[]},he=it((t,a)=>({activePersonaId:"Ryan",personas:[],isLoading:!0,getActivePersona:()=>{const{activePersonaId:s,personas:r}=a();return r.find(i=>i.id===s)||r[0]||Br},setActivePersona:s=>t({activePersonaId:s}),setPersonas:s=>t({personas:s,isLoading:!1})})),Ua={id:"Ryan",name:"Ryan P.",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face",age:34,archetype:"The Pressure-Forged Pro",narrative:"High performer struggling with sleep due to late workouts; Zone 2 success story",daysOfData:45,devices:["oura","fitbit","Vitals+-app","bloodwork","weather"],deviceConnections:[{deviceId:"oura",isActive:!0,firstConnected:"2024-10-15",lastRefreshed:"2025-01-11T04:30:00Z"},{deviceId:"fitbit",isActive:!1,firstConnected:"2024-08-20",lastRefreshed:"2024-11-05T12:00:00Z"},{deviceId:"Vitals+-app",isActive:!0,firstConnected:"2024-10-15",lastRefreshed:"2025-01-11T04:30:00Z"},{deviceId:"bloodwork",isActive:!0,firstConnected:"2024-10-15",lastRefreshed:"2025-01-11T04:30:00Z"},{deviceId:"weather",isActive:!0,firstConnected:"2024-10-15",lastRefreshed:"2025-01-11T04:30:00Z"}],hasBloodwork:!0,labDraws:3,thresholds:{caffeineCutoff:"14:15",workoutEndTime:"19:00",bedroomTempCeiling:22,eatingWindowHours:10,minSleepHours:7,maxAlcoholUnits:2},currentMetrics:{sleepScore:65,deepSleepMin:40,remSleepMin:85,sleepLatencyMin:22,hrv:42,restingHr:61,fastingGlucose:104,weight:175,trainingLoad:"optimal"},tags:["high-performer","sleep-issues","zone2-success"]},Ga=[{id:"Ryan-insight-001",personaId:"Ryan",category:"sleep",variableType:"outcome",title:"BEDTIME HOUR â†’ SLEEP EFFICIENCY",headline:"Late bedtimes are hurting your sleep efficiency",recommendation:"Get to bed before 10:15 PM",explanation:"Each hour after your threshold costs 2.3% efficiency",causalParams:{source:"bedtime_hour",target:"sleep_efficiency_pct",curveType:"plateau_down",theta:{value:22.25,unit:"hour",low:21.92,high:22.58,displayValue:"10:15 PM"},betaBelow:{value:.1,unit:"%",description:"+0.1%/hr (stable)"},betaAbove:{value:-2.3,unit:"%",description:"-2.3%/hr (sharp drop)"},observations:243,completePct:99.2,changepointProb:.99,sizeCategory:"large",currentValue:23.5,currentStatus:"above_optimal"},cause:{behavior:"bedtime_hour",threshold:"22:15",unit:"time",direction:"before"},outcome:{metric:"sleep_efficiency",effect:"-2.3% per hour after threshold",direction:"negative"},certainty:.94,evidence:{personalDays:243,personalWeight:.89,populationWeight:.11,stability:.94},dataSources:["oura","apple-watch"],comparison:{before:{value:78,label:"After 11 PM"},after:{value:89,label:"Before 10:15 PM"}},whyNow:"Your average bedtime shifted from 10:30 PM to 11:30 PM over the past 2 weeks.",holdoutPreview:{metric:"sleep_efficiency",expectedChange:5,unit:"%",horizon:"7 days"},showWork:"On 156 nights when you went to bed before 10:15 PM, your sleep efficiency averaged 89%. On 87 nights after 11 PM, it dropped to 78%. This relationship held after controlling for alcohol, stress, and exercise. Your personal threshold (10:15 PM) is earlier than population average (11:00 PM).",actionable:!0,priority:1},{id:"Ryan-insight-002",personaId:"Ryan",category:"sleep",variableType:"outcome",title:"ZONE 2 MINUTES â†’ DEEP SLEEP",headline:"Zone 2 training is boosting your deep sleep",recommendation:"Keep Zone 2 workouts under 52 minutes",explanation:"+3.8 seconds deep sleep per minute (up to threshold)",causalParams:{source:"zone2_minutes",target:"deep_seconds",curveType:"plateau_up",theta:{value:52,unit:"minutes",low:44.2,high:59.8,displayValue:"52 min"},betaBelow:{value:3.8,unit:"sec",description:"+3.8 sec/min (strong)"},betaAbove:{value:.2,unit:"sec",description:"+0.2 sec/min (diminishing)"},observations:156,completePct:94.9,changepointProb:.96,sizeCategory:"medium",currentValue:45,currentStatus:"below_optimal"},cause:{behavior:"zone2_minutes",threshold:52,unit:"minutes",direction:"below"},outcome:{metric:"deep_sleep_seconds",effect:"+3.8 sec per minute up to threshold",direction:"positive"},certainty:.87,evidence:{personalDays:156,personalWeight:.68,populationWeight:.32,stability:.89},dataSources:["garmin","oura"],comparison:{before:{value:42,label:"No Zone 2"},after:{value:58,label:"At threshold"}},whyNow:"Your Zone 2 average increased to 45 minâ€”approaching your optimal threshold.",holdoutPreview:{metric:"deep_sleep",expectedChange:26,unit:"seconds",horizon:"7 days"},showWork:"On days with Zone 2 training, deep sleep increased by 3.8 seconds per minute trained, up to 52 minutes. Beyond that, returns diminish to +0.2 sec/min. Your optimal is 52 minutesâ€”more provides minimal additional benefit while increasing recovery demands.",actionable:!0,priority:2},{id:"Ryan-insight-003",personaId:"Ryan",category:"sleep",variableType:"outcome",title:"ALCOHOL UNITS â†’ REM SLEEP",headline:"Even moderate alcohol is destroying your REM",recommendation:"Limit alcohol to half a drink for REM preservation",explanation:"-3.2% REM per unit above your threshold",causalParams:{source:"alcohol_units",target:"rem_sleep_pct",curveType:"plateau_down",theta:{value:.5,unit:"units",low:.28,high:.72,displayValue:"0.5 drinks"},betaBelow:{value:-.8,unit:"%",description:"-0.8%/unit (mild)"},betaAbove:{value:-3.2,unit:"%",description:"-3.2%/unit (severe)"},observations:167,completePct:100,changepointProb:.88,sizeCategory:"large",currentValue:1.8,currentStatus:"above_optimal"},cause:{behavior:"alcohol_units",threshold:.5,unit:"drinks",direction:"below"},outcome:{metric:"rem_sleep_pct",effect:"-3.2% per drink above threshold",direction:"negative"},certainty:.85,evidence:{personalDays:167,personalWeight:.65,populationWeight:.35,stability:.9},dataSources:["oura"],comparison:{before:{value:18,label:"2+ drinks"},after:{value:24,label:"0-0.5 drinks"}},whyNow:"Your REM percentage dropped 4% this weekâ€”coinciding with evening drinks.",holdoutPreview:{metric:"rem_sleep_pct",expectedChange:4,unit:"%",horizon:"5 days"},showWork:"Your alcohol threshold is unusually low at 0.5 drinksâ€”you are alcohol-sensitive. On 89 nights with no alcohol, REM averaged 24%. On 78 nights with 2+ drinks, it dropped to 18%. Even one drink costs you ~2.7% REM.",actionable:!0,priority:1},{id:"Ryan-insight-004",personaId:"Ryan",category:"recovery",variableType:"outcome",title:"ACUTE:CHRONIC RATIO â†’ NEXT DAY HRV",headline:"Your training load ratio affects recovery",recommendation:"Maintain training load ratio at 1.05",explanation:"Deviation in either direction hurts HRV",causalParams:{source:"acute_chronic_ratio",target:"next_day_hrv",curveType:"v_max",theta:{value:1.05,unit:"ratio",low:.9,high:1.2,displayValue:"1.05"},betaBelow:{value:2.3,unit:"ms",description:"+2.3 ms/0.1 (undertraining)"},betaAbove:{value:-4.8,unit:"ms",description:"-4.8 ms/0.1 (overtraining)"},observations:134,completePct:96.3,changepointProb:.97,sizeCategory:"medium",currentValue:1.08,currentStatus:"at_optimal"},cause:{behavior:"acute_chronic_ratio",threshold:1.05,unit:"ratio",direction:"above"},outcome:{metric:"next_day_hrv",effect:"Â±4.8 ms per 0.1 deviation",direction:"negative"},certainty:.86,evidence:{personalDays:134,personalWeight:.73,populationWeight:.27,stability:.92},dataSources:["garmin","oura"],comparison:{before:{value:38,label:"ACR > 1.3"},after:{value:52,label:"ACR at 1.05"}},whyNow:"Your ACR is at 1.08â€”in the optimal zone. Keep it there.",showWork:"Your HRV peaks when ACR is between 0.9-1.2, with optimal at 1.05. Going above 1.2 (overtraining) costs 4.8 ms per 0.1 increase. Going below 0.9 (undertraining) costs 2.3 ms per 0.1 decrease. The penalty is asymmetricâ€”overtraining hurts more.",actionable:!0,priority:3},{id:"Ryan-insight-005",personaId:"Ryan",category:"sleep",variableType:"outcome",title:"BEDROOM TEMP â†’ DEEP SLEEP",headline:"Your bedroom temperature has an optimal sweet spot",recommendation:"Set bedroom temperature to 18.5Â°C (65Â°F)",explanation:"Both too cold and too warm reduce deep sleep",causalParams:{source:"bedroom_temp_c",target:"deep_sleep_pct",curveType:"v_max",theta:{value:18.5,unit:"Â°C",low:17.7,high:19.3,displayValue:"18.5Â°C (65Â°F)"},betaBelow:{value:.8,unit:"%",description:"+0.8%/Â°C (toward optimal)"},betaAbove:{value:-1.2,unit:"%",description:"-1.2%/Â°C (too warm)"},observations:142,completePct:97.9,changepointProb:.89,sizeCategory:"medium",currentValue:21.5,currentStatus:"above_optimal"},cause:{behavior:"bedroom_temp",threshold:18.5,unit:"celsius",direction:"below"},outcome:{metric:"deep_sleep_pct",effect:"-1.2% per Â°C above optimal",direction:"negative"},certainty:.75,evidence:{personalDays:142,personalWeight:.67,populationWeight:.33,stability:.82},dataSources:["oura","eight-sleep"],comparison:{before:{value:15,label:"At 22Â°C"},after:{value:19,label:"At 18.5Â°C"}},whyNow:"Winter heating raised your bedroom to 21.5Â°Câ€”3Â°C above your optimal.",holdoutPreview:{metric:"deep_sleep_pct",expectedChange:3.6,unit:"%",horizon:"3 days"},showWork:"Your deep sleep percentage peaks at 18.5Â°C. Going warmer costs 1.2% per degree. Going colder costs 0.8% per degree. At your current 21.5Â°C, you're losing ~3.6% deep sleep versus optimal.",actionable:!0,priority:2},{id:"Ryan-insight-006",personaId:"Ryan",category:"sleep",variableType:"outcome",title:"LAST MEAL HOUR â†’ DEEP SLEEP",headline:"Late dinners are cutting into your deep sleep",recommendation:"Finish eating before 7:30 PM",explanation:"-1.8% deep sleep per hour after threshold",causalParams:{source:"last_meal_hour",target:"deep_sleep_pct",curveType:"plateau_down",theta:{value:19.5,unit:"hour",low:18.7,high:20.3,displayValue:"7:30 PM"},betaBelow:{value:.2,unit:"%",description:"+0.2%/hr (stable)"},betaAbove:{value:-1.8,unit:"%",description:"-1.8%/hr (drops fast)"},observations:156,completePct:98.7,changepointProb:.92,sizeCategory:"medium",currentValue:20.5,currentStatus:"above_optimal"},cause:{behavior:"last_meal_hour",threshold:"19:30",unit:"time",direction:"before"},outcome:{metric:"deep_sleep_pct",effect:"-1.8% per hour after threshold",direction:"negative"},certainty:.82,evidence:{personalDays:156,personalWeight:.71,populationWeight:.29,stability:.85},dataSources:["oura"],comparison:{before:{value:16,label:"Dinner at 9 PM"},after:{value:19,label:"Dinner by 7:30 PM"}},whyNow:"Your average dinner time shifted to 8:30 PM this week.",holdoutPreview:{metric:"deep_sleep_pct",expectedChange:1.8,unit:"%",horizon:"5 days"},showWork:"Eating after 7:30 PM costs 1.8% deep sleep per hour. Your current 8:30 PM average is costing you ~1.8% deep sleep versus eating by 7:30 PM. The effect is consistent across different meal sizes.",actionable:!0,priority:2},{id:"Ryan-insight-007",personaId:"Ryan",category:"recovery",variableType:"outcome",title:"SLEEP CONSISTENCY â†’ HRV VARIABILITY",headline:"Inconsistent sleep times are destabilizing your HRV",recommendation:"Maintain sleep consistency score at 85+",explanation:"-0.15 CV per point below threshold",causalParams:{source:"sleep_consistency_score",target:"weekly_hrv_cv",curveType:"v_min",theta:{value:85,unit:"score",low:78.8,high:91.2,displayValue:"85 score"},betaBelow:{value:-.15,unit:"CV",description:"-0.15 CV/pt (improves toward Î¸)"},betaAbove:{value:-.08,unit:"CV",description:"-0.08 CV/pt (diminishing)"},observations:198,completePct:98,changepointProb:.91,sizeCategory:"medium",currentValue:72,currentStatus:"below_optimal"},cause:{behavior:"sleep_consistency",threshold:85,unit:"score",direction:"above"},outcome:{metric:"hrv_cv",effect:"Lower CV = more stable HRV",direction:"positive"},certainty:.78,evidence:{personalDays:198,personalWeight:.81,populationWeight:.19,stability:.89},dataSources:["oura"],comparison:{before:{value:18,label:"Inconsistent (score 60)"},after:{value:9,label:"Consistent (score 85+)"}},whyNow:"Your sleep consistency dropped to 72 this week due to weekend variability.",showWork:"HRV variability (CV) decreases as sleep consistency improvesâ€”reaching optimal stability at score 85. Below 85, each point costs 0.15 CV. Your weekend sleep timing is 2+ hours different from weekdays, hurting your score.",actionable:!0,priority:3},{id:"Ryan-insight-008",personaId:"Ryan",category:"metabolic",variableType:"marker",title:"ZONE 2 MINUTES â†’ FASTING GLUCOSE",headline:"Zone 2 cardio is lowering your fasting glucose",recommendation:"Maintain 150+ Zone 2 minutes per week",explanation:"-0.8 mg/dL per 10 minutes above threshold",causalParams:{source:"weekly_zone2_min",target:"fasting_glucose_mgdl",curveType:"plateau_down",theta:{value:150,unit:"min/week",low:125,high:175,displayValue:"150 min/week"},betaBelow:{value:.2,unit:"mg/dL",description:"+0.2 mg/dL per 10min less"},betaAbove:{value:-.8,unit:"mg/dL",description:"-0.8 mg/dL per 10min more"},observations:12,completePct:100,changepointProb:.94,sizeCategory:"large",currentValue:180,currentStatus:"above_optimal"},cause:{behavior:"weekly_zone2_minutes",threshold:150,unit:"minutes",direction:"above"},outcome:{metric:"fasting_glucose",effect:"-0.8 mg/dL per 10 minutes",direction:"positive"},certainty:.91,evidence:{personalDays:90,personalWeight:.45,populationWeight:.55,stability:.88},dataSources:["garmin","bloodwork"],comparison:{before:{value:108,label:"<100 min/week"},after:{value:98,label:"150+ min/week"}},whyNow:"Your Zone 2 has increased to 180 min/weekâ€”glucose trending down.",holdoutPreview:{metric:"fasting_glucose",expectedChange:-4,unit:"mg/dL",horizon:"4 weeks"},showWork:"Each 10 minutes of weekly Zone 2 above 150 min correlates with 0.8 mg/dL lower fasting glucose. Your increase from 120 to 180 min/week predicts a ~5 mg/dL improvement over 4-6 weeks. Population data strongly supports this relationship.",actionable:!0,priority:1},{id:"Ryan-insight-009",personaId:"Ryan",category:"metabolic",variableType:"marker",title:"EATING WINDOW â†’ TRIGLYCERIDES",headline:"Shorter eating windows correlate with lower triglycerides",recommendation:"Keep eating window under 10 hours",explanation:"-8 mg/dL per hour reduction in window",causalParams:{source:"eating_window_hours",target:"triglycerides_mgdl",curveType:"linear",theta:{value:10,unit:"hours",low:8,high:12,displayValue:"10 hours"},betaBelow:{value:-8,unit:"mg/dL",description:"-8 mg/dL per hour shorter"},betaAbove:{value:12,unit:"mg/dL",description:"+12 mg/dL per hour longer"},observations:8,completePct:100,changepointProb:.87,sizeCategory:"medium",currentValue:11,currentStatus:"above_optimal"},cause:{behavior:"eating_window",threshold:10,unit:"hours",direction:"below"},outcome:{metric:"triglycerides",effect:"-8 mg/dL per hour",direction:"positive"},certainty:.88,evidence:{personalDays:60,personalWeight:.38,populationWeight:.62,stability:.82},dataSources:["Vitals+-app","bloodwork"],comparison:{before:{value:142,label:"14-hour window"},after:{value:98,label:"10-hour window"}},whyNow:"Your eating window averaged 11 hours this month.",holdoutPreview:{metric:"triglycerides",expectedChange:-12,unit:"mg/dL",horizon:"6 weeks"},showWork:"Population research shows each hour reduction in eating window correlates with ~8 mg/dL lower triglycerides. Your personal data from 8 lab draws shows similar pattern. Reducing from 11 to 10 hours could lower your triglycerides by ~12 mg/dL.",actionable:!0,priority:2},{id:"Ryan-insight-010",personaId:"Ryan",category:"metabolic",variableType:"marker",title:"SLEEP DURATION â†’ HBA1C",headline:"Sleep under 7 hours is raising your HbA1c",recommendation:"Get at least 7 hours of sleep",explanation:"+0.1% HbA1c per hour below threshold",causalParams:{source:"avg_sleep_hours",target:"hba1c_pct",curveType:"plateau_up",theta:{value:7,unit:"hours",low:6.5,high:7.5,displayValue:"7 hours"},betaBelow:{value:.1,unit:"%",description:"+0.1% per hour less sleep"},betaAbove:{value:-.02,unit:"%",description:"-0.02% per hour more (minimal)"},observations:12,completePct:100,changepointProb:.96,sizeCategory:"large",currentValue:6.2,currentStatus:"below_optimal"},cause:{behavior:"sleep_duration",threshold:7,unit:"hours",direction:"above"},outcome:{metric:"hba1c",effect:"+0.1% per hour below",direction:"negative"},certainty:.93,evidence:{personalDays:180,personalWeight:.52,populationWeight:.48,stability:.91},dataSources:["oura","bloodwork"],comparison:{before:{value:5.8,label:"6 hours avg"},after:{value:5.4,label:"7+ hours avg"}},whyNow:"Your sleep average dropped to 6.2 hoursâ€”your HbA1c rose 0.2% last quarter.",holdoutPreview:{metric:"hba1c",expectedChange:-.08,unit:"%",horizon:"12 weeks"},showWork:"Sleep deprivation impairs glucose regulation. Your data shows a clear threshold at 7 hoursâ€”below which HbA1c increases ~0.1% per hour of lost sleep. Getting back to 7 hours could reduce your HbA1c by 0.08% over 3 months.",actionable:!0,priority:1},{id:"Ryan-insight-011",personaId:"Ryan",category:"metabolic",variableType:"marker",title:"OMEGA-3 INTAKE â†’ HSCRP",headline:"Fish oil supplementation is lowering your inflammation",recommendation:"Continue 2g EPA+DHA daily",explanation:"-0.3 mg/L per gram above threshold",causalParams:{source:"daily_omega3_g",target:"hscrp_mgl",curveType:"plateau_down",theta:{value:2,unit:"grams",low:1.5,high:2.5,displayValue:"2g EPA+DHA"},betaBelow:{value:.15,unit:"mg/L",description:"+0.15 mg/L per gram less"},betaAbove:{value:-.3,unit:"mg/L",description:"-0.3 mg/L per gram more"},observations:6,completePct:100,changepointProb:.89,sizeCategory:"medium",currentValue:2.5,currentStatus:"above_optimal"},cause:{behavior:"omega3_intake",threshold:2,unit:"grams",direction:"above"},outcome:{metric:"hscrp",effect:"-0.3 mg/L per gram",direction:"positive"},certainty:.86,evidence:{personalDays:120,personalWeight:.35,populationWeight:.65,stability:.79},dataSources:["Vitals+-app","bloodwork"],comparison:{before:{value:2.1,label:"No supplementation"},after:{value:.9,label:"2g+ daily"}},whyNow:"Your hsCRP dropped from 2.1 to 0.9 since starting fish oil 4 months ago.",holdoutPreview:{metric:"hscrp",expectedChange:-.15,unit:"mg/L",horizon:"8 weeks"},showWork:"Omega-3 supplementation above 2g daily shows strong anti-inflammatory effects. Your hsCRP dropped 57% since starting supplementation. Population data confirms this effect size. Continuing at 2.5g maintains optimal levels.",actionable:!0,priority:2},{id:"Ryan-insight-012",personaId:"Ryan",category:"cardio",variableType:"marker",title:"RESTING HR TREND â†’ LDL CHOLESTEROL",headline:"Lower resting HR correlates with improved LDL",recommendation:"Maintain cardio to keep RHR under 60",explanation:"-2 mg/dL LDL per 1 bpm reduction",causalParams:{source:"resting_hr_bpm",target:"ldl_mgdl",curveType:"linear",theta:{value:60,unit:"bpm",low:55,high:65,displayValue:"60 bpm"},betaBelow:{value:-2,unit:"mg/dL",description:"-2 mg/dL per bpm lower"},betaAbove:{value:3,unit:"mg/dL",description:"+3 mg/dL per bpm higher"},observations:12,completePct:100,changepointProb:.92,sizeCategory:"medium",currentValue:61,currentStatus:"above_optimal"},cause:{behavior:"resting_hr",threshold:60,unit:"bpm",direction:"below"},outcome:{metric:"ldl_cholesterol",effect:"-2 mg/dL per bpm",direction:"positive"},certainty:.84,evidence:{personalDays:270,personalWeight:.58,populationWeight:.42,stability:.86},dataSources:["oura","bloodwork"],comparison:{before:{value:128,label:"RHR 68 bpm"},after:{value:112,label:"RHR 60 bpm"}},whyNow:"Your RHR dropped from 68 to 61 over the past 6 months with increased cardio.",holdoutPreview:{metric:"ldl_cholesterol",expectedChange:-2,unit:"mg/dL",horizon:"8 weeks"},showWork:"Cardiovascular fitness (as measured by lower RHR) correlates with improved lipid profiles. Your 7 bpm RHR reduction correlated with a 16 mg/dL LDL improvement. Each additional bpm reduction predicts ~2 mg/dL further improvement.",actionable:!0,priority:2},{id:"Ryan-insight-013",personaId:"Ryan",category:"metabolic",variableType:"marker",title:"STRENGTH TRAINING â†’ INSULIN SENSITIVITY (HOMA-IR)",headline:"Resistance training is improving your insulin sensitivity",recommendation:"Maintain 3+ strength sessions per week",explanation:"-0.15 HOMA-IR per weekly session",causalParams:{source:"weekly_strength_sessions",target:"homa_ir",curveType:"plateau_down",theta:{value:3,unit:"sessions",low:2,high:4,displayValue:"3 sessions/week"},betaBelow:{value:.2,unit:"HOMA-IR",description:"+0.2 per session less"},betaAbove:{value:-.15,unit:"HOMA-IR",description:"-0.15 per session more"},observations:8,completePct:100,changepointProb:.91,sizeCategory:"large",currentValue:3,currentStatus:"at_optimal"},cause:{behavior:"strength_training_frequency",threshold:3,unit:"sessions/week",direction:"above"},outcome:{metric:"homa_ir",effect:"-0.15 per session",direction:"positive"},certainty:.89,evidence:{personalDays:180,personalWeight:.42,populationWeight:.58,stability:.85},dataSources:["garmin","bloodwork"],comparison:{before:{value:2.4,label:"1 session/week"},after:{value:1.6,label:"3+ sessions/week"}},whyNow:"Your HOMA-IR improved from 2.4 to 1.6 since increasing to 3 sessions/week.",holdoutPreview:{metric:"homa_ir",expectedChange:0,unit:"",horizon:"maintain"},showWork:"Resistance training increases muscle glucose uptake and improves insulin sensitivity. Your HOMA-IR dropped 33% after increasing from 1 to 3 weekly sessions. Population research confirms threshold effect at 3 sessions.",actionable:!0,priority:1}];function Hr(){const t=[],a=new Date("2024-11-01");for(let s=0;s<45;s++){const r=new Date(a);r.setDate(r.getDate()+s);const i=r.toISOString().split("T")[0],n=s>=30&&s<40,o=s>=40,u=Math.sin(s*.5)*5,c=`${(n||o?19+Math.floor(Math.random()*2):17+Math.floor(Math.random()*2)).toString().padStart(2,"0")}:${Math.floor(Math.random()*60).toString().padStart(2,"0")}`,l=`${(n||o?14+Math.floor(Math.random()*3):12+Math.floor(Math.random()*2)).toString().padStart(2,"0")}:${Math.floor(Math.random()*60).toString().padStart(2,"0")}`,h=o?62:n?68:78,p=o?24:n?18:11,f=o?38:n?45:58,v=o?40:n?44:48,j=s<20?19.5+Math.random():21.5+Math.random()*2,k={date:i,sleepScore:Math.round(h+u+Math.random()*6),sleepDuration:Math.round(380+Math.random()*80-(n?40:0)),deepSleep:Math.round(f+Math.random()*10),remSleep:Math.round(75+Math.random()*25),lightSleep:Math.round(200+Math.random()*60),sleepLatency:Math.round(p+Math.random()*8),sleepEfficiency:.82+Math.random()*.1-(n?.05:0),bedtime:`${22+Math.floor(Math.random()*2)}:${Math.floor(Math.random()*60).toString().padStart(2,"0")}`,wakeTime:`${6+Math.floor(Math.random()*2)}:${Math.floor(Math.random()*60).toString().padStart(2,"0")}`,hrv:Math.round(v+Math.random()*8),restingHr:Math.round(56+Math.random()*8+(n?4:0)),respiratoryRate:13.5+Math.random()*1.5,bodyTemp:-.2+Math.random()*.4,steps:Math.round(7e3+Math.random()*5e3),activeCalories:Math.round(350+Math.random()*250),moderateMinutes:Math.round(20+Math.random()*30),vigorousMinutes:Math.round(15+Math.random()*25),zone2Minutes:Math.round(25+Math.random()*20),trainingLoad:Math.round(60+Math.random()*40),caffeineCutoff:l,alcoholUnits:Math.random()>.7?Math.floor(Math.random()*3):0,eatingWindowStart:"07:30",eatingWindowEnd:`${17+Math.floor(Math.random()*3)}:${Math.floor(Math.random()*60).toString().padStart(2,"0")}`,bedroomTemp:Math.round(j*10)/10,workoutTime:Math.random()>.15?c:null,workoutType:Math.random()>.15?["strength","cardio","hiit","zone2"][Math.floor(Math.random()*4)]:null,mood:Math.round(4+Math.random()*2-(n?1:0)),energy:Math.round(4+Math.random()*2-(n?1:0)),focus:Math.round(4+Math.random()*2-(n?1:0)),stress:Math.round(3+Math.random()*2+(n?2:0)),events:n&&Math.random()>.5?["late_work"]:void 0};t.push(k)}return t}const Fr=Hr(),zr=[{date:"2024-10-15",fastingGlucose:92,hba1c:5.2,totalCholesterol:195,ldl:118,hdl:52,triglycerides:156,hsCrp:1.8,vitaminD:42,testosterone:487},{date:"2024-11-20",fastingGlucose:95,hba1c:5.2,totalCholesterol:188,ldl:112,hdl:54,triglycerides:142,hsCrp:1.5,vitaminD:45,testosterone:545},{date:"2024-12-28",fastingGlucose:104,hba1c:5.3,totalCholesterol:182,ldl:108,hdl:55,triglycerides:131,hsCrp:1.4,vitaminD:48,testosterone:612}],qa=[{id:"Ryan-protocol-sleep",personaId:"Ryan",name:"Sleep Efficiency Protocol",description:"Optimize sleep efficiency based on your personal thresholds",category:"sleep",status:"active",outcome:"sleep_efficiency",baseline:{value:.78,unit:"efficiency"},actions:[{id:"action-bedtime",label:"In bed by 10:15 PM",category:"sleep",isActive:!0,impact:.06,actionType:"cutoff",time:"10:15 PM",linkedInsightId:"Ryan-insight-001"},{id:"action-caffeine",label:"No caffeine after 2:15 PM",category:"sleep",isActive:!0,impact:.04,actionType:"cutoff",time:"2:15 PM"},{id:"action-workout-time",label:"Finish workouts by 7:00 PM",category:"sleep",isActive:!1,impact:.05,actionType:"cutoff",time:"7:00 PM"},{id:"action-last-meal",label:"Last meal by 7:30 PM",category:"sleep",isActive:!0,impact:.03,actionType:"cutoff",time:"7:30 PM",linkedInsightId:"Ryan-insight-006"},{id:"action-bedroom-temp",label:"Set bedroom to 18.5Â°C",category:"sleep",isActive:!1,impact:.04,actionType:"target",linkedInsightId:"Ryan-insight-005"},{id:"action-alcohol",label:"Limit to 0.5 drinks",category:"sleep",isActive:!1,impact:.03,actionType:"target",linkedInsightId:"Ryan-insight-003"},{id:"action-zone2-workout",label:"Zone 2 Cardio (45-52 min)",category:"activity",isActive:!0,impact:.05,actionType:"duration",startTime:"5:00 PM",endTime:"6:00 PM",linkedInsightId:"Ryan-insight-002"},{id:"action-post-dinner-walk",label:"Post-Dinner Walk (15 min)",category:"activity",isActive:!0,impact:.03,actionType:"duration",startTime:"7:45 PM",endTime:"8:00 PM",linkedInsightId:"Ryan-insight-006"}],states:[{id:"state-high-strain",label:"High strain day",isActive:!1},{id:"state-travel",label:"Travel day",isActive:!1},{id:"state-deadline",label:"Work deadline",isActive:!0}],triggers:[{if:["state-high-strain"],then:["action-caffeine","action-workout-time"],reason:"High strain increases sleep pressure, making timing even more critical"},{if:["state-deadline"],then:["action-caffeine","action-bedtime"],reason:"Deadlines often lead to late caffeine and delayed bedtime"}],simulator:{deltas:{"action-bedtime":.06,"action-caffeine":.04,"action-workout-time":.05,"action-last-meal":.03,"action-bedroom-temp":.04,"action-alcohol":.03}},evidenceLevel:89,difficulty:2},{id:"Ryan-protocol-zone2",personaId:"Ryan",name:"Deep Sleep Optimizer",description:"Maximize deep sleep through Zone 2 training",category:"sleep",status:"active",outcome:"deep_sleep_minutes",baseline:{value:42,unit:"minutes"},actions:[{id:"action-zone2-duration",label:"45-52 min Zone 2 cardio",category:"activity",isActive:!0,impact:12,actionType:"duration",linkedInsightId:"Ryan-insight-002"},{id:"action-zone2-timing",label:"Zone 2 before 5:00 PM",category:"activity",isActive:!0,impact:4,actionType:"cutoff",time:"5:00 PM"}],states:[{id:"state-recovery-day",label:"Recovery day",isActive:!1}],triggers:[{if:["state-recovery-day"],then:[],reason:"Skip Zone 2 on recovery days"}],simulator:{deltas:{"action-zone2-duration":12,"action-zone2-timing":4}},evidenceLevel:87,difficulty:3},{id:"Ryan-protocol-glucose",personaId:"Ryan",name:"Glucose Optimization Protocol",description:"Lower fasting glucose through exercise and meal timing",category:"metabolic",status:"active",outcome:"fasting_glucose",baseline:{value:104,unit:"mg/dL"},actions:[{id:"action-weekly-zone2",label:"150+ min Zone 2 per week",category:"activity",isActive:!0,impact:-6,actionType:"duration",linkedInsightId:"Ryan-insight-008"},{id:"action-eating-window",label:"10-hour eating window",category:"metabolic",isActive:!0,impact:-4,actionType:"duration",linkedInsightId:"Ryan-insight-009"},{id:"action-sleep-7hrs",label:"Get 7+ hours sleep",category:"sleep",isActive:!1,impact:-3,actionType:"target",linkedInsightId:"Ryan-insight-010"},{id:"action-strength-3x",label:"3x strength training per week",category:"activity",isActive:!0,impact:-5,actionType:"duration",linkedInsightId:"Ryan-insight-013"}],states:[{id:"state-travel",label:"Travel week",isActive:!1}],triggers:[{if:["state-travel"],then:["action-eating-window"],reason:"Eating window is portable even when traveling"}],simulator:{deltas:{"action-weekly-zone2":-6,"action-eating-window":-4,"action-sleep-7hrs":-3,"action-strength-3x":-5}},evidenceLevel:91,difficulty:3},{id:"Ryan-protocol-inflammation",personaId:"Ryan",name:"Inflammation Control",description:"Reduce hsCRP through supplementation and cardio",category:"metabolic",status:"suggested",outcome:"hscrp",baseline:{value:1.4,unit:"mg/L"},actions:[{id:"action-omega3",label:"2g EPA+DHA daily",category:"metabolic",isActive:!0,impact:-.5,actionType:"target",linkedInsightId:"Ryan-insight-011"},{id:"action-rhr-cardio",label:"Cardio to lower RHR to 60",category:"cardio",isActive:!1,impact:-.2,actionType:"target",linkedInsightId:"Ryan-insight-012"}],states:[],triggers:[],simulator:{deltas:{"action-omega3":-.5,"action-rhr-cardio":-.2}},evidenceLevel:86,difficulty:2}],Yr={personaId:"Ryan",date:new Date().toISOString().split("T")[0],greeting:"Good morning, Ryan. Your HRV was 42ms last nightâ€”below your baseline. Let's focus on recovery today.",priorities:{high:[{id:"plan-001",text:"Finish workouts before 7 PM",explanation:"Your late workouts are adding 10+ minutes to your sleep latency",evidenceWeight:"89% your data, 11% population",status:"pending"},{id:"plan-002",text:"No caffeine after 2:15 PM",explanation:"Late caffeine is suppressing your overnight HRV by 8ms",evidenceWeight:"84% your data, 16% population",status:"pending"}],moderate:[{id:"plan-003",text:"Set bedroom to 19Â°C tonight",explanation:"Cooler temps correlate with +14 min deep sleep for you",evidenceWeight:"76% your data, 24% population",status:"pending"},{id:"plan-004",text:"Get 30+ min Zone 2 cardio",explanation:"You're on track for 175 min/weekâ€”keep it up for lipid benefits",evidenceWeight:"55% your data, 45% population",status:"pending"}],maintain:[{id:"plan-005",text:"Keep eating window to 10 hours",explanation:"Your current window is working well for glucose control",evidenceWeight:"70% your data, 30% population",status:"pending"}]},eveningCheckIn:{completed:[],pending:[],prediction:{sleepScore:72,deepSleep:48,sleepLatency:14,confidence:.78}}},Za={id:"sarah",name:"Sarah M.",avatar:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=150&h=150&fit=crop&crop=face",age:41,archetype:"The Metabolic Optimizer",narrative:"Pre-diabetic turned success story; reversed glucose trends through lifestyle changes",daysOfData:90,devices:["oura","fitbit","Vitals+-app","bloodwork","weather"],deviceConnections:[{deviceId:"oura",isActive:!0,firstConnected:"2024-07-01",lastRefreshed:"2025-01-11T04:30:00Z"},{deviceId:"fitbit",isActive:!1,firstConnected:"2024-05-10",lastRefreshed:"2024-09-20T08:00:00Z"},{deviceId:"Vitals+-app",isActive:!0,firstConnected:"2024-07-01",lastRefreshed:"2025-01-11T04:30:00Z"},{deviceId:"bloodwork",isActive:!0,firstConnected:"2024-07-01",lastRefreshed:"2025-01-11T04:30:00Z"},{deviceId:"weather",isActive:!0,firstConnected:"2024-07-01",lastRefreshed:"2025-01-11T04:30:00Z"}],hasBloodwork:!0,labDraws:4,thresholds:{caffeineCutoff:"16:30",workoutEndTime:"20:00",bedroomTempCeiling:19,eatingWindowHours:8,minSleepHours:7.5,maxAlcoholUnits:1},currentMetrics:{sleepScore:82,deepSleepMin:55,remSleepMin:95,sleepLatencyMin:9,hrv:52,restingHr:54,fastingGlucose:94,weight:145,trainingLoad:"optimal"},tags:["metabolic-success","cgm-user","consistency-champion"]},Qa=[{id:"sarah-insight-001",personaId:"sarah",category:"metabolic",variableType:"marker",title:"EATING WINDOW â†’ FASTING GLUCOSE",headline:"Your 8-hour eating window is transforming your glucose",recommendation:"Maintain 8-hour eating window (10 AM - 6 PM)",explanation:"Time-restricted eating reduced your fasting glucose by 24 mg/dL",cause:{behavior:"eating_window",threshold:8,unit:"hours",direction:"below"},populationThreshold:{value:12,label:"Typical Eating Window",variance:"4 hours shorter than typical"},outcome:{metric:"fasting_glucose",effect:"-24 mg/dL from baseline",direction:"positive"},certainty:.93,evidence:{personalDays:87,personalWeight:.93,populationWeight:.07,stability:.91},dataSources:["dexcom","apple-watch"],comparison:{before:{value:118,label:"Before TRE (Aug)"},after:{value:94,label:"Current (Dec)"}},whyNow:"You've maintained your eating window consistently for 90 daysâ€”your glucose is responding.",holdoutPreview:{metric:"fasting_glucose",expectedChange:-3,unit:"mg/dL",horizon:"30 days"},showWork:"Over 87 days of CGM data, your fasting glucose dropped from 118 mg/dL to 94 mg/dL. The improvement accelerated after 6 weeks of consistent 8-hour eating windows. Your glucose variability also decreased by 40%, indicating improved metabolic flexibility. This matches research showing TRE benefits compound over time."},{id:"sarah-insight-002",personaId:"sarah",category:"metabolic",variableType:"outcome",title:"POST-MEAL WALKS â†’ GLUCOSE SPIKE",headline:"15-minute walks are cutting your glucose spikes in half",recommendation:"Walk for 15 min after meals",explanation:"Post-meal movement reduces glucose spike by 28 mg/dL",cause:{behavior:"post_meal_walk",threshold:15,unit:"minutes",direction:"above"},populationThreshold:{value:"20 mg/dL",label:"Population Avg Reduction",variance:"Your response is 40% stronger than average"},outcome:{metric:"glucose_spike",effect:"-28 mg/dL peak reduction",direction:"positive"},certainty:.88,evidence:{personalDays:65,personalWeight:.88,populationWeight:.12,stability:.85},dataSources:["dexcom","apple-watch"],comparison:{before:{value:156,label:"No walk post-meal"},after:{value:128,label:"With 15-min walk"}},whyNow:"CGM data shows clear pattern on walk vs. no-walk days.",holdoutPreview:{metric:"time_in_range",expectedChange:8,unit:"%",horizon:"14 days"},showWork:"Comparing 42 meals followed by walks vs. 38 meals without, your average glucose peak was 128 mg/dL vs. 156 mg/dL. The effect is most pronounced after carb-heavy meals. Your personal response is stronger than the population average (28 mg/dL vs. 20 mg/dL reduction)."},{id:"sarah-insight-003",personaId:"sarah",category:"sleep",variableType:"outcome",title:"CAFFEINE TIMING â†’ SLEEP QUALITY",headline:"Your caffeine cutoff can be later than average",recommendation:"Caffeine is fine until 4:30 PM for you",explanation:"You metabolize caffeine fasterâ€”no sleep impact until after 4:30 PM",cause:{behavior:"caffeine_cutoff",threshold:"16:30",unit:"time",direction:"before"},populationThreshold:{value:"14:00",label:"Population Average",variance:"2.5 hours later than average"},outcome:{metric:"sleep_quality",effect:"No degradation until after 4:30 PM",direction:"positive"},certainty:.79,evidence:{personalDays:72,personalWeight:.79,populationWeight:.21,stability:.74},dataSources:["oura"],comparison:{before:{value:78,label:"Caffeine at 5 PM"},after:{value:82,label:"Caffeine before 4:30 PM"}},whyNow:"Your personalized threshold differs from the population average (2:00 PM).",showWork:"Analysis of your 72 days with caffeine tracking shows no significant sleep quality difference when caffeine is consumed before 4:30 PM. After 5 PM, your sleep score drops by 4 points on average. Your threshold is 2.5 hours later than the population average, suggesting faster caffeine metabolism."},{id:"sarah-insight-004",personaId:"sarah",category:"cardio",variableType:"outcome",title:"HRV TREND â†’ RECOVERY STATUS",headline:"Your HRV consistency indicates excellent recovery",recommendation:"Maintain current recovery practices",explanation:"Your HRV variability is 40% lower than baseline, showing adaptation",cause:{behavior:"recovery_practices",threshold:0,unit:"composite",direction:"above"},populationThreshold:{value:"52 ms",label:"Avg for Your Age",variance:"Your HRV is in the top 20% for your demographic"},outcome:{metric:"hrv_stability",effect:"Day-to-day variance reduced 40%",direction:"positive"},certainty:.85,evidence:{personalDays:90,personalWeight:.85,populationWeight:.15,stability:.88},dataSources:["oura"],comparison:{before:{value:18,label:"HRV variance (Aug)"},after:{value:11,label:"HRV variance (Dec)"}},whyNow:"Three months of consistent data shows your recovery has stabilized.",showWork:"Your HRV standard deviation dropped from 18ms to 11ms over 90 days while your average HRV increased from 44ms to 52ms. Lower day-to-day variance combined with higher baseline indicates improved autonomic regulation and recovery capacity."},{id:"sarah-insight-005",personaId:"sarah",category:"metabolic",variableType:"outcome",title:"SLEEP DURATION â†’ TIME IN RANGE",headline:"Sleep under 7 hours spikes your glucose the next day",recommendation:"Prioritize 7.5+ hours of sleep",explanation:"Short sleep reduces your time-in-range by 15%",cause:{behavior:"sleep_duration",threshold:7,unit:"hours",direction:"above"},populationThreshold:{value:6.5,label:"Population Average Need",variance:"You need 30 min more than average"},outcome:{metric:"time_in_range",effect:"-15% when sleep is under 7 hours",direction:"negative"},certainty:.86,evidence:{personalDays:82,personalWeight:.86,populationWeight:.14,stability:.82},dataSources:["oura","dexcom"],comparison:{before:{value:72,label:"<7 hrs sleep"},after:{value:87,label:"7.5+ hrs sleep"}},whyNow:"Cross-referencing your sleep and CGM data reveals this pattern.",holdoutPreview:{metric:"time_in_range",expectedChange:5,unit:"%",horizon:"7 days"},showWork:"On 24 nights with less than 7 hours of sleep, your next-day time-in-range averaged 72%. On 58 nights with 7.5+ hours, it averaged 87%. The effect is most pronounced in the morning hours, suggesting sleep impacts your dawn phenomenon response."},{id:"sarah-insight-006",personaId:"sarah",category:"metabolic",variableType:"marker",title:"TIME-RESTRICTED EATING â†’ HBA1C",headline:"Your HbA1c dropped from pre-diabetic to optimal range",recommendation:"Continue 8-hour eating window for HbA1c maintenance",explanation:"HbA1c improved 0.6% in 4 months",causalParams:{source:"eating_window_hours",target:"hba1c_pct",curveType:"plateau_down",theta:{value:8,unit:"hours",low:7,high:9,displayValue:"8 hours"},betaBelow:{value:-.05,unit:"%",description:"-0.05% per hour shorter"},betaAbove:{value:.12,unit:"%",description:"+0.12% per hour longer"},observations:4,completePct:100,changepointProb:.95,sizeCategory:"large",currentValue:8,currentStatus:"at_optimal"},cause:{behavior:"eating_window",threshold:8,unit:"hours",direction:"below"},outcome:{metric:"hba1c",effect:"-0.6% over 4 months",direction:"positive"},certainty:.96,evidence:{personalDays:120,personalWeight:.82,populationWeight:.18,stability:.94},dataSources:["Vitals+-app","bloodwork"],comparison:{before:{value:5.9,label:"Aug (pre-TRE)"},after:{value:5.3,label:"Dec (4 months TRE)"}},whyNow:"Your HbA1c dropped from 5.9% to 5.3%â€”out of pre-diabetic range.",holdoutPreview:{metric:"hba1c",expectedChange:-.1,unit:"%",horizon:"12 weeks"},showWork:"Four consecutive lab draws show steady HbA1c improvement: 5.9% â†’ 5.7% â†’ 5.5% â†’ 5.3%. The 0.6% total reduction correlates perfectly with your consistent 8-hour eating window. Population research supports TRE for glycemic control, but your response is stronger than average.",actionable:!0,priority:1},{id:"sarah-insight-007",personaId:"sarah",category:"metabolic",variableType:"marker",title:"LIFESTYLE CHANGES â†’ TRIGLYCERIDES",headline:"Your triglycerides dropped 33% without medication",recommendation:"Continue current lifestyle protocol",explanation:"Triglycerides improved from 168 to 112 mg/dL",causalParams:{source:"combined_lifestyle_score",target:"triglycerides_mgdl",curveType:"linear",theta:{value:80,unit:"score",low:70,high:90,displayValue:"80+ lifestyle score"},betaBelow:{value:8,unit:"mg/dL",description:"+8 mg/dL per point lower"},betaAbove:{value:-4,unit:"mg/dL",description:"-4 mg/dL per point higher"},observations:4,completePct:100,changepointProb:.93,sizeCategory:"large",currentValue:85,currentStatus:"above_optimal"},cause:{behavior:"lifestyle_composite",threshold:80,unit:"score",direction:"above"},outcome:{metric:"triglycerides",effect:"-56 mg/dL over 4 months",direction:"positive"},certainty:.94,evidence:{personalDays:120,personalWeight:.78,populationWeight:.22,stability:.91},dataSources:["bloodwork","Vitals+-app","oura"],comparison:{before:{value:168,label:"Aug baseline"},after:{value:112,label:"Dec current"}},whyNow:"Your triglycerides are now in optimal range (<150 mg/dL).",holdoutPreview:{metric:"triglycerides",expectedChange:-8,unit:"mg/dL",horizon:"8 weeks"},showWork:"Your triglyceride improvement tracks with multiple lifestyle changes: time-restricted eating, regular post-meal walks, reduced alcohol, and improved sleep. The combined effect exceeds what any single intervention would achieve. Your trajectory suggests continued improvement.",actionable:!0,priority:1},{id:"sarah-insight-008",personaId:"sarah",category:"metabolic",variableType:"marker",title:"HDL IMPROVEMENT â†’ CARDIOVASCULAR RISK",headline:"Your HDL increased 25% from lifestyle changes",recommendation:"Add 2 servings fatty fish per week for further HDL boost",explanation:"HDL improved from 48 to 60 mg/dL",causalParams:{source:"weekly_exercise_minutes",target:"hdl_mgdl",curveType:"plateau_up",theta:{value:150,unit:"min/week",low:120,high:180,displayValue:"150 min/week"},betaBelow:{value:.5,unit:"mg/dL",description:"+0.5 mg/dL per 10min more"},betaAbove:{value:.15,unit:"mg/dL",description:"+0.15 mg/dL per 10min (diminishing)"},observations:4,completePct:100,changepointProb:.88,sizeCategory:"medium",currentValue:180,currentStatus:"above_optimal"},cause:{behavior:"exercise_frequency",threshold:150,unit:"minutes/week",direction:"above"},outcome:{metric:"hdl_cholesterol",effect:"+12 mg/dL over 4 months",direction:"positive"},certainty:.91,evidence:{personalDays:120,personalWeight:.72,populationWeight:.28,stability:.87},dataSources:["bloodwork","oura","apple-watch"],comparison:{before:{value:48,label:"Aug (low)"},after:{value:60,label:"Dec (optimal)"}},whyNow:"Your HDL crossed the 60 mg/dL thresholdâ€”now cardioprotective.",holdoutPreview:{metric:"hdl_cholesterol",expectedChange:2,unit:"mg/dL",horizon:"8 weeks"},showWork:"HDL increase correlates with your consistent exercise routine (averaging 180 min/week). Your HDL:LDL ratio improved from 0.36 to 0.61. Combined with triglyceride reduction, your cardiovascular risk profile improved substantially.",actionable:!0,priority:2},{id:"sarah-insight-009",personaId:"sarah",category:"metabolic",variableType:"marker",title:"INFLAMMATION REDUCTION â†’ HSCRP",headline:"Your inflammation marker dropped 63%",recommendation:"Maintain anti-inflammatory lifestyle practices",explanation:"hsCRP improved from 2.4 to 0.9 mg/L",causalParams:{source:"metabolic_health_score",target:"hscrp_mgl",curveType:"plateau_down",theta:{value:75,unit:"score",low:65,high:85,displayValue:"75+ score"},betaBelow:{value:.15,unit:"mg/L",description:"+0.15 mg/L per point lower"},betaAbove:{value:-.08,unit:"mg/L",description:"-0.08 mg/L per point higher"},observations:4,completePct:100,changepointProb:.92,sizeCategory:"large",currentValue:85,currentStatus:"above_optimal"},cause:{behavior:"metabolic_health",threshold:75,unit:"score",direction:"above"},outcome:{metric:"hscrp",effect:"-1.5 mg/L over 4 months",direction:"positive"},certainty:.93,evidence:{personalDays:120,personalWeight:.75,populationWeight:.25,stability:.89},dataSources:["bloodwork"],comparison:{before:{value:2.4,label:"Aug (elevated)"},after:{value:.9,label:"Dec (optimal)"}},whyNow:"Your hsCRP is now in optimal range (<1.0 mg/L), indicating low systemic inflammation.",holdoutPreview:{metric:"hscrp",expectedChange:-.1,unit:"mg/L",horizon:"8 weeks"},showWork:"hsCRP reduction parallels your metabolic improvements. Improved glucose control, weight management, and reduced visceral fat all contribute to lower inflammation. Your 63% reduction exceeds typical lifestyle intervention results.",actionable:!0,priority:1},{id:"sarah-insight-010",personaId:"sarah",category:"metabolic",variableType:"marker",title:"VITAMIN D OPTIMIZATION â†’ MULTIPLE MARKERS",headline:"Vitamin D supplementation is supporting your metabolic health",recommendation:"Continue 4000 IU Vitamin D3 daily",explanation:"Vitamin D increased from 28 to 48 ng/mL",causalParams:{source:"daily_vitamin_d_iu",target:"vitamin_d_ngml",curveType:"plateau_up",theta:{value:4e3,unit:"IU",low:3e3,high:5e3,displayValue:"4000 IU daily"},betaBelow:{value:.8,unit:"ng/mL",description:"+0.8 ng/mL per 500 IU more"},betaAbove:{value:.2,unit:"ng/mL",description:"+0.2 ng/mL per 500 IU (diminishing)"},observations:4,completePct:100,changepointProb:.9,sizeCategory:"medium",currentValue:4e3,currentStatus:"at_optimal"},cause:{behavior:"vitamin_d_supplementation",threshold:4e3,unit:"IU",direction:"above"},outcome:{metric:"vitamin_d",effect:"+20 ng/mL over 4 months",direction:"positive"},certainty:.89,evidence:{personalDays:120,personalWeight:.55,populationWeight:.45,stability:.86},dataSources:["bloodwork","Vitals+-app"],comparison:{before:{value:28,label:"Aug (insufficient)"},after:{value:48,label:"Dec (optimal)"}},whyNow:"Your Vitamin D reached optimal range (40-60 ng/mL).",holdoutPreview:{metric:"vitamin_d",expectedChange:2,unit:"ng/mL",horizon:"8 weeks"},showWork:"Vitamin D insufficiency is linked to insulin resistance. Your improvement from 28 to 48 ng/mL coincided with improved insulin sensitivity. Population research suggests Vitamin D supports glucose metabolism, which your data confirms.",actionable:!0,priority:2},{id:"sarah-insight-011",personaId:"sarah",category:"metabolic",variableType:"marker",title:"LDL REDUCTION â†’ CARDIOVASCULAR RISK",headline:"Your LDL dropped 34 points from lifestyle alone",recommendation:"Add 10g soluble fiber daily for additional LDL reduction",explanation:"LDL improved from 132 to 98 mg/dL",causalParams:{source:"dietary_fiber_g",target:"ldl_mgdl",curveType:"plateau_down",theta:{value:25,unit:"grams",low:20,high:30,displayValue:"25g fiber/day"},betaBelow:{value:3,unit:"mg/dL",description:"+3 mg/dL per 5g less fiber"},betaAbove:{value:-2,unit:"mg/dL",description:"-2 mg/dL per 5g more fiber"},observations:4,completePct:100,changepointProb:.91,sizeCategory:"large",currentValue:28,currentStatus:"above_optimal"},cause:{behavior:"dietary_fiber",threshold:25,unit:"grams",direction:"above"},outcome:{metric:"ldl_cholesterol",effect:"-34 mg/dL over 4 months",direction:"positive"},certainty:.92,evidence:{personalDays:120,personalWeight:.68,populationWeight:.32,stability:.88},dataSources:["bloodwork","Vitals+-app"],comparison:{before:{value:132,label:"Aug (elevated)"},after:{value:98,label:"Dec (optimal)"}},whyNow:"Your LDL dropped below 100 mg/dLâ€”now in optimal range.",holdoutPreview:{metric:"ldl_cholesterol",expectedChange:-5,unit:"mg/dL",horizon:"8 weeks"},showWork:"Your LDL reduction correlates with increased fiber intake, time-restricted eating, and improved metabolic health. The 26% reduction without medication is exceptional. Adding soluble fiber (oats, beans) could push LDL even lower.",actionable:!0,priority:2}];function Ur(){const t=[],a=new Date("2024-09-15");for(let s=0;s<90;s++){const r=new Date(a);r.setDate(r.getDate()+s);const i=r.toISOString().split("T")[0],n=s/90,o=72+n*10,u=44+n*8,m={date:i,sleepScore:Math.round(o+Math.random()*8-4),sleepDuration:Math.round(420+Math.random()*60),deepSleep:Math.round(48+n*10+Math.random()*10),remSleep:Math.round(85+Math.random()*20),lightSleep:Math.round(220+Math.random()*40),sleepLatency:Math.round(12-n*4+Math.random()*5),sleepEfficiency:.85+n*.05+Math.random()*.05,bedtime:`22:${Math.floor(Math.random()*30).toString().padStart(2,"0")}`,wakeTime:`06:${Math.floor(15+Math.random()*30).toString().padStart(2,"0")}`,hrv:Math.round(u+Math.random()*10),restingHr:Math.round(58-n*4+Math.random()*4),respiratoryRate:13+Math.random()*1,bodyTemp:-.1+Math.random()*.3,steps:Math.round(8e3+Math.random()*4e3),activeCalories:Math.round(300+Math.random()*200),moderateMinutes:Math.round(30+Math.random()*20),vigorousMinutes:Math.round(10+Math.random()*15),zone2Minutes:Math.round(20+Math.random()*25),trainingLoad:Math.round(50+Math.random()*30),caffeineCutoff:`${14+Math.floor(Math.random()*3)}:${Math.floor(Math.random()*60).toString().padStart(2,"0")}`,alcoholUnits:Math.random()>.85?1:0,eatingWindowStart:"10:00",eatingWindowEnd:"18:00",bedroomTemp:18+Math.random()*1.5,workoutTime:Math.random()>.2?`${17+Math.floor(Math.random()*3)}:${Math.floor(Math.random()*60).toString().padStart(2,"0")}`:null,workoutType:Math.random()>.2?["strength","yoga","cardio","walking"][Math.floor(Math.random()*4)]:null,mood:Math.round(5+n+Math.random()),energy:Math.round(5+n+Math.random()),focus:Math.round(5+n*.5+Math.random()),stress:Math.round(4-n+Math.random())};t.push(m)}return t}const Gr=Ur(),qr=[{date:"2024-08-01",fastingGlucose:118,hba1c:5.9,totalCholesterol:210,ldl:132,hdl:48,triglycerides:168,hsCrp:2.4,vitaminD:28},{date:"2024-09-15",fastingGlucose:112,hba1c:5.7,totalCholesterol:198,ldl:122,hdl:52,triglycerides:148,hsCrp:1.9,vitaminD:35},{date:"2024-11-01",fastingGlucose:102,hba1c:5.5,totalCholesterol:185,ldl:108,hdl:56,triglycerides:128,hsCrp:1.4,vitaminD:42},{date:"2024-12-15",fastingGlucose:94,hba1c:5.3,totalCholesterol:178,ldl:98,hdl:60,triglycerides:112,hsCrp:.9,vitaminD:48}],Xa=[{id:"sarah-protocol-glucose",personaId:"sarah",name:"Glucose Optimization Protocol",description:"Maximize time-in-range through meal timing and movement",category:"metabolic",status:"active",outcome:"time_in_range",baseline:{value:.72,unit:"%"},actions:[{id:"action-eating-start",label:"Start eating at 10:00 AM",category:"metabolic",isActive:!0,impact:.04,actionType:"cutoff",time:"10:00 AM",linkedInsightId:"sarah-insight-001"},{id:"action-eating-end",label:"Last meal by 6:00 PM",category:"metabolic",isActive:!0,impact:.04,actionType:"cutoff",time:"6:00 PM",linkedInsightId:"sarah-insight-001"},{id:"action-post-meal-walk",label:"15-min walk after meals",category:"metabolic",isActive:!0,impact:.06,actionType:"duration",linkedInsightId:"sarah-insight-002"},{id:"action-sleep-priority",label:"Get 7.5+ hours sleep",category:"sleep",isActive:!0,impact:.05,actionType:"target",linkedInsightId:"sarah-insight-005"},{id:"action-protein-first",label:"Eat protein before carbs",category:"nutrition",isActive:!1,impact:.03,actionType:"target"}],states:[{id:"state-stress",label:"High stress day",isActive:!1},{id:"state-period",label:"Menstrual cycle day 1-5",isActive:!1}],triggers:[{if:["state-stress"],then:["action-post-meal-walk","action-sleep-priority"],reason:"Stress hormones elevate glucoseâ€”prioritize movement and sleep"}],simulator:{deltas:{"action-eating-start":.04,"action-eating-end":.04,"action-post-meal-walk":.06,"action-sleep-priority":.05,"action-protein-first":.03}},evidenceLevel:93,difficulty:2},{id:"sarah-protocol-metabolic-reversal",personaId:"sarah",name:"Metabolic Health Protocol",description:"Continue reversing pre-diabetic markers through lifestyle",category:"metabolic",status:"active",outcome:"hba1c",baseline:{value:5.3,unit:"%"},actions:[{id:"action-tre-8hr",label:"8-hour eating window daily",category:"metabolic",isActive:!0,impact:-.15,actionType:"duration",linkedInsightId:"sarah-insight-006"},{id:"action-fiber-25g",label:"25g+ fiber daily",category:"nutrition",isActive:!0,impact:-.08,actionType:"target",linkedInsightId:"sarah-insight-011"},{id:"action-vitamin-d",label:"4000 IU Vitamin D3 daily",category:"metabolic",isActive:!0,impact:-.05,actionType:"target",linkedInsightId:"sarah-insight-010"},{id:"action-weekly-exercise",label:"150+ min exercise weekly",category:"activity",isActive:!0,impact:-.1,actionType:"duration",linkedInsightId:"sarah-insight-008"}],states:[{id:"state-vacation",label:"On vacation",isActive:!1}],triggers:[{if:["state-vacation"],then:["action-tre-8hr"],reason:"Maintain eating window even on vacationâ€”it's the most impactful"}],simulator:{deltas:{"action-tre-8hr":-.15,"action-fiber-25g":-.08,"action-vitamin-d":-.05,"action-weekly-exercise":-.1}},evidenceLevel:94,difficulty:3},{id:"sarah-protocol-lipids",personaId:"sarah",name:"Lipid Optimization Protocol",description:"Maintain and improve lipid panel through diet and exercise",category:"cardio",status:"active",outcome:"ldl_cholesterol",baseline:{value:98,unit:"mg/dL"},actions:[{id:"action-soluble-fiber",label:"10g soluble fiber daily",category:"nutrition",isActive:!0,impact:-8,actionType:"target",linkedInsightId:"sarah-insight-011"},{id:"action-fatty-fish",label:"2 servings fatty fish weekly",category:"nutrition",isActive:!1,impact:-5,actionType:"target",linkedInsightId:"sarah-insight-008"},{id:"action-cardio-150",label:"150+ min cardio weekly",category:"activity",isActive:!0,impact:-6,actionType:"duration",linkedInsightId:"sarah-insight-008"}],states:[],triggers:[],simulator:{deltas:{"action-soluble-fiber":-8,"action-fatty-fish":-5,"action-cardio-150":-6}},evidenceLevel:91,difficulty:2},{id:"sarah-protocol-sleep",personaId:"sarah",name:"Sleep Quality Protocol",description:"Optimize sleep for metabolic health",category:"sleep",status:"suggested",outcome:"sleep_score",baseline:{value:82,unit:"score"},actions:[{id:"action-caffeine-cutoff",label:"No caffeine after 4:30 PM",category:"sleep",isActive:!0,impact:3,actionType:"cutoff",time:"4:30 PM",linkedInsightId:"sarah-insight-003"},{id:"action-bedtime",label:"In bed by 10:30 PM",category:"sleep",isActive:!0,impact:4,actionType:"cutoff",time:"10:30 PM"},{id:"action-bedroom-temp",label:"Set bedroom to 19Â°C",category:"sleep",isActive:!1,impact:2,actionType:"target"}],states:[],triggers:[],simulator:{deltas:{"action-caffeine-cutoff":3,"action-bedtime":4,"action-bedroom-temp":2}},evidenceLevel:85,difficulty:1}],Zr={personaId:"sarah",date:new Date().toISOString().split("T")[0],greeting:"Good morning, Sarah! Your time-in-range was 89% yesterdayâ€”you're crushing it.",priorities:{high:[{id:"plan-001",text:"Start eating window at 10 AM",explanation:"Your 8-hour window is key to your glucose improvements",evidenceWeight:"93% your data, 7% population",status:"pending"}],moderate:[{id:"plan-002",text:"15-min walk after lunch",explanation:"Cuts your post-meal spike by 28 mg/dL on average",evidenceWeight:"88% your data, 12% population",status:"pending"},{id:"plan-003",text:"Close eating window by 6 PM",explanation:"Late eating increases your overnight glucose by 12 mg/dL",evidenceWeight:"82% your data, 18% population",status:"pending"}],maintain:[{id:"plan-004",text:"Get to bed by 10:30 PM",explanation:"Your glucose tomorrow depends on tonight's sleep",evidenceWeight:"86% your data, 14% population",status:"pending"}]},eveningCheckIn:{completed:[],pending:[],prediction:{sleepScore:84,deepSleep:56,sleepLatency:8,confidence:.82}}},Ka={id:"marcus",name:"Marcus J.",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=150&h=150&fit=crop&crop=face",age:47,archetype:"The Recovery Specialist",narrative:"Former athlete managing inflammation through optimized recovery protocols",daysOfData:60,devices:["oura","fitbit","Vitals+-app","bloodwork","weather"],deviceConnections:[{deviceId:"oura",isActive:!0,firstConnected:"2024-09-01",lastRefreshed:"2025-01-11T04:30:00Z"},{deviceId:"fitbit",isActive:!0,firstConnected:"2024-07-15",lastRefreshed:"2025-01-11T04:30:00Z"},{deviceId:"Vitals+-app",isActive:!0,firstConnected:"2024-09-01",lastRefreshed:"2025-01-11T04:30:00Z"},{deviceId:"bloodwork",isActive:!0,firstConnected:"2024-09-15",lastRefreshed:"2025-01-11T04:30:00Z"},{deviceId:"weather",isActive:!0,firstConnected:"2024-09-01",lastRefreshed:"2025-01-11T04:30:00Z"}],hasBloodwork:!0,labDraws:2,thresholds:{caffeineCutoff:"12:00",workoutEndTime:"17:00",bedroomTempCeiling:18,eatingWindowHours:12,minSleepHours:8,maxAlcoholUnits:0},currentMetrics:{sleepScore:76,deepSleepMin:62,remSleepMin:78,sleepLatencyMin:8,hrv:58,restingHr:52,fastingGlucose:88,weight:195,trainingLoad:"high"},tags:["recovery-focused","inflammation-management","sleep-optimizer"]},Ja=[{id:"marcus-insight-001",personaId:"marcus",category:"recovery",variableType:"outcome",title:"TRAINING LOAD â†’ HRV RECOVERY",headline:"Your HRV needs 48 hours to recover from high-strain days",recommendation:"Space high-intensity workouts 48+ hours apart",explanation:"Back-to-back intense sessions suppress your HRV for 72+ hours",cause:{behavior:"training_spacing",threshold:48,unit:"hours",direction:"above"},outcome:{metric:"hrv_recovery",effect:"Full HRV recovery in 48 hours vs 72+ when stacked",direction:"positive"},certainty:.91,evidence:{personalDays:58,personalWeight:.91,populationWeight:.09,stability:.87},dataSources:["whoop","oura"],comparison:{before:{value:44,label:"Back-to-back high strain"},after:{value:62,label:"48hr spacing"}},whyNow:"You had 3 high-strain days in a row last weekâ€”your HRV is still recovering.",holdoutPreview:{metric:"hrv",expectedChange:8,unit:"ms",horizon:"7 days"},showWork:"WHOOP data shows your strain score exceeded 15 on 18 days. When followed by another high-strain day within 24 hours (8 occurrences), your HRV dropped to 44ms and took 72+ hours to recover. With 48+ hour spacing (10 occurrences), HRV stayed at 62ms with full recovery. Your recovery rate is 15% slower than typical for your age."},{id:"marcus-insight-002",personaId:"marcus",category:"recovery",variableType:"marker",title:"ALCOHOL â†’ INFLAMMATION (hsCRP)",headline:"Even moderate alcohol is elevating your inflammation markers",recommendation:"Consider eliminating alcohol entirely",explanation:"Any alcohol consumption raises your hsCRP by 40% for 48 hours",cause:{behavior:"alcohol_consumption",threshold:0,unit:"drinks",direction:"below"},outcome:{metric:"hsCrp",effect:"+40% inflammation for 48 hours after drinking",direction:"negative"},certainty:.87,evidence:{personalDays:60,personalWeight:.72,populationWeight:.28,stability:.8},dataSources:["oura","apple-watch"],comparison:{before:{value:2.8,label:"After alcohol"},after:{value:1.6,label:"No alcohol"}},whyNow:"Your hsCRP dropped 43% when you did a 30-day alcohol-free experiment.",showWork:"During your alcohol-free period, hsCRP dropped from 2.8 mg/L to 1.6 mg/L. When you reintroduced occasional drinks, we observed HRV dropping 15% and resting HR increasing 8% for 48 hours post-consumption. Your inflammatory response to alcohol is above average, possibly due to your history of joint issues."},{id:"marcus-insight-003",personaId:"marcus",category:"sleep",variableType:"outcome",title:"CAFFEINE TIMING â†’ DEEP SLEEP",headline:"Your caffeine sensitivity requires a noon cutoff",recommendation:"No caffeine after 12:00 PM",explanation:"Caffeine after noon cuts your deep sleep by 25 minutes",cause:{behavior:"caffeine_cutoff",threshold:"12:00",unit:"time",direction:"before"},outcome:{metric:"deep_sleep",effect:"-25 min when caffeine after noon",direction:"negative"},certainty:.83,evidence:{personalDays:55,personalWeight:.83,populationWeight:.17,stability:.79},dataSources:["oura"],comparison:{before:{value:42,label:"Afternoon caffeine"},after:{value:67,label:"Morning only caffeine"}},whyNow:"Your deep sleep has been under 50 minutes on days with afternoon caffeine.",holdoutPreview:{metric:"deep_sleep",expectedChange:18,unit:"minutes",horizon:"5 days"},showWork:"Your caffeine threshold (noon) is 2-4 hours earlier than population average. On 32 days with no caffeine after noon, deep sleep averaged 67 minutes. On 23 days with afternoon caffeine, it dropped to 42 minutes. Genetic factors may contribute to your slower caffeine metabolismâ€”consider CYP1A2 testing."},{id:"marcus-insight-004",personaId:"marcus",category:"cardio",variableType:"outcome",title:"COLD EXPOSURE â†’ RECOVERY SCORE",headline:"Cold showers are boosting your recovery scores",recommendation:"Continue 2-min cold exposure post-workout",explanation:"Cold exposure improves your next-day recovery by 12%",cause:{behavior:"cold_exposure",threshold:2,unit:"minutes",direction:"above"},outcome:{metric:"recovery_score",effect:"+12% recovery score next day",direction:"positive"},certainty:.74,evidence:{personalDays:42,personalWeight:.74,populationWeight:.26,stability:.68},dataSources:["whoop"],comparison:{before:{value:58,label:"No cold exposure"},after:{value:70,label:"With cold exposure"}},whyNow:"You've been consistent with cold exposure for 6 weeksâ€”the pattern is clear.",showWork:"On 28 days with documented cold exposure (2+ minutes), your next-day WHOOP recovery averaged 70%. On 14 days without, it averaged 58%. The effect is most pronounced after high-strain workouts, suggesting cold exposure helps manage exercise-induced inflammation."},{id:"marcus-insight-005",personaId:"marcus",category:"sleep",variableType:"outcome",title:"BEDROOM TEMP â†’ SLEEP EFFICIENCY",headline:"You sleep best at 17Â°Câ€”cooler than most",recommendation:"Set bedroom to 17Â°C (63Â°F)",explanation:"Each degree above 18Â°C costs you 3% sleep efficiency",cause:{behavior:"bedroom_temp",threshold:18,unit:"celsius",direction:"below"},outcome:{metric:"sleep_efficiency",effect:"-3% per degree above threshold",direction:"negative"},certainty:.81,evidence:{personalDays:52,personalWeight:.81,populationWeight:.19,stability:.77},dataSources:["oura","eight-sleep"],comparison:{before:{value:82,label:"At 21Â°C"},after:{value:91,label:"At 17Â°C"}},whyNow:"Winter heating is pushing your bedroom above optimal.",holdoutPreview:{metric:"sleep_efficiency",expectedChange:4,unit:"%",horizon:"3 days"},showWork:"Your optimal temperature threshold (17-18Â°C) is 2-3 degrees cooler than population average. This may be related to your higher muscle mass and metabolic rate. On nights at 17Â°C, your sleep efficiency averaged 91%. At 21Â°C, it dropped to 82%."}];function Qr(){const t=[],a=new Date("2024-10-15");for(let s=0;s<60;s++){const r=new Date(a);r.setDate(r.getDate()+s);const i=r.toISOString().split("T")[0],n=s%3===0,o=s%3===2,u=o?62:n?48:55,c={date:i,sleepScore:Math.round((o?82:n?70:76)+Math.random()*10-5),sleepDuration:Math.round(450+Math.random()*60),deepSleep:Math.round(55+Math.random()*20),remSleep:Math.round(70+Math.random()*20),lightSleep:Math.round(240+Math.random()*40),sleepLatency:Math.round(6+Math.random()*6),sleepEfficiency:.88+Math.random()*.06,bedtime:`21:${Math.floor(30+Math.random()*30).toString().padStart(2,"0")}`,wakeTime:`05:${Math.floor(30+Math.random()*30).toString().padStart(2,"0")}`,hrv:Math.round(u+Math.random()*12),restingHr:Math.round(50+Math.random()*6),respiratoryRate:12.5+Math.random()*1,bodyTemp:-.3+Math.random()*.4,steps:Math.round(6e3+Math.random()*4e3),activeCalories:Math.round(n?600+Math.random()*200:300+Math.random()*150),moderateMinutes:Math.round(25+Math.random()*25),vigorousMinutes:Math.round(n?40+Math.random()*20:10+Math.random()*15),zone2Minutes:Math.round(20+Math.random()*30),trainingLoad:Math.round(n?85+Math.random()*15:40+Math.random()*30),caffeineCutoff:`${10+Math.floor(Math.random()*3)}:${Math.floor(Math.random()*60).toString().padStart(2,"0")}`,alcoholUnits:0,eatingWindowStart:"07:00",eatingWindowEnd:"19:00",bedroomTemp:17+Math.random()*2,workoutTime:n?`${6+Math.floor(Math.random()*2)}:${Math.floor(Math.random()*60).toString().padStart(2,"0")}`:null,workoutType:n?["strength","hiit","crossfit"][Math.floor(Math.random()*3)]:o?"yoga":null,mood:Math.round(5+Math.random()*1.5),energy:Math.round(o?6+Math.random():5+Math.random()),focus:Math.round(5+Math.random()*1.5),stress:Math.round(3+Math.random()*1.5),events:n?["high_strain"]:void 0};t.push(c)}return t}const Xr=Qr(),Kr=[{date:"2024-10-01",fastingGlucose:92,hba1c:5.1,totalCholesterol:175,ldl:95,hdl:62,triglycerides:88,hsCrp:2.8,homocysteine:9.2,vitaminD:55,testosterone:580,cortisol:18},{date:"2024-12-01",fastingGlucose:88,hba1c:5,totalCholesterol:168,ldl:88,hdl:65,triglycerides:78,hsCrp:1.6,homocysteine:8.1,vitaminD:62,testosterone:615,cortisol:14}],es=[{id:"marcus-protocol-recovery",personaId:"marcus",name:"HRV Recovery Protocol",description:"Optimize training spacing and recovery for maximum HRV",category:"recovery",status:"active",outcome:"hrv",baseline:{value:48,unit:"ms"},actions:[{id:"action-training-spacing",label:"48+ hours between HIIT",category:"recovery",isActive:!0,impact:14,actionType:"duration",linkedInsightId:"marcus-insight-001"},{id:"action-cold-exposure",label:"2-min cold shower post-workout",category:"recovery",isActive:!0,impact:6,actionType:"duration",linkedInsightId:"marcus-insight-004"},{id:"action-no-alcohol",label:"Zero alcohol",category:"recovery",isActive:!0,impact:8,actionType:"target",linkedInsightId:"marcus-insight-002"},{id:"action-workout-end",label:"Workouts done by 5:00 PM",category:"recovery",isActive:!0,impact:4,actionType:"cutoff",time:"5:00 PM"}],states:[{id:"state-high-strain",label:"High strain yesterday",isActive:!0},{id:"state-competition",label:"Competition week",isActive:!1}],triggers:[{if:["state-high-strain"],then:["action-cold-exposure","action-training-spacing"],reason:"Post-high-strain recovery requires cold exposure and spacing"}],simulator:{deltas:{"action-training-spacing":14,"action-cold-exposure":6,"action-no-alcohol":8,"action-workout-end":4}},evidenceLevel:91,difficulty:3},{id:"marcus-protocol-deep-sleep",personaId:"marcus",name:"Deep Sleep Protocol",description:"Maximize deep sleep for recovery through caffeine timing and temperature",category:"sleep",status:"active",outcome:"deep_sleep",baseline:{value:42,unit:"minutes"},actions:[{id:"action-caffeine-noon",label:"No caffeine after 12:00 PM",category:"sleep",isActive:!0,impact:25,actionType:"cutoff",time:"12:00 PM",linkedInsightId:"marcus-insight-003"},{id:"action-bedroom-17c",label:"Set bedroom to 17Â°C",category:"sleep",isActive:!0,impact:9,actionType:"target",linkedInsightId:"marcus-insight-005"},{id:"action-sleep-8hrs",label:"In bed 8+ hours",category:"sleep",isActive:!0,impact:8,actionType:"target"},{id:"action-bedtime",label:"In bed by 9:30 PM",category:"sleep",isActive:!0,impact:5,actionType:"cutoff",time:"9:30 PM"}],states:[{id:"state-travel",label:"Travel day",isActive:!1}],triggers:[{if:["state-travel"],then:["action-caffeine-noon","action-sleep-8hrs"],reason:"Maintain caffeine cutoff even when traveling"}],simulator:{deltas:{"action-caffeine-noon":25,"action-bedroom-17c":9,"action-sleep-8hrs":8,"action-bedtime":5}},evidenceLevel:83,difficulty:2},{id:"marcus-protocol-inflammation",personaId:"marcus",name:"Inflammation Control Protocol",description:"Reduce hsCRP through lifestyle interventions",category:"recovery",status:"active",outcome:"hscrp",baseline:{value:2.8,unit:"mg/L"},actions:[{id:"action-zero-alcohol",label:"Alcohol-free",category:"recovery",isActive:!0,impact:-1.2,actionType:"target",linkedInsightId:"marcus-insight-002"},{id:"action-cold-therapy",label:"Daily cold exposure",category:"recovery",isActive:!0,impact:-.3,actionType:"duration",linkedInsightId:"marcus-insight-004"},{id:"action-recovery-days",label:"2 recovery days per week",category:"recovery",isActive:!0,impact:-.2,actionType:"duration",linkedInsightId:"marcus-insight-001"},{id:"action-sleep-quality",label:"Deep sleep 60+ min",category:"sleep",isActive:!1,impact:-.15,actionType:"target",linkedInsightId:"marcus-insight-003"}],states:[],triggers:[],simulator:{deltas:{"action-zero-alcohol":-1.2,"action-cold-therapy":-.3,"action-recovery-days":-.2,"action-sleep-quality":-.15}},evidenceLevel:87,difficulty:3}],Jr={personaId:"marcus",date:new Date().toISOString().split("T")[0],greeting:"Good morning, Marcus. Yesterday was a high-strain dayâ€”today's focus is recovery.",priorities:{high:[{id:"plan-001",text:"No high-intensity workout today",explanation:"Your HRV needs 48 hours to fully recover from yesterday's strain",evidenceWeight:"91% your data, 9% population",status:"pending"},{id:"plan-002",text:"Last caffeine by noon",explanation:"Your deep sleep depends on an early caffeine cutoff",evidenceWeight:"83% your data, 17% population",status:"pending"}],moderate:[{id:"plan-003",text:"Light mobility or yoga",explanation:"Active recovery promotes blood flow without adding strain",evidenceWeight:"74% your data, 26% population",status:"pending"},{id:"plan-004",text:"Cold shower post-activity",explanation:"Cold exposure boosts your recovery score by 12%",evidenceWeight:"74% your data, 26% population",status:"pending"}],maintain:[{id:"plan-005",text:"Set bedroom to 17Â°C tonight",explanation:"You sleep best at cooler temps than most people",evidenceWeight:"81% your data, 19% population",status:"pending"}]},eveningCheckIn:{completed:[],pending:[],prediction:{sleepScore:80,deepSleep:65,sleepLatency:6,confidence:.81}}},ts={id:"emma",name:"Emma L.",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face",age:28,archetype:"The New Explorer",narrative:"Recently started tracking; demonstrates Serif's value with limited data via population priors",daysOfData:12,devices:["oura","fitbit","Vitals+-app","bloodwork","weather"],deviceConnections:[{deviceId:"oura",isActive:!1,firstConnected:void 0,lastRefreshed:void 0},{deviceId:"fitbit",isActive:!0,firstConnected:"2025-01-01",lastRefreshed:"2025-01-11T04:30:00Z"},{deviceId:"Vitals+-app",isActive:!0,firstConnected:"2025-01-01",lastRefreshed:"2025-01-11T04:30:00Z"},{deviceId:"bloodwork",isActive:!1,firstConnected:void 0,lastRefreshed:void 0},{deviceId:"weather",isActive:!0,firstConnected:"2025-01-01",lastRefreshed:"2025-01-11T04:30:00Z"}],hasBloodwork:!1,labDraws:0,thresholds:{caffeineCutoff:"14:00",workoutEndTime:"20:00",bedroomTempCeiling:20,eatingWindowHours:12,minSleepHours:7,maxAlcoholUnits:2},currentMetrics:{sleepScore:71,deepSleepMin:45,remSleepMin:82,sleepLatencyMin:15,hrv:38,restingHr:68,fastingGlucose:0,weight:135,trainingLoad:"low"},tags:["new-user","limited-data","population-priors"]},as=[{id:"emma-insight-001",personaId:"emma",category:"sleep",variableType:"outcome",title:"BEDTIME CONSISTENCY â†’ SLEEP QUALITY",headline:"Irregular bedtimes may be affecting your sleep",recommendation:"Try a consistent 10:30 PM bedtime",explanation:"Your bedtime variance is 90+ minutesâ€”consistency helps",cause:{behavior:"bedtime_consistency",threshold:30,unit:"minutes variance",direction:"below"},outcome:{metric:"sleep_score",effect:"+8 points with consistent bedtime",direction:"positive"},certainty:.62,evidence:{personalDays:12,personalWeight:.35,populationWeight:.65,stability:.48},dataSources:["apple-watch"],comparison:{before:{value:68,label:"Variable bedtime"},after:{value:76,label:"Consistent bedtime (projected)"}},whyNow:"We've noticed significant bedtime variation in your first 12 days.",holdoutPreview:{metric:"sleep_score",expectedChange:6,unit:"points",horizon:"14 days"},showWork:"Based on 12 days of data, your bedtime ranges from 10 PM to 12:30 AM. Population research strongly supports bedtime consistency for sleep quality. As we collect more of your data, this recommendation will become more personalized to your specific patterns."},{id:"emma-insight-002",personaId:"emma",category:"recovery",variableType:"outcome",title:"STEP COUNT â†’ ENERGY LEVELS",headline:"More movement may boost your daily energy",recommendation:"Aim for 8,000+ steps daily",explanation:"Population data shows strong energy correlation at this threshold",cause:{behavior:"daily_steps",threshold:8e3,unit:"steps",direction:"above"},outcome:{metric:"energy_level",effect:"+1.2 points on high-step days",direction:"positive"},certainty:.58,evidence:{personalDays:12,personalWeight:.28,populationWeight:.72,stability:.42},dataSources:["apple-watch"],comparison:{before:{value:4.2,label:"Under 5k steps"},after:{value:5.4,label:"8k+ steps (projected)"}},whyNow:"Your average step count is 5,200â€”below the optimal threshold.",showWork:"Your data shows 4 days above 7,000 steps with slightly higher energy ratings. Population research strongly supports the 8,000 step threshold for energy and mood. We'll refine your personal threshold as more data comes in."},{id:"emma-insight-003",personaId:"emma",category:"sleep",variableType:"outcome",title:"CAFFEINE TIMING â†’ SLEEP ONSET",headline:"Caffeine timing affects most people's sleep",recommendation:"Try cutting caffeine after 2 PM",explanation:"Population data suggests a 2 PM cutoff for optimal sleep",cause:{behavior:"caffeine_cutoff",threshold:"14:00",unit:"time",direction:"before"},outcome:{metric:"sleep_latency",effect:"-8 min average (population data)",direction:"positive"},certainty:.55,evidence:{personalDays:12,personalWeight:.18,populationWeight:.82,stability:.38},dataSources:["apple-watch"],comparison:{before:{value:18,label:"Late caffeine (population avg)"},after:{value:10,label:"Early cutoff (population avg)"}},whyNow:"This is a population-based recommendation while we learn your patterns.",showWork:"We don't have enough data yet to determine your personal caffeine threshold. Population research shows the average person should cut caffeine by 2 PM for optimal sleep. Your personal threshold may be earlier or laterâ€”we'll know more in 3-4 weeks."},{id:"emma-insight-004",personaId:"emma",category:"sleep",variableType:"outcome",title:"SCREEN TIME â†’ SLEEP ONSET",headline:"Evening screen exposure delays sleep onset",recommendation:"Reduce screens 1 hour before bed",explanation:"Blue light suppresses melatoninâ€”well established in research",causalParams:{source:"screen_time_before_bed_min",target:"sleep_latency_min",curveType:"linear",theta:{value:60,unit:"minutes",low:45,high:75,displayValue:"60 min before bed"},betaBelow:{value:-.15,unit:"min",description:"-0.15 min latency per min less screen"},betaAbove:{value:.2,unit:"min",description:"+0.2 min latency per min more screen"},observations:12,completePct:100,changepointProb:.88,sizeCategory:"medium",currentValue:45,currentStatus:"below_optimal"},cause:{behavior:"screen_time_before_bed",threshold:60,unit:"minutes",direction:"below"},outcome:{metric:"sleep_latency",effect:"-3 min per 15 min less screen time",direction:"positive"},certainty:.78,evidence:{personalDays:12,personalWeight:.25,populationWeight:.75,stability:.72},dataSources:["fitbit"],comparison:{before:{value:18,label:"With screens"},after:{value:11,label:"Screen-free hour"}},whyNow:"Your early data shows correlation with late screen use.",holdoutPreview:{metric:"sleep_latency",expectedChange:-5,unit:"min",horizon:"7 days"},showWork:"Blue light from screens suppresses melatonin productionâ€”this is one of the most robust findings in sleep research. Your 12 days of data shows 14-22 min sleep latency. Population research strongly supports a screen-free hour before bed for faster sleep onset.",actionable:!0,priority:1},{id:"emma-insight-005",personaId:"emma",category:"recovery",variableType:"outcome",title:"SLEEP DURATION â†’ NEXT DAY HRV",headline:"Sleep duration strongly predicts your recovery",recommendation:"Aim for 7-8 hours of sleep",explanation:"Each hour below 7 reduces next-day HRV by ~5ms",causalParams:{source:"sleep_duration_hours",target:"next_day_hrv_ms",curveType:"plateau_up",theta:{value:7,unit:"hours",low:6.5,high:7.5,displayValue:"7 hours"},betaBelow:{value:5,unit:"ms",description:"+5 ms HRV per hour more sleep"},betaAbove:{value:1,unit:"ms",description:"+1 ms per hour (diminishing)"},observations:12,completePct:100,changepointProb:.92,sizeCategory:"large",currentValue:6.5,currentStatus:"below_optimal"},cause:{behavior:"sleep_duration",threshold:7,unit:"hours",direction:"above"},outcome:{metric:"hrv",effect:"+5 ms per hour toward 7 hours",direction:"positive"},certainty:.82,evidence:{personalDays:12,personalWeight:.3,populationWeight:.7,stability:.78},dataSources:["fitbit"],comparison:{before:{value:35,label:"6 hours sleep"},after:{value:42,label:"7+ hours sleep"}},whyNow:"Your average sleep is 6.5 hoursâ€”below optimal for recovery.",holdoutPreview:{metric:"hrv",expectedChange:4,unit:"ms",horizon:"7 days"},showWork:"Sleep duration is one of the strongest predictors of HRV and recovery. Your 12 nights average 6.5 hours with HRV around 37ms. Population research shows 7+ hours optimizes recovery. This relationship is consistent across age groups and fitness levels.",actionable:!0,priority:1},{id:"emma-insight-006",personaId:"emma",category:"activity",variableType:"outcome",title:"MORNING MOVEMENT â†’ ENERGY LEVELS",headline:"Morning activity boosts all-day energy",recommendation:"Add 15-20 min morning walk or exercise",explanation:"Morning movement elevates cortisol and energy for hours",causalParams:{source:"morning_active_minutes",target:"daily_energy_score",curveType:"plateau_up",theta:{value:20,unit:"minutes",low:15,high:25,displayValue:"20 min"},betaBelow:{value:.15,unit:"pts",description:"+0.15 energy per min activity"},betaAbove:{value:.03,unit:"pts",description:"+0.03 per min (diminishing)"},observations:12,completePct:100,changepointProb:.85,sizeCategory:"medium",currentValue:8,currentStatus:"below_optimal"},cause:{behavior:"morning_activity",threshold:20,unit:"minutes",direction:"above"},outcome:{metric:"energy_score",effect:"+1.5 points with morning activity",direction:"positive"},certainty:.76,evidence:{personalDays:12,personalWeight:.28,populationWeight:.72,stability:.7},dataSources:["fitbit"],comparison:{before:{value:5.2,label:"No morning activity"},after:{value:6.7,label:"With morning activity"}},whyNow:"Your morning activity averages 8 minutesâ€”adding more could boost energy.",holdoutPreview:{metric:"energy_score",expectedChange:1,unit:"pts",horizon:"7 days"},showWork:"Morning exercise elevates cortisol at the optimal time, supporting natural circadian rhythms. Population research shows 15-20 minutes of morning movement significantly improves perceived energy. Your 3 mornings with activity showed higher energy ratings.",actionable:!0,priority:2}];function ei(){const t=[],a=new Date;a.setDate(a.getDate()-12);for(let s=0;s<12;s++){const r=new Date(a);r.setDate(r.getDate()+s);const i=r.toISOString().split("T")[0],n=22+Math.floor(Math.random()*3),o=r.getDay()===0||r.getDay()===6,u={date:i,sleepScore:Math.round(65+Math.random()*15),sleepDuration:Math.round(360+Math.random()*120),deepSleep:Math.round(40+Math.random()*20),remSleep:Math.round(70+Math.random()*25),lightSleep:Math.round(180+Math.random()*60),sleepLatency:Math.round(10+Math.random()*15),sleepEfficiency:.78+Math.random()*.12,bedtime:`${n}:${Math.floor(Math.random()*60).toString().padStart(2,"0")}`,wakeTime:`${7+Math.floor(Math.random()*2)}:${Math.floor(Math.random()*60).toString().padStart(2,"0")}`,hrv:Math.round(35+Math.random()*10),restingHr:Math.round(65+Math.random()*8),respiratoryRate:14+Math.random()*1.5,bodyTemp:Math.random()*.4-.2,steps:Math.round(4e3+Math.random()*6e3),activeCalories:Math.round(200+Math.random()*200),moderateMinutes:Math.round(15+Math.random()*25),vigorousMinutes:Math.round(5+Math.random()*15),zone2Minutes:Math.round(10+Math.random()*20),trainingLoad:Math.round(30+Math.random()*30),caffeineCutoff:`${12+Math.floor(Math.random()*6)}:${Math.floor(Math.random()*60).toString().padStart(2,"0")}`,alcoholUnits:o?Math.floor(Math.random()*3):0,eatingWindowStart:"08:00",eatingWindowEnd:"21:00",bedroomTemp:20+Math.random()*3,workoutTime:Math.random()>.5?`${17+Math.floor(Math.random()*4)}:${Math.floor(Math.random()*60).toString().padStart(2,"0")}`:null,workoutType:Math.random()>.5?["yoga","running","gym"][Math.floor(Math.random()*3)]:null,mood:Math.round(4+Math.random()*2),energy:Math.round(4+Math.random()*2),focus:Math.round(4+Math.random()*2),stress:Math.round(3+Math.random()*2)};t.push(u)}return t}const ti=ei(),ai=[],ss=[{id:"emma-protocol-sleep-foundation",personaId:"emma",name:"Sleep Foundation Protocol",description:"Build consistent sleep habits for better quality",category:"sleep",status:"suggested",outcome:"sleep_score",baseline:{value:71,unit:"score"},actions:[{id:"action-consistent-bedtime",label:"In bed by 10:30 PM",category:"sleep",isActive:!1,impact:6,actionType:"cutoff",time:"10:30 PM",linkedInsightId:"emma-insight-001"},{id:"action-caffeine-cutoff",label:"No caffeine after 2:00 PM",category:"sleep",isActive:!1,impact:3,actionType:"cutoff",time:"2:00 PM",linkedInsightId:"emma-insight-003"},{id:"action-screen-free",label:"Screen-free hour before bed",category:"sleep",isActive:!1,impact:5,actionType:"duration",linkedInsightId:"emma-insight-004"},{id:"action-sleep-7hrs",label:"7+ hours in bed",category:"sleep",isActive:!1,impact:7,actionType:"target",linkedInsightId:"emma-insight-005"}],states:[{id:"state-weekend",label:"Weekend",isActive:!1}],triggers:[{if:["state-weekend"],then:["action-consistent-bedtime"],reason:"Maintain consistent bedtime even on weekends"}],simulator:{deltas:{"action-consistent-bedtime":6,"action-caffeine-cutoff":3,"action-screen-free":5,"action-sleep-7hrs":7}},evidenceLevel:75,difficulty:2},{id:"emma-protocol-energy",personaId:"emma",name:"Daily Energy Protocol",description:"Boost energy through movement and recovery",category:"activity",status:"suggested",outcome:"energy_score",baseline:{value:5.2,unit:"score"},actions:[{id:"action-morning-movement",label:"20 min morning activity",category:"activity",isActive:!1,impact:1.5,actionType:"duration",linkedInsightId:"emma-insight-006"},{id:"action-8k-steps",label:"8,000+ steps daily",category:"activity",isActive:!1,impact:1.2,actionType:"target",linkedInsightId:"emma-insight-002"},{id:"action-sleep-quality",label:"7+ hours quality sleep",category:"sleep",isActive:!1,impact:.8,actionType:"target",linkedInsightId:"emma-insight-005"}],states:[],triggers:[],simulator:{deltas:{"action-morning-movement":1.5,"action-8k-steps":1.2,"action-sleep-quality":.8}},evidenceLevel:72,difficulty:2},{id:"emma-protocol-recovery",personaId:"emma",name:"HRV Improvement Protocol",description:"Improve heart rate variability through sleep optimization",category:"recovery",status:"suggested",outcome:"hrv",baseline:{value:38,unit:"ms"},actions:[{id:"action-sleep-duration",label:"7-8 hours sleep nightly",category:"sleep",isActive:!1,impact:5,actionType:"target",linkedInsightId:"emma-insight-005"},{id:"action-bedtime-consistency",label:"Consistent bedtime (within 30 min)",category:"sleep",isActive:!1,impact:4,actionType:"duration",linkedInsightId:"emma-insight-001"},{id:"action-morning-walk",label:"15-20 min morning walk",category:"activity",isActive:!1,impact:3,actionType:"duration",linkedInsightId:"emma-insight-006"}],states:[],triggers:[],simulator:{deltas:{"action-sleep-duration":5,"action-bedtime-consistency":4,"action-morning-walk":3}},evidenceLevel:78,difficulty:2}],si={personaId:"emma",date:new Date().toISOString().split("T")[0],greeting:"Good morning, Emma! We're still learning your patternsâ€”here are some science-backed suggestions.",priorities:{high:[{id:"plan-001",text:"Try going to bed at 10:30 PM tonight",explanation:"Bedtime consistency is one of the highest-impact sleep factors",evidenceWeight:"35% your data, 65% population research",status:"pending"}],moderate:[{id:"plan-002",text:"Aim for 8,000+ steps today",explanation:"Movement helps with energy and sleep quality",evidenceWeight:"28% your data, 72% population research",status:"pending"},{id:"plan-003",text:"Cut caffeine after 2 PM",explanation:"This is the population averageâ€”we'll find your threshold soon",evidenceWeight:"18% your data, 82% population research",status:"pending"}],maintain:[{id:"plan-004",text:"Keep wearing your Apple Watch to bed",explanation:"More data = more personalized insights in 2-3 weeks",evidenceWeight:"Data collection",status:"pending"}]},eveningCheckIn:{completed:[],pending:[],prediction:{sleepScore:73,deepSleep:48,sleepLatency:12,confidence:.55}}},Yt=[Ua,Za,Ka,ts],rs=[...Ga,...Qa,...Ja,...as],is=[...qa,...Xa,...es,...ss],ri={Ryan:{persona:Ua,insights:Ga,metrics:Fr,labs:zr,protocols:qa,dailyPlan:Yr},sarah:{persona:Za,insights:Qa,metrics:Gr,labs:qr,protocols:Xa,dailyPlan:Zr},marcus:{persona:Ka,insights:Ja,metrics:Xr,labs:Kr,protocols:es,dailyPlan:Jr},emma:{persona:ts,insights:as,metrics:ti,labs:ai,protocols:ss,dailyPlan:si}};Yt.map(t=>({id:t.id,name:t.name,archetype:t.archetype,avatar:t.avatar,tags:t.tags}));function Ut(){return Yt}function ns(t){return Yt.find(a=>a.id===t)}function os(t){return rs.filter(a=>a.personaId===t)}function ii(t){return is.filter(a=>a.personaId===t)}function Ue(t){return ri[t]?.metrics??[]}function Se(){const{activePersonaId:t,setActivePersona:a}=he(),s=x.useMemo(()=>Ut(),[]),r=x.useMemo(()=>ns(t)??null,[t]),i=x.useCallback(p=>{a(p)},[a]),n=x.useCallback(()=>{const f=(s.findIndex(v=>v.id===t)+1)%s.length;a(s[f].id)},[t,s,a]),o=x.useCallback(()=>{const p=s.findIndex(v=>v.id===t),f=p===0?s.length-1:p-1;a(s[f].id)},[t,s,a]),u=x.useCallback(()=>Ue(t),[t]),m=x.useCallback(p=>Ue(t).slice(-p),[t]),c=x.useCallback(()=>{const p=Ue(t);return p.length>0?p[p.length-1]:null},[t]),d=x.useCallback(()=>r?r.dataContext?.daysOfData??r.daysOfData:0,[r]),l=x.useCallback(()=>r?r.dataContext?.evidenceWeight??.7:0,[r]),h=x.useCallback(()=>r?(r.dataContext?.daysOfData??r.daysOfData)<14:!0,[r]);return{activePersona:r,activePersonaId:t,personas:s,setPersona:i,nextPersona:n,previousPersona:o,getMetrics:u,getRecentMetrics:m,getLatestMetric:c,getDaysOfData:d,getEvidenceWeight:l,isNewUser:h}}function ni(t,a){return t.filter(s=>s.certainty>=a)}function oi(t,a){return a.length===0?t:t.filter(s=>a.includes(s.category))}function li(t,a){return t.filter(s=>s.actionable)}function ci(t,a){return a.length===0?t:t.filter(s=>a.includes(s.status))}function di(t,a){return t.filter(s=>(s.priority||0)>=a)}function mi(t,a){return a.length===0?t:t.filter(s=>a.includes(s.variableType))}function ui(t,a){let s=[...t];if(a.minCertainty!==void 0&&(s=ni(s,a.minCertainty)),a.variableTypes&&a.variableTypes.length>0&&(s=mi(s,a.variableTypes)),a.categories&&a.categories.length>0&&(s=oi(s,a.categories)),a.actionableOnly&&(s=li(s)),a.statuses&&a.statuses.length>0&&(s=ci(s,a.statuses)),a.minPriority!==void 0&&(s=di(s,a.minPriority)),a.searchQuery){const r=a.searchQuery.toLowerCase();s=s.filter(i=>i.title.toLowerCase().includes(r)||i.summary?.toLowerCase().includes(r)||i.narrative?.toLowerCase().includes(r))}return s}function hi(t,a){return!a||a==="all"?t:t.filter(s=>s.category===a)}function pi(t,a){return t.filter(s=>s.status===a)}function xi(t,a){return t.filter(s=>(s.difficulty||1)<=a)}function gi(t,a){return t.filter(s=>(s.evidenceLevel||0)>=a)}function fi(t,a){let s=[...t];if(a.category&&(s=hi(s,a.category)),a.status&&(s=pi(s,a.status)),a.maxDifficulty!==void 0&&(s=xi(s,a.maxDifficulty)),a.minEvidence!==void 0&&(s=gi(s,a.minEvidence)),a.searchQuery){const r=a.searchQuery.toLowerCase();s=s.filter(i=>i.title?.toLowerCase().includes(r)||i.description?.toLowerCase().includes(r)||i.name.toLowerCase().includes(r))}return s}function bi(t,a,s="desc"){return[...t].sort((i,n)=>{let o=0;switch(a){case"certainty":o=i.certainty-n.certainty;break;case"priority":o=(i.priority||0)-(n.priority||0);break;case"date":o=new Date(i.discoveredAt??"").getTime()-new Date(n.discoveredAt??"").getTime();break;case"category":o=i.category.localeCompare(n.category);break}return s==="desc"?-o:o})}function yi(t,a,s="asc"){return[...t].sort((i,n)=>{let o=0;switch(a){case"difficulty":o=(i.difficulty||1)-(n.difficulty||1);break;case"evidence":o=(i.evidenceLevel||0)-(n.evidenceLevel||0);break;case"name":o=(i.title??i.name).localeCompare(n.title??n.name);break;case"category":o=(i.category??"").localeCompare(n.category??"");break}return s==="desc"?-o:o})}function oa(t){return t.reduce((a,s)=>{const r=s.category;return a[r]||(a[r]=[]),a[r].push(s),a},{})}function vi(t){return t.reduce((a,s)=>{const r=s.category;return a[r]||(a[r]=[]),a[r].push(s),a},{})}function Gt(t={}){const{activePersonaId:a}=he(),{certaintyThreshold:s}=ke(),r=t.initialMinCertainty??s/100,[i,n]=x.useState(r),[o,u]=x.useState(t.initialVariableTypes??[]),[m,c]=x.useState(t.initialCategories??[]),[d,l]=x.useState(!1),[h,p]=x.useState(""),[f,v]=x.useState(t.initialSort??"certainty"),[j,k]=x.useState(t.initialSortDirection??"desc"),N=x.useMemo(()=>os(a),[a]),b=x.useCallback(C=>{u(D=>D.includes(C)?D.filter(E=>E!==C):[...D,C])},[]),w=x.useCallback(C=>{c(D=>D.includes(C)?D.filter(E=>E!==C):[...D,C])},[]),y=x.useCallback(()=>{n(r),u([]),c([]),l(!1),p(""),v("certainty"),k("desc")},[r]),S=x.useMemo(()=>({minCertainty:i,variableTypes:o.length>0?o:void 0,categories:m.length>0?m:void 0,actionableOnly:d,searchQuery:h||void 0}),[i,o,m,d,h]),T=x.useMemo(()=>{const C=ui(N,S);return bi(C,f,j)},[N,S,f,j]),R=x.useMemo(()=>oa(T),[T]),$=x.useMemo(()=>{const C=oa(N);return Object.entries(C).map(([D,E])=>({category:D,count:E.length,avgCertainty:E.reduce((Z,Ce)=>Z+Ce.certainty,0)/E.length}))},[N]),A=x.useCallback(C=>N.find(D=>D.id===C),[N]);return{insights:T,allInsights:N,minCertainty:i,setMinCertainty:n,variableTypes:o,setVariableTypes:u,toggleVariableType:b,categories:m,setCategories:c,toggleCategory:w,actionableOnly:d,setActionableOnly:l,searchQuery:h,setSearchQuery:p,sortBy:f,setSortBy:v,sortDirection:j,setSortDirection:k,insightsByCategory:R,totalCount:N.length,filteredCount:T.length,categoryStats:$,resetFilters:y,getInsightById:A}}function ji(){const{activePersonaId:t}=he();return x.useMemo(()=>{const s=os(t),r=new Map;return s.forEach(i=>{const n=r.get(i.category)||{count:0,totalCertainty:0,highPriorityCount:0};r.set(i.category,{count:n.count+1,totalCertainty:n.totalCertainty+i.certainty,highPriorityCount:n.highPriorityCount+((i.priority||0)>=3?1:0)})}),Array.from(r.entries()).map(([i,n])=>({category:i,count:n.count,avgCertainty:n.totalCertainty/n.count,highPriorityCount:n.highPriorityCount}))},[t])}function ls(t={}){const{activePersonaId:a}=he(),[s,r]=x.useState(t.initialCategory??"all"),[i,n]=x.useState(t.initialStatus??null),[o,u]=x.useState(""),[m,c]=x.useState(5),[d,l]=x.useState(t.initialSort??"difficulty"),[h,p]=x.useState("asc"),f=x.useMemo(()=>ii(a),[a]),v=x.useCallback(()=>{r("all"),n(null),u(""),c(5),l("difficulty"),p("asc")},[]),j=x.useMemo(()=>({category:s!=="all"?s:void 0,status:i??void 0,searchQuery:o||void 0,maxDifficulty:m}),[s,i,o,m]),k=x.useMemo(()=>{const y=fi(f,j);return yi(y,d,h)},[f,j,d,h]),N=x.useMemo(()=>vi(k),[k]),b=x.useMemo(()=>({active:f.filter(y=>y.status==="active"),suggested:f.filter(y=>y.status==="suggested"),completed:f.filter(y=>y.status==="completed")}),[f]),w=x.useCallback(y=>f.find(S=>S.id===y),[f]);return{protocols:k,allProtocols:f,category:s,setCategory:r,status:i,setStatus:n,searchQuery:o,setSearchQuery:u,maxDifficulty:m,setMaxDifficulty:c,sortBy:d,setSortBy:l,sortDirection:h,setSortDirection:p,protocolsByCategory:N,protocolsByStatus:b,totalCount:f.length,filteredCount:k.length,activeCount:b.active.length,suggestedCount:b.suggested.length,resetFilters:v,getProtocolById:w}}function We(t){return new Promise(a=>setTimeout(a,t))}async function*wi(t){const a=t.reduce((r,i)=>r+i.duration,0);let s=0;for(const r of t){const n=r.duration/10;for(let o=0;o<10;o++)await We(n),s+=n,yield{progress:s/a*100,stage:r.name,isComplete:!1}}yield{progress:100,stage:"Complete",isComplete:!0}}const la=[{name:"Connecting to device...",duration:300},{name:"Authenticating...",duration:200},{name:"Fetching new data...",duration:600},{name:"Processing metrics...",duration:400},{name:"Updating insights...",duration:500},{name:"Finalizing...",duration:200}],ca={"caffeine-cutoff":[{intervention:"caffeine_cutoff",currentValue:16,proposedValue:14,unit:"hour"}],"exercise-timing":[{intervention:"exercise_time",currentValue:19,proposedValue:17,unit:"hour"}],"sleep-consistency":[{intervention:"bedtime_variance",currentValue:60,proposedValue:30,unit:"min"}],"alcohol-reduction":[{intervention:"alcohol_drinks",currentValue:2,proposedValue:0,unit:"drinks"}],"combined-sleep":[{intervention:"caffeine_cutoff",currentValue:16,proposedValue:14,unit:"hour"},{intervention:"screen_cutoff",currentValue:23,proposedValue:21.5,unit:"hour"},{intervention:"alcohol_drinks",currentValue:2,proposedValue:1,unit:"drinks"}]};function Ni(){const{activePersonaId:t}=he(),{addToast:a}=ke(),[s,r]=x.useState([{intervention:"caffeine_cutoff",currentValue:16,proposedValue:14,unit:"hour"}]),[i,n]=x.useState([]),[o,u]=x.useState(!1),[m,c]=x.useState(!1),d=x.useMemo(()=>ns(t),[t]),l=x.useMemo(()=>Ue(t),[t]),h=x.useMemo(()=>{if(i.length===0)return null;const w=i.reduce((S,T)=>S+T.change,0),y=i.reduce((S,T)=>S+T.certainty,0)/i.length;return{totalChange:w,interactions:i.length>1?["Stacking effects may compound"]:[],netCertainty:y}},[i]),p=x.useCallback((w,y)=>{r(S=>{const T=[...S];return T[w]={...T[w],...y},T}),c(!1)},[]),f=x.useCallback(w=>{r(y=>[...y,w]),c(!1)},[]),v=x.useCallback(w=>{r(y=>y.filter((S,T)=>T!==w)),c(!1)},[]),j=x.useCallback(()=>{r([]),n([]),c(!1)},[]),k=x.useCallback(async()=>{if(s.length===0){a({title:"Add at least one intervention to simulate",type:"error"});return}u(!0);try{await We(800);const w=[],y=l.slice(-7),S=y.length>0?y.reduce((R,$)=>R+$.sleepScore,0)/y.length:72,T=d?.dataContext?.evidenceWeight??.7;for(const R of s){const $=(R.proposedValue-R.currentValue)*T*.5,A=S+$;w.push({metric:R.intervention,baseline:S,projected:A,change:$,changePercent:$/S*100,certainty:.6+T*.2,timeToEffect:"3-7 days",confidenceInterval:{low:A-2,high:A+2}})}n(w),c(!0),a({title:"Simulation complete",type:"success"})}catch(w){a({title:"Simulation failed",type:"error"}),console.error("Simulation error:",w)}finally{u(!1)}},[s,l,d,a]),N=x.useCallback(()=>{n([]),c(!1)},[]),b=x.useCallback(w=>{const y=ca[w];y&&(r([...y]),n([]),c(!1))},[]);return{inputs:s,results:i,isSimulating:o,hasRun:m,combinedImpact:h,setInput:p,addInput:f,removeInput:v,clearInputs:j,runSimulation:k,resetSimulation:N,loadPreset:b,availablePresets:Object.keys(ca)}}const ki=[{id:"insights",name:"Insights as a Service",description:"Causal insights that show each user what drives their progress toward any health outcome.",pricePerUser:3,priceAtScale:1.5,scaleThreshold:2e3,isActive:!0,enabled:!0,features:["Certainty scoring","Causal chains","Personal thresholds"]},{id:"protocols",name:"Protocols as a Service",description:"Daily personalized lifestyle plans that adapt to each user's context and health goals.",pricePerUser:2,priceAtScale:1,scaleThreshold:2e3,isActive:!0,enabled:!0,features:["What-If simulator","Daily plans","Adaptive triggers"]},{id:"life-lens",name:"Monthly Life Lensâ„¢",description:"Your monthly health wrapped. Discover your archetype.",pricePerUser:1,priceAtScale:.5,scaleThreshold:2e3,isActive:!1,enabled:!1,features:["Archetype analysis","Monthly trends","Shareable reports"]},{id:"social",name:"Social Dashboard",description:"Anonymized and team-based cohort percentile comparisons & leaderboards.",pricePerUser:1,priceAtScale:.5,scaleThreshold:2e3,isActive:!1,enabled:!1,features:["Team comparisons","Leaderboards","Privacy controls"]},{id:"coach",name:"Coach Dashboard & Digest",description:"Complete session prep for coaches based on each client's causal profile.",pricePerUser:1,priceAtScale:.5,scaleThreshold:2e3,isActive:!0,enabled:!0,features:["Session prep","Client roster","Weekly digest"]}],Si=[{id:"oura",name:"Oura Ring",icon:"/assets/devices/oura.svg",metrics:["Sleep stages","HRV","Resting HR","Body temp","Activity"],dataTypes:["sleep","hrv","heart_rate","activity"]},{id:"fitbit",name:"Fitbit",icon:"/assets/devices/fitbit.svg",metrics:["Sleep stages","Heart rate","Steps","Active zone minutes"],dataTypes:["sleep","heart_rate","steps","activity"]},{id:"Vitals+-app",name:"Vitals+ App",icon:"/assets/devices/Vitals+.svg",metrics:["Diet logs","Supplements","Caffeine","Alcohol","Exercise timing"],dataTypes:["choices","lifestyle","nutrition"]},{id:"bloodwork",name:"Bloodwork",icon:"/assets/devices/bloodwork.svg",metrics:["Glucose","Lipids","Hormones","Inflammation","Vitamins"],dataTypes:["labs","biomarkers"]},{id:"weather",name:"Weather",icon:"/assets/devices/weather.svg",metrics:["Temperature","Humidity","Pressure","UV Index","Air Quality"],dataTypes:["environment","context"]}],cs=it((t,a)=>({modules:ki,devices:Si,userCount:350,pricing:{starter:1.5,growth:2.5,enterprise:"Custom"},toggleModule:s=>t(r=>({modules:r.modules.map(i=>i.id===s?{...i,isActive:!i.isActive,enabled:!i.enabled}:i)})),setUserCount:s=>t({userCount:s}),setModulePrice:(s,r)=>t(i=>({modules:i.modules.map(n=>n.id===s?{...n,pricePerUser:r}:n)})),updateDevice:(s,r)=>t(i=>({devices:i.devices.map(n=>n.id===s?{...n,...r}:n)})),getActiveModules:()=>a().modules.filter(s=>s.isActive),getTotalPrice:()=>{const{modules:s,userCount:r}=a();return s.filter(i=>i.isActive).reduce((i,n)=>{const o=r>=n.scaleThreshold?n.priceAtScale:n.pricePerUser;return i+o*r},0)},getPricePerUser:()=>{const{modules:s,userCount:r}=a();return s.filter(i=>i.isActive).reduce((i,n)=>{const o=r>=n.scaleThreshold?n.priceAtScale:n.pricePerUser;return i+o},0)}}));function qt(){const{syncStatus:t,setSyncStatus:a,chaosMode:s,addToast:r}=ke(),{devices:i}=cs(),[n,o]=x.useState(()=>i.map(b=>({deviceId:b.id,deviceName:b.name,status:"idle",lastSync:new Date(Date.now()-Math.random()*36e5),progress:null,error:null}))),[u,m]=x.useState(new Date),[c,d]=x.useState(null),l=x.useRef(new Set),h=n.some(b=>b.status==="syncing"),p=x.useCallback((b,w)=>{o(y=>y.map(S=>S.deviceId===b?{...S,...w}:S))},[]),f=x.useCallback(b=>n.find(w=>w.deviceId===b),[n]),v=x.useCallback(async b=>{const w=i.find(y=>y.id===b);if(w){l.current.delete(b),p(b,{status:"syncing",progress:{progress:0,stage:"Connecting...",isComplete:!1},error:null});try{const y=[...la];s&&Math.random()<.2&&y.push({name:"Retrying connection...",duration:1e3});let S=y.reduce((R,$)=>R+$.duration,0),T=0;for(const R of y){if(l.current.has(b)){p(b,{status:"idle",progress:null});return}if(s&&Math.random()<.1)throw new Error("Connection lost (chaos mode)");const $=5,A=R.duration/$;for(let C=0;C<$;C++)await We(A),T+=A,p(b,{progress:{progress:T/S*100,stage:R.name,isComplete:!1}})}p(b,{status:"success",lastSync:new Date,progress:{progress:100,stage:"Complete",isComplete:!0}}),await We(1500),p(b,{status:"idle",progress:null})}catch(y){p(b,{status:"error",error:y instanceof Error?y.message:"Sync failed",progress:null}),r({title:`Failed to sync ${w.name}`,type:"error"})}}},[i,s,p,r]),j=x.useCallback(b=>{l.current.add(b)},[]),k=x.useCallback(async()=>{a("syncing"),await Promise.all(i.map(b=>v(b.id))),m(new Date),a("idle"),r({title:"All devices synced successfully",type:"success"})},[i,v,a,r]),N=x.useCallback(async()=>{a("syncing");const b=wi(la);d(b);try{for await(const w of b)if(w.isComplete)break;m(new Date),a("idle"),r({title:"Sync completed",type:"success"})}catch{a("error"),r({title:"Sync failed",type:"error"})}finally{d(null)}},[a,r]);return{isSyncing:t==="syncing",isAnyDeviceSyncing:h,lastGlobalSync:u,deviceStates:n,getDeviceState:f,syncDevice:v,syncAllDevices:k,cancelSync:j,simulateSync:N,simulateSyncProgress:c}}function Ci(){const[t,a]=x.useState("Just now"),{deviceStates:s}=qt(),r=s.reduce((i,n)=>n.lastSync?i?n.lastSync>i?n.lastSync:i:n.lastSync:i,null);return x.useEffect(()=>{const i=()=>{if(!r){a("Never");return}const o=Date.now()-r.getTime(),u=Math.floor(o/6e4),m=Math.floor(u/60);u<1?a("Just now"):u<60?a(`${u}m ago`):m<24?a(`${m}h ago`):a("Over a day ago")};i();const n=setInterval(i,3e4);return()=>clearInterval(n)},[r]),t}const Mi={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>t*(2-t),easeInOutQuad:t=>t<.5?2*t*t:-1+(4-2*t)*t,easeOutCubic:t=>--t*t*t+1,easeInOutCubic:t=>t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1,easeOutElastic:t=>{const a=2*Math.PI/3;return t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*a)+1},easeOutBounce:t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375};function ds(t,a={}){const{duration:s=500,easing:r="easeOutCubic",delay:i=0,onComplete:n}=a,[o,u]=x.useState(t),m=x.useRef(),c=x.useRef(),d=x.useRef(t),l=typeof r=="function"?r:Mi[r];return x.useEffect(()=>{m.current&&cancelAnimationFrame(m.current);const h=d.current,p=t;if(h===p)return;const f=setTimeout(()=>{c.current=void 0;const v=j=>{c.current||(c.current=j);const k=j-c.current,N=Math.min(k/s,1),b=l(N),w=h+(p-h)*b;u(w),d.current=w,N<1?m.current=requestAnimationFrame(v):(u(p),d.current=p,n?.())};m.current=requestAnimationFrame(v)},i);return()=>{clearTimeout(f),m.current&&cancelAnimationFrame(m.current)}},[t,s,i,l,n]),o}const Ti={default:"bg-white border border-slate-200 shadow-sm",outlined:"bg-white border border-slate-200",elevated:"bg-white border border-slate-100 shadow-md",ghost:"bg-slate-50/50 border border-slate-100"},Pi={none:"",sm:"p-4",md:"p-5",lg:"p-6"},Di={cyan:"border-l-serif-cyan bg-gradient-to-r from-primary-50/30 to-transparent",pink:"border-l-serif-pink bg-gradient-to-r from-accent-50/30 to-transparent",lavender:"border-l-serif-lavender bg-gradient-to-r from-secondary-50/30 to-transparent",muted:"border-l-serif-blue bg-gradient-to-r from-muted-50/30 to-transparent",success:"border-l-emerald-400 bg-gradient-to-r from-emerald-50/30 to-transparent",warning:"border-l-amber-400 bg-gradient-to-r from-amber-50/30 to-transparent"},M=x.forwardRef(({className:t,variant:a="default",padding:s="md",interactive:r=!1,accent:i,accentLabel:n,children:o,...u},m)=>e.jsxs("div",{ref:m,className:g("rounded-xl",Ti[a],Pi[s],i&&"border-l-[3px]",i&&Di[i],r&&"cursor-pointer transition-all duration-200 hover:shadow-lg hover:border-slate-300",t),...u,children:[i&&n&&e.jsx("p",{className:"text-[10px] font-medium text-slate-500 uppercase tracking-wider mb-3",children:n}),o]}));M.displayName="Card";const _i=x.forwardRef(({className:t,title:a,subtitle:s,action:r,children:i,...n},o)=>e.jsxs("div",{ref:o,className:g("flex items-start justify-between mb-4",t),...n,children:[a||s?e.jsxs("div",{children:[a&&e.jsx("h3",{className:"text-base font-semibold text-slate-800 tracking-tight",children:a}),s&&e.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:s})]}):i,r&&e.jsx("div",{className:"ml-4 flex-shrink-0",children:r})]}));_i.displayName="CardHeader";const Ri=x.forwardRef(({className:t,children:a,...s},r)=>e.jsx("div",{ref:r,className:g("",t),...s,children:a}));Ri.displayName="CardContent";const Ii=x.forwardRef(({className:t,children:a,...s},r)=>e.jsx("div",{ref:r,className:g("mt-4 pt-4 border-t border-slate-100 flex items-center justify-between",t),...s,children:a}));Ii.displayName="CardFooter";const Ai=x.forwardRef(({label:t,value:a,unit:s,trend:r,trendValue:i,icon:n,className:o,...u},m)=>{const c={up:"text-emerald-600 bg-emerald-50",down:"text-rose-600 bg-rose-50",stable:"text-slate-600 bg-slate-50"},d={up:"↑",down:"↓",stable:"→"};return e.jsx(M,{ref:m,className:g("",o),...u,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] font-medium text-slate-500 uppercase tracking-wider",children:t}),e.jsxs("div",{className:"flex items-baseline mt-2",children:[e.jsx("span",{className:"text-2xl font-semibold text-slate-800",children:a}),s&&e.jsx("span",{className:"ml-1.5 text-sm text-slate-400",children:s})]}),r&&i&&e.jsxs("p",{className:g("inline-flex items-center text-xs font-medium mt-2 px-2 py-0.5 rounded-full",c[r]),children:[d[r]," ",i]})]}),n&&e.jsx("div",{className:"p-2.5 bg-primary-50 text-primary-500 rounded-lg",children:n})]})})});Ai.displayName="MetricCard";const ms={primary:"bg-primary-500 text-white border border-primary-500 hover:bg-primary-600 hover:border-primary-600 active:bg-primary-700 disabled:bg-slate-200 disabled:border-slate-200 disabled:text-slate-400 shadow-sm hover:shadow",secondary:"bg-white text-slate-700 border border-slate-200 hover:bg-slate-50 hover:border-slate-300 active:bg-slate-100 disabled:bg-slate-50 disabled:text-slate-400 disabled:border-slate-200 shadow-sm",outline:"bg-transparent text-primary-600 border border-primary-200 hover:bg-primary-50 hover:border-primary-300 active:bg-primary-100 disabled:text-slate-400 disabled:border-slate-200",ghost:"bg-transparent text-slate-600 border border-transparent hover:bg-slate-50 hover:text-slate-800 active:bg-slate-100 disabled:text-slate-400",danger:"bg-rose-500 text-white border border-rose-500 hover:bg-rose-600 hover:border-rose-600 active:bg-rose-700 disabled:bg-rose-200 disabled:border-rose-200 shadow-sm",success:"bg-emerald-500 text-white border border-emerald-500 hover:bg-emerald-600 hover:border-emerald-600 active:bg-emerald-700 disabled:bg-emerald-200 disabled:border-emerald-200 shadow-sm"},Li={xs:"px-2.5 py-1 text-xs",sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},Ae={xs:"w-3 h-3",sm:"w-3.5 h-3.5",md:"w-4 h-4",lg:"w-5 h-5"},L=x.forwardRef(({className:t,variant:a="primary",size:s="md",loading:r=!1,leftIcon:i,rightIcon:n,fullWidth:o=!1,disabled:u,children:m,...c},d)=>{const l=u||r;return e.jsxs("button",{ref:d,className:g("inline-flex items-center justify-center","font-medium","rounded-lg","transition-all duration-200",ne,ms[a],Li[s],o&&"w-full",l&&"cursor-not-allowed",t),disabled:l,...c,children:[r?e.jsx(Ea,{className:g("animate-spin",Ae[s],m&&"mr-2")}):i&&e.jsx("span",{className:g(Ae[s],"mr-2"),children:i}),m,!r&&n&&e.jsx("span",{className:g(Ae[s],"ml-2"),children:n})]})});L.displayName="Button";const Ei={xs:"p-1",sm:"p-1.5",md:"p-2",lg:"p-2.5"},$i=x.forwardRef(({className:t,variant:a="ghost",size:s="md",loading:r=!1,icon:i,disabled:n,...o},u)=>{const m=n||r;return e.jsx("button",{ref:u,className:g("inline-flex items-center justify-center","rounded-lg","transition-all duration-200",ne,ms[a],Ei[s],m&&"cursor-not-allowed",t),disabled:m,...o,children:r?e.jsx(Ea,{className:g("animate-spin",Ae[s])}):e.jsx("span",{className:Ae[s],children:i})})});$i.displayName="IconButton";const Wi=x.forwardRef(({className:t,attached:a=!1,children:s,...r},i)=>e.jsx("div",{ref:i,className:g("inline-flex",a&&"[&>button]:rounded-none [&>button:first-child]:rounded-l-lg [&>button:last-child]:rounded-r-lg [&>button:not(:last-child)]:border-r-0",!a&&"gap-2",t),...r,children:s}));Wi.displayName="ButtonGroup";const Oi={sm:{track:"w-8 h-4",thumb:"w-3 h-3",translate:"translate-x-4"},md:{track:"w-11 h-6",thumb:"w-5 h-5",translate:"translate-x-5"},lg:{track:"w-14 h-7",thumb:"w-6 h-6",translate:"translate-x-7"}},ae=x.forwardRef(({className:t,label:a,description:s,size:r="md",checked:i,onChange:n,onToggle:o,disabled:u,id:m,...c},d)=>{const l=p=>{n?.(p),o?.(p.target.checked)},h=Oi[r];return e.jsxs("label",{htmlFor:m,className:g("inline-flex items-center gap-3",u?"cursor-not-allowed opacity-50":"cursor-pointer",t),children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:d,type:"checkbox",id:m,checked:i,onChange:l,disabled:u,className:"sr-only peer",...c}),e.jsx("div",{className:g("rounded-full bg-gray-200",q.colors,"peer-checked:bg-primary-600","peer-disabled:bg-gray-100",ne,"peer-focus-visible:ring-2 peer-focus-visible:ring-primary-500 peer-focus-visible:ring-offset-2",h.track)}),e.jsx("div",{className:g("absolute top-0.5 left-0.5 bg-white rounded-full shadow",q.transform,"peer-checked:"+h.translate,h.thumb)})]}),(a||s)&&e.jsxs("div",{className:"flex flex-col",children:[a&&e.jsx("span",{className:g("font-medium text-gray-900",r==="sm"?"text-sm":"text-base"),children:a}),s&&e.jsx("span",{className:"text-sm text-gray-500",children:s})]})]})});ae.displayName="Toggle";const us={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},Vi=x.forwardRef(({className:t,label:a,description:s,size:r="md",indeterminate:i,disabled:n,id:o,...u},m)=>e.jsxs("label",{htmlFor:o,className:g("inline-flex items-start gap-3",n?"cursor-not-allowed opacity-50":"cursor-pointer",t),children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("input",{ref:m,type:"checkbox",id:o,disabled:n,className:g("appearance-none rounded border-2 border-gray-300","checked:bg-primary-600 checked:border-primary-600","indeterminate:bg-primary-600 indeterminate:border-primary-600",q.colors,ne,us[r]),...u}),e.jsx("svg",{className:g("absolute pointer-events-none text-white","opacity-0","[input:checked~&]:opacity-100",r==="sm"?"w-3 h-3":r==="md"?"w-3.5 h-3.5":"w-4 h-4"),viewBox:"0 0 16 16",fill:"none",children:e.jsx("path",{d:"M4 8L7 11L12 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),(a||s)&&e.jsxs("div",{className:"flex flex-col",children:[a&&e.jsx("span",{className:g("font-medium text-gray-900",r==="sm"?"text-sm":"text-base"),children:a}),s&&e.jsx("span",{className:"text-sm text-gray-500",children:s})]})]}));Vi.displayName="Checkbox";const Bi=x.forwardRef(({className:t,label:a,size:s="md",disabled:r,id:i,...n},o)=>e.jsxs("label",{htmlFor:i,className:g("inline-flex items-center gap-3",r?"cursor-not-allowed opacity-50":"cursor-pointer",t),children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("input",{ref:o,type:"radio",id:i,disabled:r,className:g("appearance-none rounded-full border-2 border-gray-300","checked:border-primary-600",q.colors,ne,us[s]),...n}),e.jsx("div",{className:g("absolute rounded-full bg-primary-600","scale-0 [input:checked~&]:scale-100",q.transform,s==="sm"?"w-2 h-2":s==="md"?"w-2.5 h-2.5":"w-3 h-3")})]}),a&&e.jsx("span",{className:g("font-medium text-gray-900",s==="sm"?"text-sm":"text-base"),children:a})]}));Bi.displayName="Radio";const Hi=x.forwardRef(({className:t,name:a,value:s,onValueChange:r,orientation:i="vertical",children:n,...o},u)=>e.jsx("div",{ref:u,role:"radiogroup",className:g("flex",i==="vertical"?"flex-col gap-2":"flex-row gap-4",t),...o,children:n}));Hi.displayName="RadioGroup";const hs={sm:"h-1",md:"h-2",lg:"h-3"},ps={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"},dt=x.forwardRef(({className:t,value:a,min:s=0,max:r=100,step:i=1,disabled:n=!1,showValue:o=!1,showLabels:u=!1,minLabel:m,maxLabel:c,formatValue:d=k=>String(k),onChange:l,onChangeEnd:h,size:p="md",variant:f="default",...v},j)=>{const k=x.useRef(null),[N,b]=x.useState(!1),w=(a-s)/(r-s)*100,y=x.useCallback(A=>{if(!k.current)return a;const C=k.current.getBoundingClientRect(),D=Math.max(0,Math.min(1,(A-C.left)/C.width)),E=s+D*(r-s),Z=Math.round(E/i)*i;return Math.max(s,Math.min(r,Z))},[s,r,i,a]),S=x.useCallback(A=>{if(n)return;A.preventDefault(),b(!0);const C=y(A.clientX);l?.(C)},[n,y,l]),T=x.useCallback(A=>{if(n)return;b(!0);const C=A.touches[0],D=y(C.clientX);l?.(D)},[n,y,l]);x.useEffect(()=>{if(!N)return;const A=E=>{const Z=y(E.clientX);l?.(Z)},C=E=>{const Z=E.touches[0],Ce=y(Z.clientX);l?.(Ce)},D=()=>{b(!1),h?.(a)};return document.addEventListener("mousemove",A),document.addEventListener("mouseup",D),document.addEventListener("touchmove",C),document.addEventListener("touchend",D),()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",D),document.removeEventListener("touchmove",C),document.removeEventListener("touchend",D)}},[N,y,l,h,a]);const R=x.useCallback(A=>{if(n)return;let C=a;switch(A.key){case"ArrowLeft":case"ArrowDown":C=Math.max(s,a-i);break;case"ArrowRight":case"ArrowUp":C=Math.min(r,a+i);break;case"Home":C=s;break;case"End":C=r;break;default:return}A.preventDefault(),l?.(C),h?.(C)},[n,a,s,r,i,l,h]);return e.jsxs("div",{ref:j,className:g("w-full",t),...v,children:[u&&e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[e.jsx("span",{children:m??s}),o&&e.jsx("span",{className:"font-medium text-gray-900",children:d(a)}),e.jsx("span",{children:c??r})]}),!u&&o&&e.jsx("div",{className:"text-center text-sm font-medium text-gray-900 mb-2",children:d(a)}),e.jsxs("div",{ref:k,className:g("relative w-full rounded-full cursor-pointer",f==="certainty"?"bg-gradient-to-r from-gray-300 via-amber-400 to-green-500":"bg-gray-200",hs[p],n&&"opacity-50 cursor-not-allowed"),onMouseDown:S,onTouchStart:T,children:[f==="default"&&e.jsx("div",{className:g("absolute top-0 left-0 h-full rounded-full bg-primary-600",q.fast),style:{width:`${w}%`}}),e.jsx("div",{className:g("absolute top-1/2 -translate-y-1/2 -translate-x-1/2","rounded-full bg-white border-2 border-primary-600 shadow",q.fast,ne,ps[p],N&&"scale-110",n&&"border-gray-400"),style:{left:`${w}%`},role:"slider",tabIndex:n?-1:0,"aria-valuemin":s,"aria-valuemax":r,"aria-valuenow":a,"aria-disabled":n,onKeyDown:R})]})]})});dt.displayName="Slider";const Zt=x.forwardRef(({showCertaintyLabel:t=!0,formatValue:a,...s},r)=>{const i=o=>o>=85?"Very High":o>=70?"High":o>=50?"Moderate":o>=30?"Low":"Exploratory",n=o=>t?`${o}% (${i(o)})`:`${o}%`;return e.jsxs("div",{ref:r,children:[e.jsx(dt,{min:0,max:100,step:5,variant:"certainty",showValue:!0,formatValue:a??n,...s}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[e.jsx("span",{children:"More insights"}),e.jsx("span",{children:"Higher confidence"})]})]})});Zt.displayName="CertaintySlider";const Fi=x.forwardRef(({className:t,value:a,min:s=0,max:r=100,step:i=1,disabled:n=!1,showLabels:o=!1,formatValue:u=p=>String(p),onChange:m,onChangeEnd:c,size:d="md",...l},h)=>{const p=x.useRef(null),[f,v]=x.useState(null),j=a.map(b=>(b-s)/(r-s)*100),k=x.useCallback(b=>{if(!p.current)return a[0];const w=p.current.getBoundingClientRect(),y=Math.max(0,Math.min(1,(b-w.left)/w.width)),S=s+y*(r-s);return Math.round(S/i)*i},[s,r,i,a]),N=x.useCallback(b=>{if(n)return;const w=k(b.clientX),y=Math.abs(w-a[0]),S=Math.abs(w-a[1]),T=y<S?[w,a[1]]:[a[0],w];m?.(T)},[n,k,a,m]);return x.useEffect(()=>{if(f===null)return;const b=y=>{const S=k(y.clientX),T=f===0?[Math.min(S,a[1]-i),a[1]]:[a[0],Math.max(S,a[0]+i)];m?.(T)},w=()=>{v(null),c?.(a)};return document.addEventListener("mousemove",b),document.addEventListener("mouseup",w),()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",w)}},[f,k,m,c,a,i]),e.jsxs("div",{ref:h,className:g("w-full",t),...l,children:[o&&e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[e.jsx("span",{children:u(a[0])}),e.jsx("span",{children:u(a[1])})]}),e.jsxs("div",{ref:p,className:g("relative w-full rounded-full bg-gray-200 cursor-pointer",hs[d],n&&"opacity-50 cursor-not-allowed"),onClick:N,children:[e.jsx("div",{className:"absolute top-0 h-full rounded-full bg-primary-600",style:{left:`${j[0]}%`,width:`${j[1]-j[0]}%`}}),[0,1].map(b=>e.jsx("div",{className:g("absolute top-1/2 -translate-y-1/2 -translate-x-1/2","rounded-full bg-white border-2 border-primary-600 shadow cursor-grab",q.fast,ps[d],f===b&&"scale-110 cursor-grabbing"),style:{left:`${j[b]}%`},onMouseDown:w=>{w.stopPropagation(),n||v(b)}},b))]})]})});Fi.displayName="RangeSlider";const zi={default:"bg-slate-100 text-slate-600 border border-slate-200",primary:"bg-primary-50 text-primary-600 border border-primary-100",success:"bg-emerald-50 text-emerald-600 border border-emerald-100",warning:"bg-amber-50 text-amber-600 border border-amber-100",danger:"bg-rose-50 text-rose-600 border border-rose-100",info:"bg-sky-50 text-sky-600 border border-sky-100",outline:"bg-transparent border border-slate-300 text-slate-600"},Ve={sm:"px-2 py-0.5 text-[10px]",md:"px-2.5 py-1 text-xs",lg:"px-3 py-1.5 text-sm"},Yi={default:"bg-slate-400",primary:"bg-primary-500",success:"bg-emerald-500",warning:"bg-amber-500",danger:"bg-rose-500",info:"bg-sky-500",outline:"bg-slate-400"},_=x.forwardRef(({className:t,variant:a="default",size:s="md",dot:r=!1,removable:i=!1,onRemove:n,children:o,...u},m)=>e.jsxs("span",{ref:m,className:g("inline-flex items-center font-medium","rounded-full",zi[a],Ve[s],t),...u,children:[r&&e.jsx("span",{className:g("w-1.5 h-1.5 rounded-full mr-1.5",Yi[a])}),o,i&&e.jsx("button",{type:"button",onClick:c=>{c.stopPropagation(),n?.()},className:"ml-1.5 -mr-0.5 p-0.5 hover:bg-slate-200/50 rounded-full transition-colors",children:e.jsx(oe,{className:"w-3 h-3"})})]}));_.displayName="Badge";const da={sleep:"bg-secondary-50 text-secondary-600 border border-secondary-100",metabolic:"bg-accent-50 text-accent-600 border border-accent-100",recovery:"bg-primary-50 text-primary-600 border border-primary-100",cognitive:"bg-secondary-100 text-secondary-700 border border-secondary-200",activity:"bg-primary-100 text-primary-700 border border-primary-200",stress:"bg-accent-100 text-accent-700 border border-accent-200",nutrition:"bg-primary-50 text-primary-600 border border-primary-100",cardio:"bg-accent-50 text-accent-600 border border-accent-100",mood:"bg-muted-50 text-muted-600 border border-muted-100"},St=x.forwardRef(({category:t,className:a,size:s="sm",children:r,...i},n)=>e.jsx("span",{ref:n,className:g("inline-flex items-center font-medium capitalize","rounded-full",da[t]||da.sleep,Ve[s],a),...i,children:r??t}));St.displayName="CategoryBadge";const Ui={active:{color:"bg-emerald-50 text-emerald-600 border border-emerald-100",dot:!0},inactive:{color:"bg-slate-50 text-slate-500 border border-slate-200",dot:!1},pending:{color:"bg-amber-50 text-amber-600 border border-amber-100",dot:!0},completed:{color:"bg-primary-50 text-primary-600 border border-primary-100",dot:!1},suggested:{color:"bg-secondary-50 text-secondary-600 border border-secondary-100",dot:!0},paused:{color:"bg-slate-100 text-slate-500 border border-slate-200",dot:!0}},Gi={active:"bg-emerald-500",inactive:"bg-slate-400",pending:"bg-amber-500 animate-pulse",completed:"bg-primary-500",suggested:"bg-secondary-500",paused:"bg-slate-400"},Ct=x.forwardRef(({status:t,className:a,size:s="sm",children:r,...i},n)=>{const o=Ui[t];return e.jsxs("span",{ref:n,className:g("inline-flex items-center font-medium capitalize","rounded-full",o.color,Ve[s],a),...i,children:[o.dot&&e.jsx("span",{className:g("w-1.5 h-1.5 rounded-full mr-1.5",Gi[t])}),r??t]})});Ct.displayName="StatusBadge";const xs=x.forwardRef(({certainty:t,className:a,size:s="sm",...r},i)=>{const n=t>1?t:t*100;let o="bg-slate-50 text-slate-500 border border-slate-200",u="";return n>=85?(o="bg-emerald-50 text-emerald-600 border border-emerald-100",u="Very High"):n>=70?(o="bg-primary-50 text-primary-600 border border-primary-100",u="High"):n>=50?(o="bg-sky-50 text-sky-600 border border-sky-100",u="Moderate"):n>=30?(o="bg-amber-50 text-amber-600 border border-amber-100",u="Low"):(o="bg-slate-50 text-slate-500 border border-slate-200",u="Exploratory"),e.jsxs("span",{ref:i,className:g("inline-flex items-center font-medium","rounded-full",o,Ve[s],a),...r,children:[Math.round(n),"% ",u]})});xs.displayName="CertaintyBadge";const qi=x.forwardRef(({trend:t,value:a,goodDirection:s="up",className:r,size:i="sm",...n},o)=>{const u=t===s||s==="stable"&&t==="stable";let m="bg-slate-50 text-slate-500 border border-slate-200";u?m="bg-emerald-50 text-emerald-600 border border-emerald-100":t!=="stable"&&(m="bg-rose-50 text-rose-600 border border-rose-100");const c={up:"↑",down:"↓",stable:"→"};return e.jsxs("span",{ref:o,className:g("inline-flex items-center font-medium","rounded-full",m,Ve[i],r),...n,children:[c[t],a&&e.jsx("span",{className:"ml-1",children:a})]})});qi.displayName="TrendBadge";const mt=x.forwardRef(({content:t,children:a,position:s="top",delay:r=200,disabled:i=!1,className:n,maxWidth:o=200},u)=>{const[m,c]=x.useState(!1),[d,l]=x.useState({top:0,left:0}),h=x.useRef(null),p=x.useRef(null),f=x.useRef(),v=x.useCallback(()=>{if(!h.current||!p.current)return;const b=h.current.getBoundingClientRect(),w=p.current.getBoundingClientRect(),y=window.scrollY,S=window.scrollX;let T=0,R=0;const $=8;switch(s){case"top":T=b.top+y-w.height-$,R=b.left+S+b.width/2-w.width/2;break;case"bottom":T=b.bottom+y+$,R=b.left+S+b.width/2-w.width/2;break;case"left":T=b.top+y+b.height/2-w.height/2,R=b.left+S-w.width-$;break;case"right":T=b.top+y+b.height/2-w.height/2,R=b.right+S+$;break}const A=8;R=Math.max(A,Math.min(R,window.innerWidth-w.width-A)),T=Math.max(A,Math.min(T,window.innerHeight+y-w.height-A)),l({top:T,left:R})},[s]),j=x.useCallback(()=>{i||(f.current=setTimeout(()=>{c(!0)},r))},[i,r]),k=x.useCallback(()=>{f.current&&clearTimeout(f.current),c(!1)},[]);x.useEffect(()=>{m&&requestAnimationFrame(v)},[m,v]),x.useEffect(()=>()=>{f.current&&clearTimeout(f.current)},[]);const N={top:"bottom-0 left-1/2 -translate-x-1/2 translate-y-full border-t-gray-900 border-x-transparent border-b-transparent",bottom:"top-0 left-1/2 -translate-x-1/2 -translate-y-full border-b-gray-900 border-x-transparent border-t-transparent",left:"right-0 top-1/2 -translate-y-1/2 translate-x-full border-l-gray-900 border-y-transparent border-r-transparent",right:"left-0 top-1/2 -translate-y-1/2 -translate-x-full border-r-gray-900 border-y-transparent border-l-transparent"};return e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:h,onMouseEnter:j,onMouseLeave:k,onFocus:j,onBlur:k,className:"inline-block",children:a}),m&&Oe.createPortal(e.jsxs("div",{ref:p,className:g("fixed z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg",q.fast,"animate-in fade-in-0 zoom-in-95",n),style:{top:d.top,left:d.left,maxWidth:o},role:"tooltip",children:[t,e.jsx("span",{className:g("absolute w-0 h-0 border-4",N[s])})]}),document.body)]})});mt.displayName="Tooltip";const Ge=x.forwardRef(({content:t,iconSize:a=16,...s},r)=>e.jsx(mt,{content:t,...s,children:e.jsx("button",{type:"button",className:"inline-flex items-center justify-center text-gray-400 hover:text-gray-600 transition-colors",children:e.jsxs("svg",{width:a,height:a,viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("circle",{cx:"8",cy:"8",r:"6.5"}),e.jsx("path",{d:"M8 11V8M8 5.5V5",strokeLinecap:"round"})]})})}));Ge.displayName="InfoTooltip";const Zi=x.forwardRef(({trigger:t,content:a,position:s="bottom",isOpen:r,onOpenChange:i,className:n},o)=>{const[u,m]=x.useState(!1),c=r!==void 0?r:u,d=x.useRef(null),l=x.useRef(null),[h,p]=x.useState({top:0,left:0}),f=x.useCallback(j=>{i?i(j):m(j)},[i]),v=x.useCallback(()=>{if(!d.current||!l.current)return;const j=d.current.getBoundingClientRect(),k=l.current.getBoundingClientRect(),N=window.scrollY,b=window.scrollX;let w=0,y=0;const S=8;switch(s){case"top":w=j.top+N-k.height-S,y=j.left+b+j.width/2-k.width/2;break;case"bottom":w=j.bottom+N+S,y=j.left+b+j.width/2-k.width/2;break;case"left":w=j.top+N+j.height/2-k.height/2,y=j.left+b-k.width-S;break;case"right":w=j.top+N+j.height/2-k.height/2,y=j.right+b+S;break}p({top:w,left:y})},[s]);return x.useEffect(()=>{c&&requestAnimationFrame(v)},[c,v]),x.useEffect(()=>{if(!c)return;const j=k=>{d.current&&!d.current.contains(k.target)&&l.current&&!l.current.contains(k.target)&&f(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[c,f]),x.useEffect(()=>{if(!c)return;const j=k=>{k.key==="Escape"&&f(!1)};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[c,f]),e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:d,onClick:()=>f(!c),className:"inline-block",children:t}),c&&Oe.createPortal(e.jsx("div",{ref:l,className:g("fixed z-50 bg-white rounded-lg shadow-lg border border-gray-200",q.fast,"animate-in fade-in-0 zoom-in-95",n),style:{top:h.top,left:h.left},children:a}),document.body)]})});Zi.displayName="Popover";const Qi={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",full:"max-w-4xl"},gs=x.forwardRef(({isOpen:t,onClose:a,title:s,description:r,children:i,size:n="md",closeOnOverlayClick:o=!0,closeOnEscape:u=!0,showCloseButton:m=!0,className:c,overlayClassName:d},l)=>{const h=x.useRef(null),p=x.useRef(null);x.useEffect(()=>{if(!t||!u)return;const v=j=>{j.key==="Escape"&&a()};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[t,u,a]),x.useEffect(()=>{t?(p.current=document.activeElement,h.current?.focus()):p.current&&p.current.focus()},[t]),x.useEffect(()=>{if(t){const v=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=v}}},[t]);const f=x.useCallback(v=>{o&&v.target===v.currentTarget&&a()},[o,a]);return Oe.createPortal(e.jsx(Y,{children:t&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:g("absolute inset-0 bg-black/50",d),onClick:f}),e.jsxs(P.div,{ref:h,initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{duration:.2,ease:"easeOut"},className:g("relative w-full mx-4 bg-white rounded-xl shadow-xl","max-h-[90vh] overflow-hidden flex flex-col",ne,Qi[n],c),tabIndex:-1,role:"dialog","aria-modal":"true","aria-labelledby":s?"modal-title":void 0,"aria-describedby":r?"modal-description":void 0,children:[(s||m)&&e.jsxs("div",{className:"flex items-start justify-between px-6 pt-6 pb-4",children:[e.jsxs("div",{children:[s&&e.jsx("h2",{id:"modal-title",className:"text-lg font-semibold text-gray-900",children:s}),r&&e.jsx("p",{id:"modal-description",className:"mt-1 text-sm text-gray-500",children:r})]}),m&&e.jsxs("button",{type:"button",onClick:a,className:g("p-1 -mr-1 text-gray-400 hover:text-gray-600 rounded-lg transition-colors",ne),children:[e.jsx(oe,{className:"w-5 h-5"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]}),e.jsx("div",{className:"flex-1 overflow-auto px-6 pb-6",children:i})]})]})}),document.body)});gs.displayName="Modal";const fs=x.forwardRef(({className:t,children:a,...s},r)=>e.jsx("div",{ref:r,className:g("flex items-center justify-end gap-3 pt-4 mt-4 border-t border-gray-100",t),...s,children:a}));fs.displayName="ModalFooter";const Xi=x.forwardRef(({message:t,confirmLabel:a="Confirm",cancelLabel:s="Cancel",confirmVariant:r="primary",onConfirm:i,onClose:n,isLoading:o=!1,...u},m)=>{const c=r==="danger"?"bg-red-600 text-white hover:bg-red-700":"bg-primary-600 text-white hover:bg-primary-700";return e.jsxs(gs,{ref:m,size:"sm",onClose:n,...u,children:[e.jsx("p",{className:"text-gray-600",children:t}),e.jsxs(fs,{children:[e.jsx("button",{type:"button",onClick:n,disabled:o,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:s}),e.jsx("button",{type:"button",onClick:i,disabled:o,className:g("px-4 py-2 text-sm font-medium rounded-lg transition-colors disabled:opacity-50",c),children:o?"Loading...":a})]})]})});Xi.displayName="ConfirmModal";const Ki=x.forwardRef(({isOpen:t,onClose:a,title:s,children:r,position:i="right",width:n="400px",closeOnOverlayClick:o=!0,closeOnEscape:u=!0,showCloseButton:m=!0,className:c,overlayClassName:d},l)=>{x.useEffect(()=>{if(!t||!u)return;const f=v=>{v.key==="Escape"&&a()};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[t,u,a]),x.useEffect(()=>{if(t){const f=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=f}}},[t]);const h=x.useCallback(f=>{o&&f.target===f.currentTarget&&a()},[o,a]),p=i==="left"?{x:"-100%"}:{x:"100%"};return Oe.createPortal(e.jsx(Y,{children:t&&e.jsxs("div",{className:"fixed inset-0 z-50",children:[e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:g("absolute inset-0 bg-black/50",d),onClick:h}),e.jsxs(P.div,{ref:l,initial:p,animate:{x:0},exit:p,transition:{duration:.3,ease:"easeOut"},className:g("absolute top-0 h-full bg-white shadow-xl flex flex-col",i==="left"?"left-0":"right-0",c),style:{width:n},children:[(s||m)&&e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[s&&e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:s}),m&&e.jsx("button",{type:"button",onClick:a,className:"p-1 text-gray-400 hover:text-gray-600 rounded-lg transition-colors",children:e.jsx(oe,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-auto p-6",children:r})]})]})}),document.body)});Ki.displayName="Drawer";const bs=x.createContext(null);function Qt(){const t=x.useContext(bs);if(!t)throw new Error("Tab components must be used within a Tabs component");return t}const Ji=x.forwardRef(({className:t,value:a,defaultValue:s,onValueChange:r,variant:i="default",children:n,...o},u)=>{const[m,c]=x.useState(s??""),d=a!==void 0?a:m,l=x.useCallback(h=>{a===void 0&&c(h),r?.(h)},[a,r]);return e.jsx(bs.Provider,{value:{activeTab:d,setActiveTab:l,variant:i},children:e.jsx("div",{ref:u,className:g("",t),...o,children:n})})});Ji.displayName="Tabs";const en=x.forwardRef(({className:t,children:a,...s},r)=>{const{variant:i}=Qt(),n={default:"border-b border-gray-200",pills:"bg-gray-100 p-1 rounded-lg",underline:"border-b border-gray-200"};return e.jsx("div",{ref:r,role:"tablist",className:g("flex",n[i],t),...s,children:a})});en.displayName="TabList";const tn=x.forwardRef(({className:t,value:a,icon:s,children:r,disabled:i,...n},o)=>{const{activeTab:u,setActiveTab:m,variant:c}=Qt(),d=u===a,l="relative inline-flex items-center justify-center font-medium transition-colors",h={default:g("px-4 py-2 text-sm -mb-px",d?"text-primary-600 border-b-2 border-primary-600":"text-gray-500 hover:text-gray-700 border-b-2 border-transparent"),pills:g("px-4 py-2 text-sm rounded-md",d?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),underline:g("px-4 py-3 text-sm",d?"text-primary-600":"text-gray-500 hover:text-gray-700")};return e.jsxs("button",{ref:o,type:"button",role:"tab","aria-selected":d,"aria-controls":`panel-${a}`,disabled:i,onClick:()=>m(a),className:g(l,h[c],ne,i&&"opacity-50 cursor-not-allowed",t),...n,children:[s&&e.jsx("span",{className:"mr-2",children:s}),r,c==="underline"&&d&&e.jsx(P.div,{layoutId:"tab-underline",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary-600",transition:{type:"spring",bounce:.2,duration:.6}})]})});tn.displayName="TabTrigger";const an=x.forwardRef(({className:t,value:a,forceMount:s=!1,children:r,...i},n)=>{const{activeTab:o}=Qt(),u=o===a;return!u&&!s?null:e.jsx("div",{ref:n,role:"tabpanel",id:`panel-${a}`,"aria-labelledby":`tab-${a}`,hidden:!u,className:g("mt-4",q.fast,!u&&"hidden",t),...i,children:r})});an.displayName="TabContent";const sn=x.forwardRef(({className:t,active:a=!1,variant:s="default",children:r,...i},n)=>{const o={default:g("px-4 py-2 text-sm font-medium border-b-2 -mb-px transition-colors",a?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300"),pill:g("px-4 py-2 text-sm font-medium rounded-full transition-colors",a?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900")};return e.jsx("button",{ref:n,type:"button",className:g(o[s],ne,t),...i,children:r})});sn.displayName="TabButton";const Xt=x.forwardRef(({className:t,tabs:a,activeTab:s,onTabChange:r,variant:i="default",...n},o)=>{const u={default:"border-b border-gray-200",pills:"bg-gray-100 p-1 rounded-lg inline-flex",underline:"border-b border-gray-200"},m=c=>({default:g("px-4 py-2 text-sm font-medium -mb-px transition-colors",c?"text-primary-600 border-b-2 border-primary-600":"text-gray-500 hover:text-gray-700 border-b-2 border-transparent"),pills:g("px-4 py-2 text-sm font-medium rounded-md transition-colors",c?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),underline:g("px-4 py-3 text-sm font-medium transition-colors",c?"text-primary-600 border-b-2 border-primary-600 -mb-px":"text-gray-500 hover:text-gray-700")});return e.jsx("div",{ref:o,className:g("flex",u[i],t),...n,children:a.map(c=>e.jsxs("button",{type:"button",onClick:()=>r(c.value),className:g("inline-flex items-center",m(s===c.value)[i],ne),children:[c.icon&&e.jsx("span",{className:"mr-2",children:c.icon}),c.label,c.count!==void 0&&e.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs rounded-full bg-gray-100 text-gray-600",children:c.count})]},c.value))})});Xt.displayName="TabGroup";const rn={sm:"h-1.5",md:"h-2.5",lg:"h-4"},ma={default:"bg-primary-600",success:"bg-green-500",warning:"bg-amber-500",danger:"bg-red-500",gradient:"bg-gradient-to-r from-primary-500 to-primary-700"},ys=x.forwardRef(({className:t,value:a,max:s=100,size:r="md",variant:i="default",showLabel:n=!1,labelPosition:o="outside",animated:u=!0,striped:m=!1,indeterminate:c=!1,...d},l)=>{const h=Math.min(100,Math.max(0,a/s*100));return e.jsxs("div",{ref:l,className:g("w-full",t),...d,children:[n&&o==="outside"&&e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[Math.round(h),"%"]})]}),e.jsx("div",{className:g("w-full rounded-full bg-gray-200 overflow-hidden",rn[r]),role:"progressbar","aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":s,children:c?e.jsx(P.div,{className:g("h-full rounded-full",ma[i]),initial:{x:"-100%",width:"30%"},animate:{x:"400%"},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"}}):e.jsx(P.div,{className:g("h-full rounded-full",ma[i],m&&"bg-stripes",q.fast),initial:u?{width:0}:{width:`${h}%`},animate:{width:`${h}%`},transition:{duration:.5,ease:"easeOut"},children:n&&o==="inside"&&r==="lg"&&e.jsxs("span",{className:"flex items-center justify-center h-full text-xs text-white font-medium",children:[Math.round(h),"%"]})})})]})});ys.displayName="ProgressBar";const nn={default:"stroke-primary-600",success:"stroke-green-500",warning:"stroke-amber-500",danger:"stroke-red-500"},on=x.forwardRef(({className:t,value:a,max:s=100,size:r=64,strokeWidth:i=6,variant:n="default",showLabel:o=!0,label:u,...m},c)=>{const d=Math.min(100,Math.max(0,a/s*100)),l=(r-i)/2,h=l*2*Math.PI,p=h-d/100*h;return e.jsxs("div",{ref:c,className:g("relative inline-flex items-center justify-center",t),...m,children:[e.jsxs("svg",{width:r,height:r,className:"-rotate-90",children:[e.jsx("circle",{cx:r/2,cy:r/2,r:l,fill:"none",stroke:"currentColor",strokeWidth:i,className:"text-gray-200"}),e.jsx(P.circle,{cx:r/2,cy:r/2,r:l,fill:"none",strokeWidth:i,strokeLinecap:"round",className:nn[n],initial:{strokeDashoffset:h},animate:{strokeDashoffset:p},transition:{duration:.5,ease:"easeOut"},style:{strokeDasharray:h}})]}),o&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u!==void 0?u:e.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:[Math.round(d),"%"]})})]})});on.displayName="CircularProgress";const ln=x.forwardRef(({className:t,steps:a,size:s="md",showLabels:r=!0,...i},n)=>{const o={sm:"w-2 h-2",md:"w-3 h-3",lg:"w-4 h-4"},u={sm:"h-0.5",md:"h-1",lg:"h-1.5"};return e.jsxs("div",{ref:n,className:g("",t),...i,children:[e.jsx("div",{className:"flex items-center",children:a.map((m,c)=>e.jsxs("div",{className:"flex items-center flex-1 last:flex-none",children:[e.jsx("div",{className:g("rounded-full flex-shrink-0",o[s],m.completed?"bg-primary-600":m.active?"bg-primary-400 ring-4 ring-primary-100":"bg-gray-300")}),c<a.length-1&&e.jsx("div",{className:g("flex-1 mx-2 rounded-full",u[s],m.completed?"bg-primary-600":"bg-gray-200")})]},c))}),r&&e.jsx("div",{className:"flex mt-2",children:a.map((m,c)=>e.jsx("div",{className:g("flex-1 text-xs text-center last:text-right first:text-left",m.completed||m.active?"text-gray-700":"text-gray-400"),children:m.label},c))})]})});ln.displayName="SegmentedProgress";const cn=x.forwardRef(({className:t,progress:a,stage:s,isComplete:r,...i},n)=>e.jsxs("div",{ref:n,className:g("space-y-2",t),...i,children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:s}),e.jsxs("span",{className:"text-gray-900 font-medium",children:[Math.round(a),"%"]})]}),e.jsx(ys,{value:a,variant:r?"success":"default",animated:!0})]}));cn.displayName="SyncProgress";const O=x.forwardRef(({className:t,variant:a="default",animation:s="pulse",width:r,height:i,style:n,...o},u)=>{const m={default:"rounded-md",circular:"rounded-full",rectangular:"rounded-none"},c={pulse:"animate-pulse",wave:"animate-shimmer bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 bg-[length:200%_100%]",none:""};return e.jsx("div",{ref:u,className:g("bg-gray-200",m[a],c[s],t),style:{width:typeof r=="number"?`${r}px`:r,height:typeof i=="number"?`${i}px`:i,...n},...o})});O.displayName="Skeleton";const Kt=x.forwardRef(({className:t,lines:a=3,lineHeight:s="1rem",lastLineWidth:r="60%",...i},n)=>e.jsx("div",{ref:n,className:g("space-y-2",t),children:Array.from({length:a}).map((o,u)=>e.jsx(O,{height:s,width:u===a-1?r:"100%",...i},u))}));Kt.displayName="SkeletonText";const dn=x.forwardRef(({className:t,hasImage:a=!1,imageHeight:s="200px",hasHeader:r=!0,hasFooter:i=!1,...n},o)=>e.jsxs("div",{ref:o,className:g("bg-white border border-gray-200 rounded-lg overflow-hidden",t),...n,children:[a&&e.jsx(O,{height:s,variant:"rectangular"}),e.jsxs("div",{className:"p-4 space-y-3",children:[r&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{variant:"circular",width:40,height:40}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(O,{height:"0.875rem",width:"60%"}),e.jsx(O,{height:"0.75rem",width:"40%"})]})]}),e.jsx(Kt,{lines:2})]}),i&&e.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 flex justify-between",children:[e.jsx(O,{height:"2rem",width:"80px"}),e.jsx(O,{height:"2rem",width:"80px"})]})]}));dn.displayName="SkeletonCard";const mn={xs:24,sm:32,md:40,lg:48,xl:64},vs=x.forwardRef(({className:t,size:a="md",...s},r)=>{const i=mn[a];return e.jsx(O,{ref:r,variant:"circular",width:i,height:i,className:t,...s})});vs.displayName="SkeletonAvatar";const un=x.forwardRef(({className:t,hasAvatar:a=!0,hasAction:s=!1,...r},i)=>e.jsxs("div",{ref:i,className:g("flex items-center gap-3 p-3",t),...r,children:[a&&e.jsx(vs,{size:"md"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(O,{height:"0.875rem",width:"70%"}),e.jsx(O,{height:"0.75rem",width:"50%"})]}),s&&e.jsx(O,{height:"2rem",width:"60px"})]}));un.displayName="SkeletonListItem";const hn=x.forwardRef(({className:t,rows:a=5,columns:s=4,...r},i)=>e.jsxs("div",{ref:i,className:g("",t),...r,children:[e.jsx("div",{className:"flex gap-4 pb-3 border-b border-gray-200",children:Array.from({length:s}).map((n,o)=>e.jsx(O,{height:"1rem",className:"flex-1"},o))}),Array.from({length:a}).map((n,o)=>e.jsx("div",{className:"flex gap-4 py-3 border-b border-gray-100 last:border-0",children:Array.from({length:s}).map((u,m)=>e.jsx(O,{height:"0.875rem",className:"flex-1",width:m===0?"80%":"100%"},m))},o))]}));hn.displayName="SkeletonTable";const pn=x.forwardRef(({className:t,type:a="line",...s},r)=>e.jsxs("div",{ref:r,className:g("bg-gray-50 rounded-lg p-4",t),...s,children:[a==="line"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-12 space-y-6",children:Array.from({length:4}).map((i,n)=>e.jsx(O,{height:"0.75rem",width:"2rem"},n))}),e.jsx("div",{className:"flex-1 h-48 flex items-end justify-between gap-1",children:Array.from({length:12}).map((i,n)=>e.jsx(O,{className:"flex-1",height:`${30+Math.random()*70}%`},n))})]}),e.jsx("div",{className:"flex gap-2 pl-12",children:Array.from({length:6}).map((i,n)=>e.jsx(O,{height:"0.75rem",className:"flex-1"},n))})]}),a==="bar"&&e.jsx("div",{className:"h-48 flex items-end justify-around gap-2",children:Array.from({length:7}).map((i,n)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[e.jsx(O,{className:"w-full",height:`${30+Math.random()*70}%`}),e.jsx(O,{height:"0.75rem",width:"2rem"})]},n))}),a==="pie"&&e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(O,{variant:"circular",width:180,height:180})})]}));pn.displayName="SkeletonChart";const xn=x.forwardRef(({className:t,...a},s)=>e.jsxs("div",{ref:s,className:g("bg-white border border-gray-200 rounded-lg p-4 space-y-3",t),...a,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{width:60,height:"1.25rem",className:"rounded-full"}),e.jsx(O,{width:80,height:"1.25rem",className:"rounded-full"})]}),e.jsx(O,{width:40,height:"1rem"})]}),e.jsx(O,{height:"1.25rem",width:"85%"}),e.jsx(Kt,{lines:2,lineHeight:"0.875rem"}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(O,{height:"2rem",width:"100px",className:"rounded-md"}),e.jsx(O,{height:"2rem",width:"80px",className:"rounded-md"})]})]}));xn.displayName="SkeletonInsightCard";const js={success:xe,error:me,warning:se,info:It},ws={success:"bg-green-50 border-green-200 text-green-800",error:"bg-red-50 border-red-200 text-red-800",warning:"bg-amber-50 border-amber-200 text-amber-800",info:"bg-blue-50 border-blue-200 text-blue-800"},Ns={success:"text-green-500",error:"text-red-500",warning:"text-amber-500",info:"text-blue-500"},ks=x.forwardRef(({type:t,title:a,message:s,duration:r=5e3,onClose:i},n)=>{const o=js[t],u=x.useCallback(()=>{i?.()},[i]);return x.useEffect(()=>{if(r>0){const m=setTimeout(u,r);return()=>clearTimeout(m)}},[r,u]),e.jsxs(P.div,{ref:n,initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},transition:{duration:.2},className:g("flex items-start gap-3 p-4 rounded-lg border shadow-lg max-w-sm",ws[t]),children:[e.jsx(o,{className:g("w-5 h-5 flex-shrink-0 mt-0.5",Ns[t])}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:a}),s&&e.jsx("p",{className:"text-xs mt-1 opacity-80",children:s})]}),e.jsx("button",{type:"button",onClick:u,className:"flex-shrink-0 p-1 rounded hover:bg-black/10 transition-colors",children:e.jsx(oe,{className:"w-4 h-4"})})]})});ks.displayName="Toast";const gn={"top-left":"top-4 left-4 items-start","top-right":"top-4 right-4 items-end","top-center":"top-4 left-1/2 -translate-x-1/2 items-center","bottom-left":"bottom-4 left-4 items-start","bottom-right":"bottom-4 right-4 items-end","bottom-center":"bottom-4 left-1/2 -translate-x-1/2 items-center"},Ss=x.forwardRef(({position:t="bottom-right"},a)=>{const{toasts:s,removeToast:r}=ke();return Oe.createPortal(e.jsx("div",{ref:a,className:g("fixed z-[100] flex flex-col gap-2 pointer-events-none",gn[t]),children:e.jsx(Y,{mode:"popLayout",children:s.map(i=>e.jsx("div",{className:"pointer-events-auto",children:e.jsx(ks,{...i,onClose:()=>r(i.id)})},i.id))})}),document.body)});Ss.displayName="ToastContainer";const fn=x.forwardRef(({className:t,type:a="info",message:s,action:r,dismissible:i=!0,onDismiss:n,...o},u)=>{const[m,c]=x.useState(!0),d=js[a];if(!m)return null;const l=()=>{c(!1),n?.()};return e.jsx("div",{ref:u,className:g("px-4 py-3 border-b",ws[a],t),...o,children:e.jsxs("div",{className:"flex items-center gap-3 max-w-7xl mx-auto",children:[e.jsx(d,{className:g("w-5 h-5 flex-shrink-0",Ns[a])}),e.jsx("p",{className:"flex-1 text-sm",children:s}),r&&e.jsx("button",{type:"button",onClick:r.onClick,className:"text-sm font-medium underline hover:no-underline",children:r.label}),i&&e.jsx("button",{type:"button",onClick:l,className:"p-1 rounded hover:bg-black/10 transition-colors",children:e.jsx(oe,{className:"w-4 h-4"})})]})})});fn.displayName="NotificationBanner";const bn={light:{key:"text-purple-600",string:"text-green-600",number:"text-blue-600",boolean:"text-amber-600",null:"text-gray-400",bracket:"text-gray-500",line:"text-gray-300",bg:"bg-gray-50"},dark:{key:"text-purple-400",string:"text-green-400",number:"text-blue-400",boolean:"text-amber-400",null:"text-gray-500",bracket:"text-gray-400",line:"text-gray-600",bg:"bg-gray-900"}},Mt=({name:t,value:a,level:s,expandLevel:r,theme:i,isLast:n})=>{const[o,u]=x.useState(s<r),m=bn[i],c=x.useCallback(()=>{u(l=>!l)},[]),d=s*16;if(a===null)return e.jsxs("div",{style:{paddingLeft:d},children:[t!==void 0&&e.jsxs("span",{className:m.key,children:['"',t,'"']}),t!==void 0&&e.jsx("span",{className:m.bracket,children:": "}),e.jsx("span",{className:m.null,children:"null"}),!n&&e.jsx("span",{className:m.bracket,children:","})]});if(typeof a=="string")return e.jsxs("div",{style:{paddingLeft:d},children:[t!==void 0&&e.jsxs("span",{className:m.key,children:['"',t,'"']}),t!==void 0&&e.jsx("span",{className:m.bracket,children:": "}),e.jsxs("span",{className:m.string,children:['"',a,'"']}),!n&&e.jsx("span",{className:m.bracket,children:","})]});if(typeof a=="number")return e.jsxs("div",{style:{paddingLeft:d},children:[t!==void 0&&e.jsxs("span",{className:m.key,children:['"',t,'"']}),t!==void 0&&e.jsx("span",{className:m.bracket,children:": "}),e.jsx("span",{className:m.number,children:a}),!n&&e.jsx("span",{className:m.bracket,children:","})]});if(typeof a=="boolean")return e.jsxs("div",{style:{paddingLeft:d},children:[t!==void 0&&e.jsxs("span",{className:m.key,children:['"',t,'"']}),t!==void 0&&e.jsx("span",{className:m.bracket,children:": "}),e.jsx("span",{className:m.boolean,children:a?"true":"false"}),!n&&e.jsx("span",{className:m.bracket,children:","})]});if(Array.isArray(a))return a.length,e.jsxs("div",{children:[e.jsxs("div",{style:{paddingLeft:d},className:"cursor-pointer hover:bg-black/5 -mx-2 px-2",onClick:c,children:[e.jsx("span",{className:"inline-flex items-center",children:o?e.jsx(ue,{className:"w-3 h-3 mr-1"}):e.jsx(ie,{className:"w-3 h-3 mr-1"})}),t!==void 0&&e.jsxs("span",{className:m.key,children:['"',t,'"']}),t!==void 0&&e.jsx("span",{className:m.bracket,children:": "}),e.jsx("span",{className:m.bracket,children:"["}),!o&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-gray-400 text-xs mx-1",children:[a.length," item",a.length!==1?"s":""]}),e.jsx("span",{className:m.bracket,children:"]"}),!n&&e.jsx("span",{className:m.bracket,children:","})]})]}),o&&e.jsxs(e.Fragment,{children:[a.map((l,h)=>e.jsx(Mt,{value:l,level:s+1,expandLevel:r,theme:i,isLast:h===a.length-1},h)),e.jsxs("div",{style:{paddingLeft:d},children:[e.jsx("span",{className:m.bracket,children:"]"}),!n&&e.jsx("span",{className:m.bracket,children:","})]})]})]});if(typeof a=="object"){const l=Object.entries(a);return l.length,e.jsxs("div",{children:[e.jsxs("div",{style:{paddingLeft:d},className:"cursor-pointer hover:bg-black/5 -mx-2 px-2",onClick:c,children:[e.jsx("span",{className:"inline-flex items-center",children:o?e.jsx(ue,{className:"w-3 h-3 mr-1"}):e.jsx(ie,{className:"w-3 h-3 mr-1"})}),t!==void 0&&e.jsxs("span",{className:m.key,children:['"',t,'"']}),t!==void 0&&e.jsx("span",{className:m.bracket,children:": "}),e.jsx("span",{className:m.bracket,children:"{"}),!o&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-gray-400 text-xs mx-1",children:[l.length," key",l.length!==1?"s":""]}),e.jsx("span",{className:m.bracket,children:"}"}),!n&&e.jsx("span",{className:m.bracket,children:","})]})]}),o&&e.jsxs(e.Fragment,{children:[l.map(([h,p],f)=>e.jsx(Mt,{name:h,value:p,level:s+1,expandLevel:r,theme:i,isLast:f===l.length-1},h)),e.jsxs("div",{style:{paddingLeft:d},children:[e.jsx("span",{className:m.bracket,children:"}"}),!n&&e.jsx("span",{className:m.bracket,children:","})]})]})]})}return null},ut=x.forwardRef(({className:t,data:a,initialExpanded:s=!0,expandLevel:r=2,theme:i="light",showCopy:n=!0,showLineNumbers:o=!1,...u},m)=>{const[c,d]=x.useState(!1),l=x.useCallback(async()=>{try{await navigator.clipboard.writeText(JSON.stringify(a,null,2)),d(!0),setTimeout(()=>d(!1),2e3)}catch(h){console.error("Failed to copy:",h)}},[a]);return e.jsxs("div",{ref:m,className:g("relative rounded-lg border overflow-hidden",i==="dark"?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200",t),...u,children:[n&&e.jsx("button",{type:"button",onClick:l,className:g("absolute top-2 right-2 p-1.5 rounded-md transition-colors",i==="dark"?"text-gray-400 hover:text-gray-200 hover:bg-gray-800":"text-gray-500 hover:text-gray-700 hover:bg-gray-200"),children:c?e.jsx(K,{className:"w-4 h-4 text-green-500"}):e.jsx(Ne,{className:"w-4 h-4"})}),e.jsx("div",{className:g("p-4 font-mono text-sm overflow-auto",i==="dark"?"text-gray-200":"text-gray-800"),children:e.jsx(Mt,{value:a,level:0,expandLevel:r,theme:i,isLast:!0})})]})});ut.displayName="JsonViewer";const yn=x.forwardRef(({className:t,code:a,language:s="json",showCopy:r=!0,theme:i="light",...n},o)=>{const[u,m]=x.useState(!1),c=x.useCallback(async()=>{try{await navigator.clipboard.writeText(a),m(!0),setTimeout(()=>m(!1),2e3)}catch(d){console.error("Failed to copy:",d)}},[a]);return e.jsxs("div",{className:"relative",children:[r&&e.jsx("button",{type:"button",onClick:c,className:g("absolute top-2 right-2 p-1.5 rounded-md transition-colors",i==="dark"?"text-gray-400 hover:text-gray-200 hover:bg-gray-800":"text-gray-500 hover:text-gray-700 hover:bg-gray-200"),children:u?e.jsx(K,{className:"w-4 h-4 text-green-500"}):e.jsx(Ne,{className:"w-4 h-4"})}),e.jsx("pre",{ref:o,className:g("p-4 rounded-lg border font-mono text-sm overflow-auto",i==="dark"?"bg-gray-900 border-gray-700 text-gray-200":"bg-gray-50 border-gray-200 text-gray-800",t),...n,children:e.jsx("code",{children:a})})]})});yn.displayName="CodeBlock";function Jt({onPatientChange:t,className:a=""}){const s=Ut(),r=he(l=>l.activePersonaId),i=he(l=>l.setActivePersona),[n,o]=x.useState(!1),u=s.find(l=>l.id===r)||s[0],m=l=>{i(l),o(!1),t?.(l)},c=n?"rotate-180":"",d=l=>l===r?"bg-primary-50":"";return e.jsxs("div",{className:"relative "+a,children:[e.jsxs("button",{onClick:()=>o(!n),className:"flex items-center gap-3 px-4 py-2 bg-white border border-gray-200 rounded-lg shadow-sm hover:border-primary-300 hover:shadow-md transition-all min-w-[200px]",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-primary-100 to-primary-200 flex items-center justify-center",children:e.jsx(Xe,{className:"w-4 h-4 text-primary-600"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Patient"}),e.jsx("p",{className:"font-medium text-gray-900 text-sm",children:u?.name||"Select"})]}),e.jsx(ue,{className:"w-4 h-4 text-gray-400 transition-transform "+c})]}),n&&e.jsx(P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 overflow-hidden",children:s.map(l=>e.jsxs("button",{onClick:()=>m(l.id),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-gray-50 transition-colors text-left "+d(l.id),children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center",children:e.jsx(Xe,{className:"w-3 h-3 text-gray-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm",children:l.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[l.daysOfData," days"]})]}),l.id===r&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-500"})]},l.id))})]})}const Cs=x.forwardRef(({className:t,...a},s)=>{const{guidedMode:r}=ke(),{activePersona:i,personas:n,setPersona:o}=Se(),{isSyncing:u,simulateSync:m}=qt(),c=Ci();return e.jsxs("header",{ref:s,className:g("h-16 bg-white border-b border-slate-200 flex items-center justify-between px-6",t),...a,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative","data-tour":"persona-selector",children:[e.jsx("label",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-wider block mb-1",children:"Viewing as"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:i?.id||"",onChange:d=>o(d.target.value),className:g("appearance-none bg-white border border-slate-200 rounded-lg pl-3 pr-8 py-1.5","text-sm font-medium text-slate-700",q.colors,"hover:border-slate-300 focus:outline-none focus:ring-2 focus:ring-primary-100 focus:border-primary-300"),children:n.map(d=>e.jsxs("option",{value:d.id,children:[d.name," (",d.dataContext?.daysOfData??d.daysOfData,"d)"]},d.id))}),e.jsx(ue,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),i&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxs("span",{className:"px-2.5 py-1 bg-slate-50 border border-slate-200 rounded-full font-medium text-slate-600",children:[i.dataContext?.daysOfData??i.daysOfData," Days"]}),e.jsxs("span",{className:"px-2.5 py-1 bg-primary-50 border border-primary-100 rounded-full font-medium text-primary-600",children:[Math.round((i.dataContext?.evidenceWeight??.7)*100),"% Personal"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[r&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-primary-50 text-primary-600 text-xs font-medium rounded-full",children:[e.jsx("span",{className:"w-2 h-2 bg-serif-cyan rounded-full animate-pulse"}),"Tour Active"]}),e.jsx(mt,{content:`Last synced: ${c}`,children:e.jsxs("button",{onClick:m,disabled:u,className:g("flex items-center gap-2 px-3 py-1.5 border border-slate-200 rounded-lg text-xs font-medium text-slate-600",q.colors,"hover:bg-slate-50 hover:border-slate-300 disabled:opacity-50 disabled:cursor-not-allowed"),children:[e.jsx(Le,{className:g("w-4 h-4",u&&"animate-spin")}),u?"Syncing...":"Sync"]})}),e.jsxs("button",{className:"relative p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-50 rounded-lg transition-colors",children:[e.jsx(lr,{className:"w-5 h-5"}),e.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-serif-pink rounded-full"})]}),e.jsx("div",{className:"w-8 h-8 bg-primary-100 flex items-center justify-center text-primary-600 text-sm font-semibold rounded-full",children:i?.name.charAt(0)||"U"})]})]})});Cs.displayName="Header";const vn=x.forwardRef(({className:t,tabs:a,activeTab:s,onTabChange:r,actions:i,...n},o)=>e.jsxs("div",{ref:o,className:g("bg-white border-b border-slate-200 px-6 flex items-center justify-between",t),...n,children:[a&&e.jsx("div",{className:"flex",children:a.map(u=>e.jsxs("button",{onClick:()=>r?.(u.value),className:g("px-4 py-3 text-sm font-medium border-b-2 -mb-px transition-colors",s===u.value?"text-primary-600 border-serif-cyan":"text-slate-500 border-transparent hover:text-slate-700 hover:border-slate-200"),children:[u.label,u.count!==void 0&&e.jsx("span",{className:g("ml-2 px-1.5 py-0.5 text-xs rounded-full",s===u.value?"bg-primary-100 text-primary-600":"bg-slate-100 text-slate-500"),children:u.count})]},u.value))}),i&&e.jsx("div",{className:"flex items-center gap-3",children:i})]}));vn.displayName="SubHeader";const jn=x.forwardRef(({className:t,items:a,...s},r)=>e.jsx("nav",{ref:r,className:g("flex items-center text-sm",t),...s,children:a.map((i,n)=>e.jsxs("span",{className:"flex items-center",children:[n>0&&e.jsx("span",{className:"mx-2 text-slate-300",children:"/"}),i.href?e.jsx("a",{href:i.href,className:"text-slate-500 hover:text-slate-700 transition-colors",children:i.label}):e.jsx("span",{className:"text-slate-800 font-medium",children:i.label})]},n))}));jn.displayName="Breadcrumbs";const Ms=x.forwardRef(({className:t,showSidebar:a=!0,showHeader:s=!0,children:r,...i},n)=>e.jsxs("div",{ref:n,className:g("min-h-screen bg-white flex",t),...i,children:[a&&e.jsx(Ya,{}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[s&&e.jsx(Cs,{}),e.jsx("main",{className:"flex-1 overflow-auto bg-gray-100",children:r||e.jsx(Js,{})})]}),e.jsx(Ss,{position:"bottom-right"})]}));Ms.displayName="AppShell";const wn={sm:"max-w-2xl",md:"max-w-4xl",lg:"max-w-5xl",xl:"max-w-6xl","2xl":"max-w-7xl",full:"max-w-full"},Nn={none:"",sm:"p-4",md:"p-6",lg:"p-8"},Q=x.forwardRef(({className:t,title:a,subtitle:s,actions:r,maxWidth:i="2xl",padding:n="md",children:o,...u},m)=>e.jsxs("div",{ref:m,className:g("mx-auto w-full",wn[i],Nn[n],t),...u,children:[(a||r)&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[a&&e.jsx("h1",{className:"text-3xl font-black text-black uppercase tracking-tight",children:a}),s&&e.jsx("p",{className:"mt-2 text-sm font-medium text-gray-600 uppercase tracking-wider",children:s})]}),r&&e.jsx("div",{className:"flex items-center gap-3",children:r})]}),e.jsx("div",{className:"h-0.5 bg-black mt-4"})]}),o]}));Q.displayName="PageLayout";const H=x.forwardRef(({className:t,title:a,subtitle:s,actions:r,children:i,...n},o)=>e.jsxs("section",{ref:o,className:g("mb-8",t),...n,children:[(a||r)&&e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[a&&e.jsx("h2",{className:"text-xl font-black text-black uppercase tracking-tight",children:a}),s&&e.jsx("p",{className:"mt-1 text-xs font-bold text-gray-500 uppercase tracking-widest",children:s})]}),r&&e.jsx("div",{className:"flex items-center gap-2",children:r})]}),i]}));H.displayName="Section";const kn={1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-4",5:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",6:"grid-cols-1 md:grid-cols-3 lg:grid-cols-6"},Sn={none:"",sm:"gap-3",md:"gap-4",lg:"gap-6"},B=x.forwardRef(({className:t,columns:a=3,gap:s="md",children:r,...i},n)=>e.jsx("div",{ref:n,className:g("grid",kn[a],Sn[s],t),...i,children:r}));B.displayName="Grid";const Cn=x.forwardRef(({className:t,sidebar:a,sidebarWidth:s="280px",sidebarPosition:r="left",children:i,...n},o)=>e.jsxs("div",{ref:o,className:g("flex gap-6",r==="right"&&"flex-row-reverse",t),...n,children:[e.jsx("aside",{className:"flex-shrink-0",style:{width:s},children:a}),e.jsx("div",{className:"flex-1 min-w-0",children:i})]}));Cn.displayName="SplitLayout";const Mn=x.forwardRef(({className:t,icon:a,title:s,description:r,action:i,...n},o)=>e.jsxs("div",{ref:o,className:g("flex flex-col items-center justify-center py-12 px-4 text-center","border-2 border-dashed border-gray-300",t),...n,children:[a&&e.jsx("div",{className:"mb-4 text-gray-400",children:a}),e.jsx("h3",{className:"text-lg font-black text-black uppercase tracking-tight mb-2",children:s}),r&&e.jsx("p",{className:"text-sm text-gray-500 mb-4 max-w-sm",children:r}),i]}));Mn.displayName="EmptyState";const Ts={outcome:{id:"outcome",label:"Outcomes",shortLabel:"Outcomes",description:"Daily metrics you care about optimizing",color:"#10B981",bgColor:"bg-emerald-50",borderColor:"border-emerald-200",icon:"Target",domains:["sleep","recovery","mood","cognitive","activity","stress"]},load:{id:"load",label:"Loads",shortLabel:"Loads",description:"Accumulated state from recent choices",color:"#F59E0B",bgColor:"bg-amber-50",borderColor:"border-amber-200",icon:"TrendingUp",domains:["activity","recovery","stress","sleep"]},marker:{id:"marker",label:"Markers",shortLabel:"Markers",description:"Slow-changing biological markers",color:"#8B5CF6",bgColor:"bg-violet-50",borderColor:"border-violet-200",icon:"Activity",domains:["metabolic","cardio","nutrition"]}};function ua(t){let a=[...rs];if(t.personaId&&(a=a.filter(s=>s.personaId===t.personaId)),t.category){const s=Array.isArray(t.category)?t.category:[t.category];a=a.filter(r=>s.includes(r.category))}return t.minCertainty!==void 0&&(a=a.filter(s=>s.certainty>=t.minCertainty)),t.maxCertainty!==void 0&&(a=a.filter(s=>s.certainty<=t.maxCertainty)),t.hasHoldoutPreview!==void 0&&(a=a.filter(s=>t.hasHoldoutPreview?!!s.holdoutPreview:!s.holdoutPreview)),t.dataSources&&t.dataSources.length>0&&(a=a.filter(s=>t.dataSources.some(r=>s.dataSources.includes(r)))),a}function ha(t){return is.filter(a=>a.personaId===t)}const pa=[{primary:"rgb(var(--color-primary-500))",light:"rgb(var(--color-primary-100))",bg:"bg-primary-50",border:"border-primary-200",text:"text-primary-600"},{primary:"rgb(var(--color-secondary-500))",light:"rgb(var(--color-secondary-100))",bg:"bg-secondary-50",border:"border-secondary-200",text:"text-secondary-600"},{primary:"rgb(var(--color-accent-500))",light:"rgb(var(--color-accent-100))",bg:"bg-accent-50",border:"border-accent-200",text:"text-accent-600"},{primary:"#10B981",light:"#D1FAE5",bg:"bg-emerald-50",border:"border-emerald-200",text:"text-emerald-600"},{primary:"#6366F1",light:"#E0E7FF",bg:"bg-indigo-50",border:"border-indigo-200",text:"text-indigo-600"},{primary:"#8B5CF6",light:"#EDE9FE",bg:"bg-violet-50",border:"border-violet-200",text:"text-violet-600"}];function Tn(){const t=Ra(),a=Ut(),s=he(l=>l.setActivePersona),r=a.map(l=>{const h=ua({personaId:l.id,minCertainty:.6}),p=h.filter(f=>f.causalParams?.currentStatus&&f.causalParams.currentStatus!=="at_optimal");return{personaId:l.id,insights:h,outsideSafeguards:p}}),i=r.reduce((l,h)=>l+h.insights.length,0),n=r.reduce((l,h)=>l+h.outsideSafeguards.length,0),o=a.map(l=>{const h=ha(l.id);return{personaId:l.id,protocols:h,active:h.filter(p=>p.status==="active"),needsReview:h.filter(p=>p.status==="suggested"||!p.status)}}),u=o.reduce((l,h)=>l+h.needsReview.length,0);o.reduce((l,h)=>l+h.active.length,0);const m=r.filter(l=>l.outsideSafeguards.length>0).length,c=(l,h)=>{s(l),t(h)},d=[{icon:se,label:"Outside Safeguards",value:n,color:"text-amber-600",bgColor:"bg-amber-50",borderColor:"border-amber-100",urgent:n>0},{icon:fe,label:"Total Insights",value:i,color:"text-primary-600",bgColor:"bg-primary-50",borderColor:"border-primary-100"},{icon:cr,label:"Protocols to Review",value:u,color:"text-rose-600",bgColor:"bg-rose-50",borderColor:"border-rose-100",urgent:u>0},{icon:be,label:"Patients Deviating",value:m,subtitle:`of ${a.length}`,color:"text-secondary-600",bgColor:"bg-secondary-50",borderColor:"border-secondary-100"}];return e.jsxs(Q,{maxWidth:"2xl",padding:"lg",children:[e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold text-slate-800 mb-1",children:"Good morning, Apollo"}),e.jsxs("p",{className:"text-slate-500",children:["You have ",e.jsxs("span",{className:"font-medium text-primary-600",children:[a.length," patients"]})," with new insights today"]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2.5 bg-primary-50 border border-primary-100 rounded-xl",children:[e.jsx(ee,{className:"w-5 h-5 text-primary-500"}),e.jsx("span",{className:"text-sm font-medium text-primary-600",children:"All Patients Dashboard"})]})]})}),e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-8",children:e.jsx(B,{columns:4,gap:"md",children:d.map((l,h)=>{const p=l.icon,f="urgent"in l&&l.urgent;return e.jsx(M,{className:`p-4 rounded-xl border transition-all ${f?"ring-1 ring-amber-200 bg-amber-50/30 border-amber-200":`bg-white/80 ${l.borderColor}`}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2.5 rounded-xl border ${l.bgColor} ${l.borderColor}`,children:e.jsx(p,{className:"w-5 h-5 "+l.color})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 font-medium",children:l.label}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("p",{className:`text-2xl font-semibold ${f?l.color:"text-slate-800"}`,children:l.value}),"subtitle"in l&&l.subtitle&&e.jsx("span",{className:"text-sm text-slate-400",children:l.subtitle})]})]})]})},h)})})}),e.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"p-2.5 bg-primary-50 border border-primary-100 rounded-xl",children:e.jsx(Xe,{className:"w-5 h-5 text-primary-500"})}),e.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Patient Overview"})]}),e.jsx(B,{columns:2,gap:"lg",children:a.map((l,h)=>{const p=pa[h%pa.length],f=ua({personaId:l.id,minCertainty:.6}),j=ha(l.id).filter(T=>T.status==="active"),k=f.filter(T=>T.causalParams?.currentStatus&&T.causalParams.currentStatus!=="at_optimal").slice(0,3),N=j.length>0,b=l.daysOfData<30||f.length<3,w=N?"Active Protocol":b?"Still Collecting Insights":"Ready for Protocol",y=()=>N?"bg-emerald-100 text-emerald-700":b?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700",S=T=>T==="above_optimal"?e.jsx(be,{className:"w-3 h-3 rotate-180"}):e.jsx(be,{className:"w-3 h-3"});return e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*h},children:e.jsxs(M,{className:`p-5 rounded-xl hover:shadow-md transition-all border-2 ${p.border} ${p.bg}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center border ${p.border} ${p.bg}`,children:e.jsx(Xe,{className:`w-6 h-6 ${p.text}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-800",children:l.name}),e.jsx("p",{className:"text-sm text-slate-500",children:l.archetype})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${y()}`,children:w}),e.jsxs("span",{className:"text-xs text-slate-400",children:[l.daysOfData," days of data"]})]})]}),k.length>0?e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(se,{className:"w-4 h-4 text-amber-500"}),e.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Deviating from Trend"})]}),k.map(T=>{const R=T.causalParams?.currentStatus||"below_optimal",$=R==="above_optimal";return e.jsx("div",{className:"p-3 bg-amber-50/70 rounded-xl border border-amber-100",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${$?"bg-rose-100 border border-rose-200":"bg-sky-100 border border-sky-200"}`,children:S(R)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 truncate",children:T.causalParams?.source?.replace(/_/g," ").replace(/\b\w/g,A=>A.toUpperCase())||T.title}),e.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:[$?"Above":"Below"," optimal threshold",T.causalParams?.theta?.displayValue&&e.jsxs("span",{className:"text-amber-600 font-medium",children:[" (",T.causalParams.theta.displayValue,")"]})]})]})]})},T.id)})]}):e.jsx("div",{className:"mb-4 p-3 bg-emerald-50/70 rounded-xl border border-emerald-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4 text-emerald-500"}),e.jsx("span",{className:"text-sm text-emerald-600 font-medium",children:"All metrics within optimal range"})]})}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-500 mb-4 pb-4 border-b border-slate-100",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(fe,{className:"w-3.5 h-3.5 text-primary-400"}),f.length," insights"]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(vt,{className:"w-3.5 h-3.5 text-secondary-400"}),j.length," protocols"]}),k.length>0&&e.jsxs("span",{className:"flex items-center gap-1.5 text-amber-600",children:[e.jsx(se,{className:"w-3.5 h-3.5"}),k.length," alerts"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("button",{onClick:()=>c(l.id,"/insights"),className:`flex items-center justify-center gap-1.5 px-3 py-2.5 text-sm font-medium rounded-xl transition-all border ${p.bg} ${p.border} ${p.text} hover:shadow-sm`,children:[e.jsx(fe,{className:"w-4 h-4"}),"Insights"]}),e.jsxs("button",{onClick:()=>c(l.id,"/protocols"),className:`flex items-center justify-center gap-1.5 px-3 py-2.5 text-sm font-medium rounded-xl transition-all border ${p.bg} ${p.border} ${p.text} hover:shadow-sm`,children:[e.jsx(vt,{className:"w-4 h-4"}),"Protocols"]}),e.jsxs("button",{onClick:()=>c(l.id,"/integration"),className:`flex items-center justify-center gap-1.5 px-3 py-2.5 text-sm font-medium rounded-xl transition-all border ${p.bg} ${p.border} ${p.text} hover:shadow-sm`,children:[e.jsx(ie,{className:"w-4 h-4"}),"Devices"]})]})]})},l.id)})})]})]})}const Pn={oura:Ee,fitbit:Ee,"Vitals+-app":$a,bloodwork:At,weather:nt},xa=t=>t?new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A",Dn=t=>t?new Date(t).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):"";function _n(){const{activePersona:t}=Se(),{devices:a}=cs(),{deviceStates:s,syncDevice:r,syncAllDevices:i,isSyncing:n}=qt(),[o,u]=x.useState(null),m=l=>s.find(h=>h.deviceId===l),c=l=>t?.deviceConnections?.find(h=>h.deviceId===l),d=n?"animate-spin":"";return e.jsxs(Q,{title:"Data Integration",subtitle:"Connect your wearables and health data sources",actions:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Jt,{}),e.jsxs(L,{onClick:i,loading:n,children:[e.jsx(Le,{className:"w-4 h-4 mr-2 "+d}),"Sync All Devices"]})]}),children:[e.jsx(H,{title:"Connected Devices",subtitle:t?"Data sources for "+t.name:"Data sources",children:e.jsx(B,{columns:4,gap:"md","data-tour":"device-grid",children:a.map(l=>{m(l.id);const h=Pn[l.id]||Ee,p=c(l.id),f=p?.isActive??!1,v=!!p,j=f?"bg-[#89ccf0]/20":v?"bg-gray-200":"bg-gray-100",k=f?"text-[#89ccf0]":v?"text-gray-500":"text-gray-300",N=f?"border-2 border-[#89ccf0]":"";return e.jsxs("div",{className:"relative",onMouseEnter:()=>u(l.id),onMouseLeave:()=>u(null),children:[e.jsxs(M,{className:"p-4 "+N,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg "+j,children:e.jsx(h,{className:"w-5 h-5 "+k})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:l.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[l.metrics?.length??0," metrics"]})]})]}),f?e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#89ccf0] animate-pulse"}):v?e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400"}):null]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[l.metrics?.slice(0,3).map(b=>e.jsx(_,{variant:"outline",size:"sm",children:b},b)),(l.metrics?.length??0)>3&&e.jsxs(_,{variant:"outline",size:"sm",children:["+",(l.metrics?.length??0)-3]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:f?e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-[#89ccf0] font-medium",children:"Connected"}),e.jsx(L,{size:"xs",variant:"ghost",onClick:()=>r(l.id),children:e.jsx(Le,{className:"w-3 h-3"})})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"Last synced: 4:30am"})]}):v?e.jsx("span",{className:"text-xs text-gray-500",children:"Previously connected"}):e.jsx(L,{size:"sm",variant:"outline",fullWidth:!0,children:"Connect"})})]}),o===l.id&&v&&e.jsx(P.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 z-50",children:e.jsxs("div",{className:"bg-navy-900 text-white px-3 py-2 rounded-lg shadow-lg text-xs whitespace-nowrap",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"First connected: "}),e.jsx("span",{children:xa(p?.firstConnected)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Last refreshed: "}),e.jsxs("span",{children:[xa(p?.lastRefreshed)," ",Dn(p?.lastRefreshed)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Status: "}),e.jsx("span",{className:f?"text-[#89ccf0]":"text-gray-400",children:f?"Active":"Inactive"})]})]}),e.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full",children:e.jsx("div",{className:"border-8 border-transparent border-t-navy-900"})})]})})]},l.id)})})}),e.jsx(H,{title:"Data Pipeline Architecture",subtitle:"How Serif processes your health data",className:"mt-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(M,{className:"p-6 bg-gradient-to-r from-emerald-50 to-cyan-50 border-2 border-emerald-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"px-3 py-1 bg-emerald-500 text-white text-xs font-bold rounded-full",children:"FAST LOOP"}),e.jsx("span",{className:"text-sm text-emerald-700 font-medium",children:"Daily Inference Pipeline"}),e.jsx("span",{className:"text-xs text-emerald-600 ml-auto",children:"Runs every 24 hours"})]}),e.jsx("div",{className:"flex items-center justify-between gap-2 overflow-x-auto pb-2",children:[{name:"ETL",desc:"Extract & Transform",color:"bg-slate-100 border-slate-300"},{name:"COMPLE",desc:"Categorize Data",color:"bg-violet-100 border-violet-300"},{name:"Causal Structure",desc:"Build DAG",color:"bg-blue-100 border-blue-300"},{name:"BCEL Inference",desc:"Generate Insights",color:"bg-emerald-100 border-emerald-300"},{name:"Safeguards",desc:"Validate Safety",color:"bg-amber-100 border-amber-300"},{name:"Plan Publisher",desc:"Deliver to User",color:"bg-cyan-100 border-cyan-300"}].map((l,h,p)=>e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsxs("div",{className:`px-4 py-3 rounded-lg border-2 ${l.color} text-center min-w-[100px]`,children:[e.jsx("div",{className:"text-xs font-bold text-slate-800",children:l.name}),e.jsx("div",{className:"text-[10px] text-slate-500 mt-0.5",children:l.desc})]}),h<p.length-1&&e.jsx("span",{className:"text-emerald-400 text-lg font-bold",children:"â†’"})]},l.name))})]}),e.jsxs(M,{className:"p-6 bg-gradient-to-r from-violet-50 to-purple-50 border-2 border-violet-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"px-3 py-1 bg-violet-500 text-white text-xs font-bold rounded-full",children:"SLOW LOOP"}),e.jsx("span",{className:"text-sm text-violet-700 font-medium",children:"Weekly Learning Pipeline"}),e.jsx("span",{className:"text-xs text-violet-600 ml-auto",children:"Runs every 7 days"})]}),e.jsx("div",{className:"flex items-center justify-between gap-2 overflow-x-auto pb-2",children:[{name:"60-Day History",desc:"Aggregate Data",color:"bg-slate-100 border-slate-300"},{name:"Backdoor Features",desc:"Control Confounders",color:"bg-rose-100 border-rose-300"},{name:"BCEL Learn",desc:"Update Parameters",color:"bg-violet-100 border-violet-300"},{name:"Validation",desc:"Calibration Check",color:"bg-purple-100 border-purple-300"},{name:"Model Update",desc:"Deploy to Fast Loop",color:"bg-indigo-100 border-indigo-300"}].map((l,h,p)=>e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsxs("div",{className:`px-4 py-3 rounded-lg border-2 ${l.color} text-center min-w-[110px]`,children:[e.jsx("div",{className:"text-xs font-bold text-slate-800",children:l.name}),e.jsx("div",{className:"text-[10px] text-slate-500 mt-0.5",children:l.desc})]}),h<p.length-1&&e.jsx("span",{className:"text-violet-400 text-lg font-bold",children:"â†’"})]},l.name))})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs(M,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:"24h"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Insight Refresh"})]}),e.jsxs(M,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-violet-600",children:"7-10 days"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Individual Calibration"})]}),e.jsxs(M,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-cyan-600",children:"128"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Bayesian Worlds/Run"})]})]})]})}),e.jsx(H,{title:"Data Categories (COMPLE)",subtitle:"How we structure health data",className:"mt-8",children:e.jsx(B,{columns:3,gap:"md",children:[{letter:"C",name:"Choices",desc:"Behavioral inputs you control",color:{bg:"bg-violet-50",border:"border-violet-200",letter:"bg-violet-100 text-violet-700",badge:"bg-violet-100 text-violet-600"},datafields:["Caffeine intake (mg, time)","Alcohol (units, time)","Supplements taken","Meal timing","Exercise type & duration","Screen time","Meditation minutes"]},{letter:"O",name:"Outcomes",desc:"Health results we measure",color:{bg:"bg-emerald-50",border:"border-emerald-200",letter:"bg-emerald-100 text-emerald-700",badge:"bg-emerald-100 text-emerald-600"},datafields:["Sleep efficiency %","Deep sleep minutes","REM sleep minutes","Sleep latency","Energy score","Mood rating","Cognitive performance"]},{letter:"M",name:"Markers",desc:"Lab values & biomarkers",color:{bg:"bg-rose-50",border:"border-rose-200",letter:"bg-rose-100 text-rose-700",badge:"bg-rose-100 text-rose-600"},datafields:["Fasting glucose","HbA1c","Lipid panel (LDL, HDL, Trig)","hsCRP","Cortisol","Testosterone","Vitamin D","Ferritin"]},{letter:"P",name:"Physiology",desc:"Real-time body signals",color:{bg:"bg-cyan-50",border:"border-cyan-200",letter:"bg-cyan-100 text-cyan-700",badge:"bg-cyan-100 text-cyan-600"},datafields:["Heart rate variability (ms)","Resting heart rate","Body temperature","Blood oxygen (SpO2)","Respiratory rate","Blood pressure"]},{letter:"L",name:"Loads",desc:"Stressors on the system",color:{bg:"bg-amber-50",border:"border-amber-200",letter:"bg-amber-100 text-amber-700",badge:"bg-amber-100 text-amber-600"},datafields:["Training load score","Strain score","Steps count","Active calories","Work stress rating","Travel (timezone shifts)","Illness/recovery"]},{letter:"E",name:"Environment",desc:"External context factors",color:{bg:"bg-sky-50",border:"border-sky-200",letter:"bg-sky-100 text-sky-700",badge:"bg-sky-100 text-sky-600"},datafields:["Ambient temperature","Bedroom temperature","Humidity %","Air quality index","Light exposure (lux)","Barometric pressure","UV index"]}].map(l=>e.jsxs(M,{className:`p-4 ${l.color.bg} border ${l.color.border}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:`w-10 h-10 ${l.color.letter} rounded-lg flex items-center justify-center font-bold text-lg`,children:l.letter}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:l.name}),e.jsx("p",{className:"text-xs text-gray-500",children:l.desc})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:l.datafields.map(h=>e.jsx("span",{className:`px-2 py-1 rounded-md text-xs font-medium ${l.color.badge}`,children:h},h))})]},l.letter))})})]})}function tt(t){"@babel/helpers - typeof";return tt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},tt(t)}function pe(t){if(t===null||t===!0||t===!1)return NaN;var a=Number(t);return isNaN(a)?a:a<0?Math.ceil(a):Math.floor(a)}function z(t,a){if(a.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+a.length+" present")}function ce(t){z(1,arguments);var a=Object.prototype.toString.call(t);return t instanceof Date||tt(t)==="object"&&a==="[object Date]"?new Date(t.getTime()):typeof t=="number"||a==="[object Number]"?new Date(t):((typeof t=="string"||a==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Rn(t,a){z(2,arguments);var s=ce(t).getTime(),r=pe(a);return new Date(s+r)}var In={};function ht(){return In}function An(t){var a=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return a.setUTCFullYear(t.getFullYear()),t.getTime()-a.getTime()}var Ps=6e4,Ds=36e5;function Ln(t){return z(1,arguments),t instanceof Date||tt(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function En(t){if(z(1,arguments),!Ln(t)&&typeof t!="number")return!1;var a=ce(t);return!isNaN(Number(a))}function $n(t,a){z(2,arguments);var s=pe(a);return Rn(t,-s)}var Wn=864e5;function On(t){z(1,arguments);var a=ce(t),s=a.getTime();a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0);var r=a.getTime(),i=s-r;return Math.floor(i/Wn)+1}function at(t){z(1,arguments);var a=1,s=ce(t),r=s.getUTCDay(),i=(r<a?7:0)+r-a;return s.setUTCDate(s.getUTCDate()-i),s.setUTCHours(0,0,0,0),s}function _s(t){z(1,arguments);var a=ce(t),s=a.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(s+1,0,4),r.setUTCHours(0,0,0,0);var i=at(r),n=new Date(0);n.setUTCFullYear(s,0,4),n.setUTCHours(0,0,0,0);var o=at(n);return a.getTime()>=i.getTime()?s+1:a.getTime()>=o.getTime()?s:s-1}function Vn(t){z(1,arguments);var a=_s(t),s=new Date(0);s.setUTCFullYear(a,0,4),s.setUTCHours(0,0,0,0);var r=at(s);return r}var Bn=6048e5;function Hn(t){z(1,arguments);var a=ce(t),s=at(a).getTime()-Vn(a).getTime();return Math.round(s/Bn)+1}function st(t,a){var s,r,i,n,o,u,m,c;z(1,arguments);var d=ht(),l=pe((s=(r=(i=(n=a?.weekStartsOn)!==null&&n!==void 0?n:a==null||(o=a.locale)===null||o===void 0||(u=o.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&i!==void 0?i:d.weekStartsOn)!==null&&r!==void 0?r:(m=d.locale)===null||m===void 0||(c=m.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&s!==void 0?s:0);if(!(l>=0&&l<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=ce(t),p=h.getUTCDay(),f=(p<l?7:0)+p-l;return h.setUTCDate(h.getUTCDate()-f),h.setUTCHours(0,0,0,0),h}function Rs(t,a){var s,r,i,n,o,u,m,c;z(1,arguments);var d=ce(t),l=d.getUTCFullYear(),h=ht(),p=pe((s=(r=(i=(n=a?.firstWeekContainsDate)!==null&&n!==void 0?n:a==null||(o=a.locale)===null||o===void 0||(u=o.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&i!==void 0?i:h.firstWeekContainsDate)!==null&&r!==void 0?r:(m=h.locale)===null||m===void 0||(c=m.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setUTCFullYear(l+1,0,p),f.setUTCHours(0,0,0,0);var v=st(f,a),j=new Date(0);j.setUTCFullYear(l,0,p),j.setUTCHours(0,0,0,0);var k=st(j,a);return d.getTime()>=v.getTime()?l+1:d.getTime()>=k.getTime()?l:l-1}function Fn(t,a){var s,r,i,n,o,u,m,c;z(1,arguments);var d=ht(),l=pe((s=(r=(i=(n=a?.firstWeekContainsDate)!==null&&n!==void 0?n:a==null||(o=a.locale)===null||o===void 0||(u=o.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&i!==void 0?i:d.firstWeekContainsDate)!==null&&r!==void 0?r:(m=d.locale)===null||m===void 0||(c=m.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&s!==void 0?s:1),h=Rs(t,a),p=new Date(0);p.setUTCFullYear(h,0,l),p.setUTCHours(0,0,0,0);var f=st(p,a);return f}var zn=6048e5;function Yn(t,a){z(1,arguments);var s=ce(t),r=st(s,a).getTime()-Fn(s,a).getTime();return Math.round(r/zn)+1}function W(t,a){for(var s=t<0?"-":"",r=Math.abs(t).toString();r.length<a;)r="0"+r;return s+r}var de={y:function(a,s){var r=a.getUTCFullYear(),i=r>0?r:1-r;return W(s==="yy"?i%100:i,s.length)},M:function(a,s){var r=a.getUTCMonth();return s==="M"?String(r+1):W(r+1,2)},d:function(a,s){return W(a.getUTCDate(),s.length)},a:function(a,s){var r=a.getUTCHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return r==="am"?"a.m.":"p.m."}},h:function(a,s){return W(a.getUTCHours()%12||12,s.length)},H:function(a,s){return W(a.getUTCHours(),s.length)},m:function(a,s){return W(a.getUTCMinutes(),s.length)},s:function(a,s){return W(a.getUTCSeconds(),s.length)},S:function(a,s){var r=s.length,i=a.getUTCMilliseconds(),n=Math.floor(i*Math.pow(10,r-3));return W(n,s.length)}},je={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Un={G:function(a,s,r){var i=a.getUTCFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});default:return r.era(i,{width:"wide"})}},y:function(a,s,r){if(s==="yo"){var i=a.getUTCFullYear(),n=i>0?i:1-i;return r.ordinalNumber(n,{unit:"year"})}return de.y(a,s)},Y:function(a,s,r,i){var n=Rs(a,i),o=n>0?n:1-n;if(s==="YY"){var u=o%100;return W(u,2)}return s==="Yo"?r.ordinalNumber(o,{unit:"year"}):W(o,s.length)},R:function(a,s){var r=_s(a);return W(r,s.length)},u:function(a,s){var r=a.getUTCFullYear();return W(r,s.length)},Q:function(a,s,r){var i=Math.ceil((a.getUTCMonth()+1)/3);switch(s){case"Q":return String(i);case"QQ":return W(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(a,s,r){var i=Math.ceil((a.getUTCMonth()+1)/3);switch(s){case"q":return String(i);case"qq":return W(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(a,s,r){var i=a.getUTCMonth();switch(s){case"M":case"MM":return de.M(a,s);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(a,s,r){var i=a.getUTCMonth();switch(s){case"L":return String(i+1);case"LL":return W(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(a,s,r,i){var n=Yn(a,i);return s==="wo"?r.ordinalNumber(n,{unit:"week"}):W(n,s.length)},I:function(a,s,r){var i=Hn(a);return s==="Io"?r.ordinalNumber(i,{unit:"week"}):W(i,s.length)},d:function(a,s,r){return s==="do"?r.ordinalNumber(a.getUTCDate(),{unit:"date"}):de.d(a,s)},D:function(a,s,r){var i=On(a);return s==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):W(i,s.length)},E:function(a,s,r){var i=a.getUTCDay();switch(s){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(a,s,r,i){var n=a.getUTCDay(),o=(n-i.weekStartsOn+8)%7||7;switch(s){case"e":return String(o);case"ee":return W(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},c:function(a,s,r,i){var n=a.getUTCDay(),o=(n-i.weekStartsOn+8)%7||7;switch(s){case"c":return String(o);case"cc":return W(o,s.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(n,{width:"narrow",context:"standalone"});case"cccccc":return r.day(n,{width:"short",context:"standalone"});default:return r.day(n,{width:"wide",context:"standalone"})}},i:function(a,s,r){var i=a.getUTCDay(),n=i===0?7:i;switch(s){case"i":return String(n);case"ii":return W(n,s.length);case"io":return r.ordinalNumber(n,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(a,s,r){var i=a.getUTCHours(),n=i/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(a,s,r){var i=a.getUTCHours(),n;switch(i===12?n=je.noon:i===0?n=je.midnight:n=i/12>=1?"pm":"am",s){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(a,s,r){var i=a.getUTCHours(),n;switch(i>=17?n=je.evening:i>=12?n=je.afternoon:i>=4?n=je.morning:n=je.night,s){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(a,s,r){if(s==="ho"){var i=a.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return de.h(a,s)},H:function(a,s,r){return s==="Ho"?r.ordinalNumber(a.getUTCHours(),{unit:"hour"}):de.H(a,s)},K:function(a,s,r){var i=a.getUTCHours()%12;return s==="Ko"?r.ordinalNumber(i,{unit:"hour"}):W(i,s.length)},k:function(a,s,r){var i=a.getUTCHours();return i===0&&(i=24),s==="ko"?r.ordinalNumber(i,{unit:"hour"}):W(i,s.length)},m:function(a,s,r){return s==="mo"?r.ordinalNumber(a.getUTCMinutes(),{unit:"minute"}):de.m(a,s)},s:function(a,s,r){return s==="so"?r.ordinalNumber(a.getUTCSeconds(),{unit:"second"}):de.s(a,s)},S:function(a,s){return de.S(a,s)},X:function(a,s,r,i){var n=i._originalDate||a,o=n.getTimezoneOffset();if(o===0)return"Z";switch(s){case"X":return fa(o);case"XXXX":case"XX":return ge(o);default:return ge(o,":")}},x:function(a,s,r,i){var n=i._originalDate||a,o=n.getTimezoneOffset();switch(s){case"x":return fa(o);case"xxxx":case"xx":return ge(o);default:return ge(o,":")}},O:function(a,s,r,i){var n=i._originalDate||a,o=n.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+ga(o,":");default:return"GMT"+ge(o,":")}},z:function(a,s,r,i){var n=i._originalDate||a,o=n.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+ga(o,":");default:return"GMT"+ge(o,":")}},t:function(a,s,r,i){var n=i._originalDate||a,o=Math.floor(n.getTime()/1e3);return W(o,s.length)},T:function(a,s,r,i){var n=i._originalDate||a,o=n.getTime();return W(o,s.length)}};function ga(t,a){var s=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),n=r%60;if(n===0)return s+String(i);var o=a;return s+String(i)+o+W(n,2)}function fa(t,a){if(t%60===0){var s=t>0?"-":"+";return s+W(Math.abs(t)/60,2)}return ge(t,a)}function ge(t,a){var s=a||"",r=t>0?"-":"+",i=Math.abs(t),n=W(Math.floor(i/60),2),o=W(i%60,2);return r+n+s+o}var ba=function(a,s){switch(a){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});default:return s.date({width:"full"})}},Is=function(a,s){switch(a){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});default:return s.time({width:"full"})}},Gn=function(a,s){var r=a.match(/(P+)(p+)?/)||[],i=r[1],n=r[2];if(!n)return ba(a,s);var o;switch(i){case"P":o=s.dateTime({width:"short"});break;case"PP":o=s.dateTime({width:"medium"});break;case"PPP":o=s.dateTime({width:"long"});break;default:o=s.dateTime({width:"full"});break}return o.replace("{{date}}",ba(i,s)).replace("{{time}}",Is(n,s))},qn={p:Is,P:Gn},Zn=["D","DD"],Qn=["YY","YYYY"];function Xn(t){return Zn.indexOf(t)!==-1}function Kn(t){return Qn.indexOf(t)!==-1}function ya(t,a,s){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(a,"`) for formatting years to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(a,"`) for formatting years to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(a,"`) for formatting days of the month to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(a,"`) for formatting days of the month to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Jn={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},eo=function(a,s,r){var i,n=Jn[a];return typeof n=="string"?i=n:s===1?i=n.one:i=n.other.replace("{{count}}",s.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function xt(t){return function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=a.width?String(a.width):t.defaultWidth,r=t.formats[s]||t.formats[t.defaultWidth];return r}}var to={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ao={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},so={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ro={date:xt({formats:to,defaultWidth:"full"}),time:xt({formats:ao,defaultWidth:"full"}),dateTime:xt({formats:so,defaultWidth:"full"})},io={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},no=function(a,s,r,i){return io[a]};function Pe(t){return function(a,s){var r=s!=null&&s.context?String(s.context):"standalone",i;if(r==="formatting"&&t.formattingValues){var n=t.defaultFormattingWidth||t.defaultWidth,o=s!=null&&s.width?String(s.width):n;i=t.formattingValues[o]||t.formattingValues[n]}else{var u=t.defaultWidth,m=s!=null&&s.width?String(s.width):t.defaultWidth;i=t.values[m]||t.values[u]}var c=t.argumentCallback?t.argumentCallback(a):a;return i[c]}}var oo={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},lo={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},co={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},mo={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},uo={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ho={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},po=function(a,s){var r=Number(a),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},xo={ordinalNumber:po,era:Pe({values:oo,defaultWidth:"wide"}),quarter:Pe({values:lo,defaultWidth:"wide",argumentCallback:function(a){return a-1}}),month:Pe({values:co,defaultWidth:"wide"}),day:Pe({values:mo,defaultWidth:"wide"}),dayPeriod:Pe({values:uo,defaultWidth:"wide",formattingValues:ho,defaultFormattingWidth:"wide"})};function De(t){return function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=s.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],n=a.match(i);if(!n)return null;var o=n[0],u=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],m=Array.isArray(u)?fo(u,function(l){return l.test(o)}):go(u,function(l){return l.test(o)}),c;c=t.valueCallback?t.valueCallback(m):m,c=s.valueCallback?s.valueCallback(c):c;var d=a.slice(o.length);return{value:c,rest:d}}}function go(t,a){for(var s in t)if(t.hasOwnProperty(s)&&a(t[s]))return s}function fo(t,a){for(var s=0;s<t.length;s++)if(a(t[s]))return s}function bo(t){return function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=a.match(t.matchPattern);if(!r)return null;var i=r[0],n=a.match(t.parsePattern);if(!n)return null;var o=t.valueCallback?t.valueCallback(n[0]):n[0];o=s.valueCallback?s.valueCallback(o):o;var u=a.slice(i.length);return{value:o,rest:u}}}var yo=/^(\d+)(th|st|nd|rd)?/i,vo=/\d+/i,jo={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},wo={any:[/^b/i,/^(a|c)/i]},No={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ko={any:[/1/i,/2/i,/3/i,/4/i]},So={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Co={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Mo={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},To={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Po={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Do={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},_o={ordinalNumber:bo({matchPattern:yo,parsePattern:vo,valueCallback:function(a){return parseInt(a,10)}}),era:De({matchPatterns:jo,defaultMatchWidth:"wide",parsePatterns:wo,defaultParseWidth:"any"}),quarter:De({matchPatterns:No,defaultMatchWidth:"wide",parsePatterns:ko,defaultParseWidth:"any",valueCallback:function(a){return a+1}}),month:De({matchPatterns:So,defaultMatchWidth:"wide",parsePatterns:Co,defaultParseWidth:"any"}),day:De({matchPatterns:Mo,defaultMatchWidth:"wide",parsePatterns:To,defaultParseWidth:"any"}),dayPeriod:De({matchPatterns:Po,defaultMatchWidth:"any",parsePatterns:Do,defaultParseWidth:"any"})},Ro={code:"en-US",formatDistance:eo,formatLong:ro,formatRelative:no,localize:xo,match:_o,options:{weekStartsOn:0,firstWeekContainsDate:1}},Io=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ao=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Lo=/^'([^]*?)'?$/,Eo=/''/g,$o=/[a-zA-Z]/;function Wo(t,a,s){var r,i,n,o,u,m,c,d,l,h,p,f,v,j;z(2,arguments);var k=String(a),N=ht(),b=(r=(i=void 0)!==null&&i!==void 0?i:N.locale)!==null&&r!==void 0?r:Ro,w=pe((n=(o=(u=(m=void 0)!==null&&m!==void 0?m:void 0)!==null&&u!==void 0?u:N.firstWeekContainsDate)!==null&&o!==void 0?o:(c=N.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(w>=1&&w<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var y=pe((l=(h=(p=(f=void 0)!==null&&f!==void 0?f:void 0)!==null&&p!==void 0?p:N.weekStartsOn)!==null&&h!==void 0?h:(v=N.locale)===null||v===void 0||(j=v.options)===null||j===void 0?void 0:j.weekStartsOn)!==null&&l!==void 0?l:0);if(!(y>=0&&y<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!b.localize)throw new RangeError("locale must contain localize property");if(!b.formatLong)throw new RangeError("locale must contain formatLong property");var S=ce(t);if(!En(S))throw new RangeError("Invalid time value");var T=An(S),R=$n(S,T),$={firstWeekContainsDate:w,weekStartsOn:y,locale:b,_originalDate:S},A=k.match(Ao).map(function(C){var D=C[0];if(D==="p"||D==="P"){var E=qn[D];return E(C,b.formatLong)}return C}).join("").match(Io).map(function(C){if(C==="''")return"'";var D=C[0];if(D==="'")return Oo(C);var E=Un[D];if(E)return Kn(C)&&ya(C,a,String(t)),Xn(C)&&ya(C,a,String(t)),E(R,C,b.localize,$);if(D.match($o))throw new RangeError("Format string contains an unescaped latin alphabet character `"+D+"`");return C}).join("");return A}function Oo(t){var a=t.match(Lo);return a?a[1].replace(Eo,"'"):t}function Vo(t,a){var s;z(1,arguments);var r=pe((s=void 0)!==null&&s!==void 0?s:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var i=zo(t),n;if(i.date){var o=Yo(i.date,r);n=Uo(o.restDateString,o.year)}if(!n||isNaN(n.getTime()))return new Date(NaN);var u=n.getTime(),m=0,c;if(i.time&&(m=Go(i.time),isNaN(m)))return new Date(NaN);if(i.timezone){if(c=qo(i.timezone),isNaN(c))return new Date(NaN)}else{var d=new Date(u+m),l=new Date(0);return l.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),l.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),l}return new Date(u+m+c)}var Fe={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Bo=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Ho=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Fo=/^([+-])(\d{2})(?::?(\d{2}))?$/;function zo(t){var a={},s=t.split(Fe.dateTimeDelimiter),r;if(s.length>2)return a;if(/:/.test(s[0])?r=s[0]:(a.date=s[0],r=s[1],Fe.timeZoneDelimiter.test(a.date)&&(a.date=t.split(Fe.timeZoneDelimiter)[0],r=t.substr(a.date.length,t.length))),r){var i=Fe.timezone.exec(r);i?(a.time=r.replace(i[1],""),a.timezone=i[1]):a.time=r}return a}function Yo(t,a){var s=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+a)+"})|(\\d{2}|[+-]\\d{"+(2+a)+"})$)"),r=t.match(s);if(!r)return{year:NaN,restDateString:""};var i=r[1]?parseInt(r[1]):null,n=r[2]?parseInt(r[2]):null;return{year:n===null?i:n*100,restDateString:t.slice((r[1]||r[2]).length)}}function Uo(t,a){if(a===null)return new Date(NaN);var s=t.match(Bo);if(!s)return new Date(NaN);var r=!!s[4],i=_e(s[1]),n=_e(s[2])-1,o=_e(s[3]),u=_e(s[4]),m=_e(s[5])-1;if(r)return Jo(a,u,m)?Zo(a,u,m):new Date(NaN);var c=new Date(0);return!Xo(a,n,o)||!Ko(a,i)?new Date(NaN):(c.setUTCFullYear(a,n,Math.max(i,o)),c)}function _e(t){return t?parseInt(t):1}function Go(t){var a=t.match(Ho);if(!a)return NaN;var s=gt(a[1]),r=gt(a[2]),i=gt(a[3]);return el(s,r,i)?s*Ds+r*Ps+i*1e3:NaN}function gt(t){return t&&parseFloat(t.replace(",","."))||0}function qo(t){if(t==="Z")return 0;var a=t.match(Fo);if(!a)return 0;var s=a[1]==="+"?-1:1,r=parseInt(a[2]),i=a[3]&&parseInt(a[3])||0;return tl(r,i)?s*(r*Ds+i*Ps):NaN}function Zo(t,a,s){var r=new Date(0);r.setUTCFullYear(t,0,4);var i=r.getUTCDay()||7,n=(a-1)*7+s+1-i;return r.setUTCDate(r.getUTCDate()+n),r}var Qo=[31,null,31,30,31,30,31,31,30,31,30,31];function As(t){return t%400===0||t%4===0&&t%100!==0}function Xo(t,a,s){return a>=0&&a<=11&&s>=1&&s<=(Qo[a]||(As(t)?29:28))}function Ko(t,a){return a>=1&&a<=(As(t)?366:365)}function Jo(t,a,s){return a>=1&&a<=53&&s>=0&&s<=6}function el(t,a,s){return t===24?a===0&&s===0:s>=0&&s<60&&a>=0&&a<60&&t>=0&&t<25}function tl(t,a){return a>=0&&a<=59}function ea(t,a="MMM d, yyyy"){const s=typeof t=="string"?Vo(t):t;return Wo(s,a)}function Ls(t){return ea(t,"MMM d")}const al=({active:t,payload:a,valueFormatter:s})=>{if(!t||!a||!a.length)return null;const r=a[0].payload,i=r.value;return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg p-3 text-sm",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s?s(i):i}),e.jsx("p",{className:"text-gray-500",children:ea(r.date)}),r.event&&e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:r.event})]})},sl=x.forwardRef(({className:t,data:a,height:s=200,color:r="#6366f1",showGrid:i=!0,showDots:n=!1,showArea:o=!1,showEvents:u=!0,referenceValue:m,referenceLabel:c,yAxisDomain:d=["auto","auto"],valueFormatter:l,dateFormatter:h=Ls,...p},f)=>{const v=x.useMemo(()=>a.map(N=>({...N,hasEvent:u&&!!N.event})),[a,u]),j=x.useMemo(()=>{const N=a.map(S=>S.value).filter(S=>!isNaN(S)),b=Math.min(...N),w=Math.max(...N),y=(w-b)*.1;return[d[0]==="auto"?Math.floor(b-y):d[0],d[1]==="auto"?Math.ceil(w+y):d[1]]},[a,d]),k=o?dr:Lt;return e.jsx("div",{ref:f,className:g("w-full",t),...p,children:e.jsx(ot,{width:"100%",height:s,children:e.jsxs(k,{data:v,margin:{top:10,right:10,left:-20,bottom:0},children:[i&&e.jsx(Et,{strokeDasharray:"3 3",stroke:"#e5e7eb",vertical:!1}),e.jsx($t,{dataKey:"date",tickFormatter:h,stroke:"#9ca3af",fontSize:12,tickLine:!1,axisLine:{stroke:"#e5e7eb"}}),e.jsx(Wt,{domain:j,stroke:"#9ca3af",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:l}),e.jsx(Ot,{content:e.jsx(al,{valueFormatter:l})}),m!==void 0&&e.jsx(Ke,{y:m,stroke:"#f59e0b",strokeDasharray:"4 4",label:{value:c||`Target: ${m}`,position:"right",fill:"#f59e0b",fontSize:11}}),o&&e.jsx(Wa,{type:"monotone",dataKey:"value",fill:r,fillOpacity:.1,stroke:"none"}),e.jsx(Vt,{type:"monotone",dataKey:"value",stroke:r,strokeWidth:2,dot:n?{fill:r,r:3}:!1,activeDot:{fill:r,r:5,strokeWidth:2,stroke:"#fff"}}),u&&v.filter(N=>N.hasEvent).map((N,b)=>e.jsx(Ke,{x:N.date,stroke:"#f59e0b",strokeDasharray:"2 2",strokeOpacity:.5},b))]})})})});sl.displayName="MetricChart";const rl=x.forwardRef(({className:t,data:a,color:s="#6366f1",height:r=40,showRange:i=!1,...n},o)=>{const u=x.useMemo(()=>a.map((d,l)=>({index:l,value:d})),[a]),m=Math.min(...a),c=Math.max(...a);return e.jsxs("div",{ref:o,className:g("w-full",t),...n,children:[e.jsx(ot,{width:"100%",height:r,children:e.jsx(Lt,{data:u,margin:{top:2,right:2,left:2,bottom:2},children:e.jsx(Vt,{type:"monotone",dataKey:"value",stroke:s,strokeWidth:1.5,dot:!1})})}),i&&e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[e.jsx("span",{children:m}),e.jsx("span",{children:c})]})]})});rl.displayName="Sparkline";const il=x.forwardRef(({className:t,data:a,metrics:s,height:r=250,...i},n)=>e.jsxs("div",{ref:n,className:g("w-full",t),...i,children:[e.jsx(ot,{width:"100%",height:r,children:e.jsxs(Lt,{data:a,margin:{top:10,right:10,left:-20,bottom:0},children:[e.jsx(Et,{strokeDasharray:"3 3",stroke:"#e5e7eb",vertical:!1}),e.jsx($t,{dataKey:"date",tickFormatter:Ls,stroke:"#9ca3af",fontSize:12,tickLine:!1,axisLine:{stroke:"#e5e7eb"}}),e.jsx(Wt,{stroke:"#9ca3af",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(Ot,{content:({active:o,payload:u})=>!o||!u?null:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:ea(u[0]?.payload?.date)}),u.map(m=>{const c=s.find(d=>d.key===m.dataKey);return e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:m.color}}),e.jsxs("span",{className:"text-gray-600",children:[c?.label,":"]}),e.jsx("span",{className:"font-medium",children:m.value})]},m.dataKey)})]})}),s.map(o=>e.jsx(Vt,{type:"monotone",dataKey:o.key,stroke:o.color,strokeWidth:2,dot:!1,activeDot:{r:4,strokeWidth:2,stroke:"#fff"}},o.key))]})}),e.jsx("div",{className:"flex justify-center gap-6 mt-4",children:s.map(o=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:o.color}}),e.jsx("span",{className:"text-gray-600",children:o.label})]},o.key))})]}));il.displayName="MultiMetricChart";const ta=t=>t>1?t:t*100,nl=t=>{const a=ta(t);return a>=85?{label:"Very High",color:"green",description:"Strong personal evidence"}:a>=70?{label:"High",color:"primary",description:"Good personal evidence"}:a>=50?{label:"Moderate",color:"blue",description:"Mixed evidence"}:a>=30?{label:"Low",color:"amber",description:"Limited personal data"}:{label:"Exploratory",color:"gray",description:"Based mostly on population data"}},ol={green:{bg:"bg-green-500",text:"text-green-600",light:"bg-green-100",ring:"ring-green-500"},primary:{bg:"bg-primary-500",text:"text-primary-600",light:"bg-primary-100",ring:"ring-primary-500"},blue:{bg:"bg-blue-500",text:"text-blue-600",light:"bg-blue-100",ring:"ring-blue-500"},amber:{bg:"bg-amber-500",text:"text-amber-600",light:"bg-amber-100",ring:"ring-amber-500"},gray:{bg:"bg-gray-400",text:"text-gray-600",light:"bg-gray-100",ring:"ring-gray-400"}},ll={sm:{bar:"h-1.5",text:"text-xs",ring:32,stroke:3},md:{bar:"h-2",text:"text-sm",ring:48,stroke:4},lg:{bar:"h-3",text:"text-base",ring:64,stroke:5}},cl=x.forwardRef(({className:t,value:a,size:s="md",showLabel:r=!0,showTooltip:i=!0,animated:n=!0,variant:o="bar",...u},m)=>{const c=ta(a),d=nl(c),l=ol[d.color],h=ll[s],p=ds(c,{duration:n?500:0});if(o==="badge")return e.jsxs("div",{ref:m,className:g("inline-flex items-center gap-1.5",t),...u,children:[e.jsxs("span",{className:g("inline-flex items-center px-2 py-0.5 rounded-full font-medium",l.light,l.text,h.text),children:[Math.round(c),"%",r&&e.jsx("span",{className:"ml-1 opacity-75",children:d.label})]}),i&&e.jsx(Ge,{content:d.description})]});if(o==="ring"){const f=h.ring,v=(f-h.stroke*2)/2,j=2*Math.PI*v,k=j-p/100*j;return e.jsxs("div",{ref:m,className:g("relative inline-flex",t),...u,children:[e.jsxs("svg",{width:f,height:f,className:"-rotate-90",children:[e.jsx("circle",{cx:f/2,cy:f/2,r:v,fill:"none",strokeWidth:h.stroke,className:"stroke-gray-200"}),e.jsx(P.circle,{cx:f/2,cy:f/2,r:v,fill:"none",strokeWidth:h.stroke,strokeLinecap:"round",className:l.ring.replace("ring-","stroke-"),initial:{strokeDashoffset:j},animate:{strokeDashoffset:k},transition:{duration:n?.5:0},style:{strokeDasharray:j}})]}),e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:e.jsxs("span",{className:g("font-bold",l.text,h.text),children:[Math.round(p),"%"]})}),i&&e.jsx("div",{className:"absolute -top-1 -right-1",children:e.jsx(Ge,{content:`${d.label}: ${d.description}`,iconSize:12})})]})}if(o==="arc"){const f=h.ring*1.5,v=f/2-h.stroke,j=-135,k=135,N=k-j,b=j+p/100*N,w=A=>{const C=A*Math.PI/180;return{x:f/2+v*Math.cos(C),y:f/2+v*Math.sin(C)}},y=w(j),S=w(k),T=w(b),R=`M ${y.x} ${y.y} A ${v} ${v} 0 1 1 ${S.x} ${S.y}`,$=`M ${y.x} ${y.y} A ${v} ${v} 0 ${p>50?1:0} 1 ${T.x} ${T.y}`;return e.jsxs("div",{ref:m,className:g("relative inline-flex flex-col items-center",t),...u,children:[e.jsxs("svg",{width:f,height:f*.7,children:[e.jsx("path",{d:R,fill:"none",strokeWidth:h.stroke,strokeLinecap:"round",className:"stroke-gray-200"}),e.jsx(P.path,{d:$,fill:"none",strokeWidth:h.stroke,strokeLinecap:"round",className:l.ring.replace("ring-","stroke-"),initial:{pathLength:0},animate:{pathLength:1},transition:{duration:n?.5:0}})]}),e.jsxs("div",{className:"absolute bottom-0 flex flex-col items-center",children:[e.jsxs("span",{className:g("font-bold",l.text,s==="lg"?"text-xl":"text-lg"),children:[Math.round(p),"%"]}),r&&e.jsx("span",{className:"text-xs text-gray-500",children:d.label})]})]})}return e.jsxs("div",{ref:m,className:g("w-full",t),...u,children:[r&&e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsxs("span",{className:g("font-medium",l.text,h.text),children:[Math.round(c),"% ",d.label]}),i&&e.jsx(Ge,{content:d.description})]}),e.jsx("div",{className:g("w-full rounded-full bg-gray-200 overflow-hidden",h.bar),children:e.jsx(P.div,{className:g("h-full rounded-full",l.bg),initial:{width:0},animate:{width:`${p}%`},transition:{duration:n?.5:0}})})]})});cl.displayName="CertaintyIndicator";const dl=x.forwardRef(({className:t,personalWeight:a,showLabels:s=!0,animated:r=!0,...i},n)=>{const o=ta(a),u=ds(o,{duration:r?500:0});return e.jsxs("div",{ref:n,className:g("w-full",t),"data-tour":"evidence-weight",...i,children:[s&&e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[e.jsxs("span",{children:["Your Data (",Math.round(u),"%)"]}),e.jsxs("span",{children:["Population (",Math.round(100-u),"%)"]})]}),e.jsxs("div",{className:"h-2 rounded-full bg-gray-200 overflow-hidden flex",children:[e.jsx(P.div,{className:"h-full bg-primary-500",initial:{width:0},animate:{width:`${u}%`},transition:{duration:r?.5:0}}),e.jsx("div",{className:"h-full bg-gray-300 flex-1"})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[e.jsx("span",{className:"text-primary-600 font-medium",children:"Personal evidence"}),e.jsx("span",{className:"text-gray-500",children:"Population prior"})]})]})});dl.displayName="EvidenceWeight";const ml={plateau_up:{name:"Saturating Benefit",shortName:"SAT-BEN",geometry:"Concave Ascending → Plateau",curvature:"concave",symmetry:"right-asymmetric",interpretation:"Benefits increase up to a threshold, then level off. More is not better past θ.",thresholdMeaning:"Point of diminishing returns - you've captured most of the benefit",recommendation:"Aim to reach θ, but don't stress about exceeding it",riskProfile:"safe",icon:"📈→",color:"#10B981",fill:"rgba(16, 185, 129, 0.15)"},plateau_down:{name:"Threshold Decay",shortName:"THR-DEC",geometry:"Plateau → Convex Descending",curvature:"convex",symmetry:"left-asymmetric",interpretation:"Outcome is stable until threshold, then declines rapidly. Stay below θ.",thresholdMeaning:"Critical tipping point - exceeding this triggers negative effects",recommendation:"Stay below θ with safety margin",riskProfile:"caution",icon:"→📉",color:"#EF4444",fill:"rgba(239, 68, 68, 0.15)"},v_min:{name:"Optimal Minimum",shortName:"OPT-MIN",geometry:"Convex Parabola (U-Shape)",curvature:"parabolic",symmetry:"symmetric",interpretation:`Both too little and too much are harmful. There's a "sweet spot" at θ.`,thresholdMeaning:"Goldilocks point - the optimal balance between extremes",recommendation:"Target θ precisely; deviation in either direction hurts",riskProfile:"optimize",icon:"∪",color:"#06B6D4",fill:"rgba(6, 182, 212, 0.15)"},v_max:{name:"Optimal Peak",shortName:"OPT-PK",geometry:"Concave Parabola (Inverted U)",curvature:"parabolic",symmetry:"symmetric",interpretation:"Maximum benefit at θ, with diminishing returns on either side.",thresholdMeaning:"Peak performance point - this is where you want to be",recommendation:"Aim for θ; both under and over are suboptimal",riskProfile:"optimize",icon:"∩",color:"#8B5CF6",fill:"rgba(139, 92, 246, 0.15)"},linear:{name:"Linear Dose-Response",shortName:"LIN-DR",geometry:"Linear Monotonic",curvature:"linear",symmetry:"symmetric",interpretation:"Effect scales proportionally with dose. No threshold effects.",thresholdMeaning:"Reference point only - effects are continuous across the range",recommendation:"More (or less) directly translates to proportional change",riskProfile:"safe",icon:"↗",color:"#6B7280",fill:"rgba(107, 114, 128, 0.15)"}};function ul(t,a){return!a||a==="at_optimal"?{label:"At Optimal",severity:"good",advice:"Maintain current behavior"}:t==="plateau_up"?a==="below_optimal"?{label:"Below Saturation",severity:"moderate",advice:"Room to increase for more benefit"}:{label:"Above Saturation",severity:"good",advice:"At or past full benefit - no action needed"}:t==="plateau_down"?a==="below_optimal"?{label:"In Safe Zone",severity:"good",advice:"Well below threshold - maintain"}:{label:"Past Threshold",severity:"poor",advice:"Reduce to get back below θ"}:t==="v_min"||t==="v_max"?a==="below_optimal"?{label:"Below Optimal",severity:"moderate",advice:"Increase toward θ"}:{label:"Above Optimal",severity:"moderate",advice:"Decrease toward θ"}:{label:a==="below_optimal"?"Lower Range":"Higher Range",severity:"moderate",advice:"Adjust based on goals"}}const hl={plateau_up:{line:"#10B981",fill:"rgba(16, 185, 129, 0.1)",threshold:"#10B981"},plateau_down:{line:"#EF4444",fill:"rgba(239, 68, 68, 0.1)",threshold:"#EF4444"},v_min:{line:"#06B6D4",fill:"rgba(6, 182, 212, 0.1)",threshold:"#06B6D4"},v_max:{line:"#8B5CF6",fill:"rgba(139, 92, 246, 0.1)",threshold:"#8B5CF6"},linear:{line:"#6B7280",fill:"rgba(107, 114, 128, 0.1)",threshold:"#6B7280"}};function pl(t,a,s,r){const i=a-r*2,n=s-r*2,o=r,u=s-r,m=a-r,c=r,d=a/2;switch(t){case"plateau_up":return`M ${o} ${u}
              Q ${o+i*.3} ${u-n*.3} ${d} ${u-n*.8}
              L ${m} ${u-n*.8}`;case"plateau_down":return`M ${o} ${c+n*.2}
              L ${d} ${c+n*.2}
              Q ${d+i*.2} ${c+n*.3} ${m} ${u}`;case"v_min":return`M ${o} ${c+n*.2}
              Q ${o+i*.25} ${u-n*.1} ${d} ${u-n*.15}
              Q ${d+i*.25} ${u-n*.1} ${m} ${c+n*.2}`;case"v_max":return`M ${o} ${u-n*.2}
              Q ${o+i*.25} ${c+n*.1} ${d} ${c+n*.15}
              Q ${d+i*.25} ${c+n*.1} ${m} ${u-n*.2}`;default:return`M ${o} ${u} L ${m} ${c}`}}function va(t,a,s,r){const i=s-r*2,n=s-r,o=r;switch(t){case"plateau_up":return a<.5?n-a*2*i*.8:n-i*.8;case"plateau_down":return a<.5?o+i*.2:o+i*.2+(a-.5)*2*i*.6;case"v_min":const u=Math.abs(a-.5)*2;return n-i*.15-u*i*.65;case"v_max":const m=Math.abs(a-.5)*2;return o+i*.15+m*i*.65;default:return n-a*i}}function xl({params:t,width:a=280,height:s=140,showLabels:r=!0,showCurrentValue:i=!0,compact:n=!1,className:o}){const[u,m]=x.useState(!1),[c,d]=x.useState({x:0,y:0}),l=typeof a=="number"?a:280,h=s,p=n?15:20,f=Me=>{d({x:Me.clientX,y:Me.clientY})},v=240,j=200,k=12,N=typeof window<"u"&&c.x+k+v>window.innerWidth?c.x-v-k:c.x+k,b=typeof window<"u"&&c.y+k+j>window.innerHeight?c.y-j-k:c.y+k,w=hl[t.curveType],y=ml[t.curveType],S=ul(t.curveType,t.currentStatus),T=.5,R=p+(l-p*2)*T,$=va(t.curveType,T,h,p),A=x.useMemo(()=>{if(t.currentValue===void 0)return null;const Me=t.theta.value,sa=Me*.6,Qs=(t.currentValue-(Me-sa))/(sa*2);return Math.max(.05,Math.min(.95,Qs))},[t.currentValue,t.theta.value]),C=A!==null?p+(l-p*2)*A:null,D=A!==null?va(t.curveType,A,h,p):null,E=pl(t.curveType,l,h,p),Z={safe:{bg:"bg-emerald-500",text:"text-emerald-100"},caution:{bg:"bg-amber-500",text:"text-amber-100"},risk:{bg:"bg-rose-500",text:"text-rose-100"},optimize:{bg:"bg-violet-500",text:"text-violet-100"}},Ce={good:"text-emerald-400",moderate:"text-amber-400",poor:"text-rose-400"};return e.jsxs("div",{className:`relative ${o||""}`,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),onMouseMove:f,children:[e.jsxs("svg",{width:a==="100%"?"100%":l,height:h,viewBox:`0 0 ${l} ${h}`,preserveAspectRatio:"xMidYMid meet",className:"overflow-visible cursor-help",children:[e.jsx("defs",{children:e.jsx("pattern",{id:`grid-${t.source}`,width:"20",height:"20",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 20 0 L 0 0 0 20",fill:"none",stroke:"#E5E7EB",strokeWidth:"0.5"})})}),e.jsx("rect",{x:p,y:p,width:l-p*2,height:h-p*2,fill:`url(#grid-${t.source})`}),e.jsx("line",{x1:p,y1:h-p,x2:l-p,y2:h-p,stroke:"#D1D5DB",strokeWidth:"1"}),e.jsx("line",{x1:p,y1:p,x2:p,y2:h-p,stroke:"#D1D5DB",strokeWidth:"1"}),e.jsx("path",{d:`${E} L ${l-p} ${h-p} L ${p} ${h-p} Z`,fill:w.fill}),e.jsx("path",{d:E,fill:"none",stroke:w.line,strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("line",{x1:R,y1:p,x2:R,y2:h-p,stroke:w.threshold,strokeWidth:"1.5",strokeDasharray:"4 2"}),e.jsx("circle",{cx:R,cy:$,r:"6",fill:w.threshold}),e.jsx("circle",{cx:R,cy:$,r:"3",fill:"white"}),!n&&e.jsx(e.Fragment,{children:e.jsx("rect",{x:R-15,y:h-p+5,width:30,height:4,rx:2,fill:w.threshold,opacity:.3})}),i&&C!==null&&D!==null&&e.jsxs(e.Fragment,{children:[e.jsx("line",{x1:C,y1:D,x2:C,y2:h-p,stroke:"#F59E0B",strokeWidth:"1",strokeDasharray:"2 2"}),e.jsx("circle",{cx:C,cy:D,r:"5",fill:"#F59E0B"}),e.jsx("circle",{cx:C,cy:D,r:"2",fill:"white"})]}),r&&!n&&e.jsx(e.Fragment,{children:C!==null&&e.jsxs("text",{x:C,y:p-5,textAnchor:"middle",className:"text-[10px] fill-amber-600 font-bold",children:["You: ",t.currentValue]})}),!n&&e.jsxs("g",{children:[e.jsx("rect",{x:l-p-52,y:p+2,width:50,height:16,fill:y.fill,stroke:y.color,strokeWidth:"1"}),e.jsxs("text",{x:l-p-27,y:p+13,textAnchor:"middle",className:"text-[9px] font-bold uppercase",fill:y.color,children:[y.icon," ",y.shortName]})]}),r&&!n&&e.jsxs("text",{x:R,y:h-4,textAnchor:"middle",className:"text-[10px] fill-gray-600 font-bold",children:["θ=",t.theta.displayValue]})]}),u&&!n&&e.jsxs("div",{className:"fixed z-[9999] bg-black text-white text-left border pointer-events-none shadow-lg",style:{left:N,top:b,width:v,maxHeight:j,borderColor:y.color},children:[e.jsxs("div",{className:"px-2 py-1 flex items-center justify-between",style:{backgroundColor:y.color},children:[e.jsxs("span",{className:"text-[11px] font-black uppercase tracking-tight truncate",children:[y.icon," ",y.name]}),e.jsx("span",{className:"text-[9px] font-mono opacity-80 ml-1 flex-shrink-0",children:y.shortName})]}),e.jsxs("div",{className:"p-2.5 space-y-2",children:[e.jsxs("div",{className:"text-[10px] text-gray-400",children:[e.jsx("span",{className:"capitalize",children:y.curvature}),e.jsx("span",{className:"mx-1",children:"·"}),e.jsx("span",{children:y.geometry})]}),e.jsx("p",{className:"text-[11px] text-gray-300 leading-relaxed",children:y.interpretation}),e.jsxs("div",{className:"text-[10px] text-gray-400 pt-1 border-t border-white/10",children:[e.jsx("span",{className:"text-gray-500 uppercase tracking-wider text-[9px]",children:"At θ:"}),e.jsx("span",{className:"ml-1",children:y.thresholdMeaning})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-mono pt-1 border-t border-white/20",children:[e.jsxs("span",{className:"text-white font-bold",children:["θ=",t.theta.displayValue]}),e.jsxs("span",{className:"text-gray-500",children:["n=",t.observations]}),e.jsx("span",{className:`ml-auto px-1 py-0.5 text-[9px] font-bold uppercase ${Z[y.riskProfile].bg} ${Z[y.riskProfile].text}`,children:y.riskProfile})]}),t.currentStatus&&e.jsxs("div",{className:"flex items-center gap-1 text-[10px]",children:[e.jsx("span",{className:`font-bold ${Ce[S.severity]}`,children:S.label}),t.currentValue!==void 0&&e.jsxs("span",{className:"text-gray-500",children:["(",t.currentValue,")"]})]})]})]})]})}function gl({params:t,variant:a="full"}){const s=t.curveType==="v_min"||t.curveType==="v_max";return a==="compact"?e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxs("span",{className:"font-mono font-bold text-black",children:["θ=",t.theta.displayValue]}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsxs("span",{className:`font-mono font-bold ${t.betaAbove.value<0?"text-rose-600":"text-emerald-600"}`,children:["β=",t.betaAbove.description]})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-0",children:[e.jsxs("div",{className:`p-3 border border-r-0 ${s?"bg-sky-50 border-sky-200":"bg-emerald-50 border-emerald-200"}`,children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1",children:s?"Below θ":"Below Threshold"}),e.jsx("div",{className:`font-mono font-black text-lg ${t.betaBelow.value>0?"text-emerald-600":"text-rose-600"}`,children:t.betaBelow.description})]}),e.jsxs("div",{className:`p-3 border ${s?"bg-violet-50 border-violet-200":"bg-rose-50 border-rose-200"}`,children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1",children:s?"Above θ":"Above Threshold"}),e.jsx("div",{className:`font-mono font-black text-lg ${t.betaAbove.value>0?"text-emerald-600":"text-rose-600"}`,children:t.betaAbove.description})]})]})}const fl={baseline:{bg:"#96b9d0",text:"#6a95b3"},positive:{bg:"#89CCF0",text:"#5ba8d4"},negative:{bg:"#f8c8dc",text:"#e99bbe"},total:{bg:"#b8aadd",text:"#9182c4"}};function bl({items:t,title:a="Outcome Decomposition",unit:s="min",className:r=""}){let i=0,n=0,o=0;t.forEach(l=>{l.type==="baseline"?i=l.value:l.type!=="total"&&(i+=l.value),n=Math.max(n,i),o=Math.min(o,i)});const u=n-o,m=90/Math.max(u,n,100),c=o<0?Math.abs(o)*m:0;let d=0;return e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-100 "+r,children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:a}),e.jsx("div",{className:"space-y-3",children:t.map((l,h)=>{const p=l.type==="baseline"?0:d;l.type!=="total"&&(d+=l.value);const f=fl[l.type];let v,j;return l.type==="total"||l.type==="baseline"?(v=c,j=Math.abs(l.value)*m):l.value>=0?(v=c+p*m,j=l.value*m):(v=c+(p+l.value)*m,j=Math.abs(l.value)*m),v=Math.max(0,Math.min(v,95)),j=Math.min(j,95-v),e.jsxs(P.div,{className:"flex items-center gap-3",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:h*.1},children:[e.jsx("div",{className:"w-28 text-sm text-gray-600 text-right",children:l.label}),e.jsx("div",{className:"flex-1 h-8 bg-gray-50 rounded relative overflow-hidden",children:e.jsx("div",{className:"absolute h-full rounded transition-all",style:{left:`${v}%`,width:`${j}%`,backgroundColor:f.bg}})}),e.jsxs("div",{className:"w-20 text-sm font-mono",style:{color:f.text},children:[l.type==="baseline"||l.type==="total"?"":l.value>=0?"+":"",l.value," ",s]})]},l.label)})}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 flex items-center justify-between text-xs text-gray-500",children:[e.jsx("span",{children:"Waterfall shows contribution of each factor"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 rounded",style:{backgroundColor:"#89CCF0"}})," Positive"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 rounded",style:{backgroundColor:"#f8c8dc"}})," Negative"]})]})]})]})}function yl({className:t=""}){const a=[{label:"Baseline",value:75,type:"baseline"},{label:"Caffeine cutoff",value:8,type:"positive"},{label:"Late meal",value:-5,type:"negative"},{label:"Sleep debt",value:-3,type:"negative"},{label:"Cool room",value:4,type:"positive"},{label:"Predicted",value:79,type:"total"}];return e.jsx(bl,{items:a,title:"Tonight's Sleep Score",unit:"pts",className:t})}const vl={sleep:"ðŸŒ™",metabolic:"âš¡",recovery:"ðŸ’š",cognitive:"ðŸ§ ",activity:"ðŸƒ",stress:"ðŸ§˜",nutrition:"ðŸ¥—",cardio:"â¤ï¸",mood:"ðŸ˜Š"},jl={sleep:"bg-secondary-50/40 border-secondary-100",metabolic:"bg-accent-50/40 border-accent-100",recovery:"bg-primary-50/40 border-primary-100",cognitive:"bg-secondary-50/30 border-secondary-100",activity:"bg-primary-50/30 border-primary-100",stress:"bg-accent-50/30 border-accent-100",nutrition:"bg-emerald-50/40 border-emerald-100",cardio:"bg-rose-50/40 border-rose-100",mood:"bg-amber-50/40 border-amber-100"},ja={plateau_up:"â†—",plateau_down:"â†˜",v_min:"âˆª",v_max:"âˆ©",linear:"â†’"},wa=({insight:t,onClose:a})=>{const[s,r]=x.useState(!1),i=JSON.stringify(t,null,2),n=async()=>{await navigator.clipboard.writeText(i),r(!0),setTimeout(()=>r(!1),2e3)};return e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm",onClick:a,children:e.jsxs(P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.2},className:"w-full max-w-3xl max-h-[80vh] bg-white rounded-xl shadow-2xl overflow-hidden",onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-slate-200 bg-slate-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:e.jsx(ye,{className:"w-4 h-4 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-800",children:"Insight Data"}),e.jsx("p",{className:"text-xs text-slate-500",children:"JSON representation of this insight"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:n,className:g("flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-colors",s?"bg-emerald-50 text-emerald-600":"bg-slate-100 text-slate-600 hover:bg-slate-200"),children:[s?e.jsx(K,{className:"w-3.5 h-3.5"}):e.jsx(Ne,{className:"w-3.5 h-3.5"}),s?"Copied!":"Copy"]}),e.jsx("button",{onClick:a,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(oe,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"overflow-auto max-h-[calc(80vh-80px)]",children:e.jsx("pre",{className:"p-5 text-xs font-mono leading-relaxed text-slate-700 bg-slate-900 overflow-x-auto",children:e.jsx("code",{className:"language-json",children:i.split(`
`).map((o,u)=>e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"select-none text-slate-600 w-10 text-right pr-4 flex-shrink-0",children:u+1}),e.jsx("span",{className:"text-slate-200",children:o.replace(/(".*?")(:\s*)?(".*?"|[\d.]+|true|false|null)?/g,(m,c,d,l)=>{if(d&&l){const h="text-primary-400",p=l.startsWith('"')?"text-emerald-400":l==="true"||l==="false"?"text-amber-400":l==="null"?"text-slate-500":"text-violet-400";return`<span class="${h}">${c}</span>${d}<span class="${p}">${l}</span>`}else return d?`<span class="text-primary-400">${c}</span>${d}`:`<span class="${c.startsWith('"')?"text-emerald-400":"text-violet-400"}">${c}</span>`}).split(/<span|<\/span>/).map((m,c)=>{if(m.startsWith(' class="')){const d=m.match(/class="([^"]+)">(.*)/s);if(d)return e.jsx("span",{className:d[1],children:d[2]},c)}return m})})]},u))})})}),e.jsx("div",{className:"px-5 py-3 border-t border-slate-200 bg-slate-50",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[e.jsx("span",{children:"Format: JSON (JavaScript Object Notation)"}),e.jsxs("span",{children:[i.split(`
`).length," lines"]})]})})]})})},aa=x.forwardRef(({className:t,insight:a,onAction:s,expanded:r,showEvidence:i=!0,interactive:n=!0,variant:o="default",...u},m)=>{const[c,d]=x.useState(!1),[l,h]=x.useState(!1),p=r!==void 0?r:c,f=()=>{r===void 0&&d(!c)},v=vl[a.category]||"ðŸ’¡",j=!!a.causalParams,k=a.variableType==="load"||a.variableType==="marker",N=jl[a.category]||"";return o==="compact"?e.jsxs(e.Fragment,{children:[e.jsx(M,{ref:m,className:g("p-4",N,n&&"cursor-pointer",t),onClick:n?()=>s?.("view"):void 0,...u,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-lg",children:v}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[e.jsx(St,{category:a.category,size:"sm"}),e.jsxs("span",{className:"text-xs font-medium text-primary-600",children:[Math.round(a.certainty*100),"%"]}),j&&e.jsx("span",{className:"text-[10px] text-slate-400",title:a.causalParams.curveType,children:ja[a.causalParams.curveType]}),e.jsx("button",{onClick:b=>{b.stopPropagation(),h(!0)},className:"ml-auto p-1 text-slate-400 hover:text-primary-600 hover:bg-primary-50 rounded transition-colors",title:"View JSON",children:e.jsx(ye,{className:"w-3.5 h-3.5"})})]}),e.jsx("p",{className:"text-sm font-medium text-slate-800 line-clamp-2",children:a.title}),j&&e.jsxs("p",{className:"text-xs text-slate-500 mt-1.5 font-mono",children:["Î¸ = ",a.causalParams.theta.displayValue]})]})]})}),e.jsx(Y,{children:l&&e.jsx(wa,{insight:a,onClose:()=>h(!1)})})]}):e.jsxs(e.Fragment,{children:[e.jsxs(M,{ref:m,className:g("overflow-hidden",N,t),padding:"none","data-tour":"insight-cards",...u,children:[e.jsxs("div",{className:"p-5 pb-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:v}),e.jsx(St,{category:a.category}),j&&e.jsx("span",{className:"px-2 py-0.5 text-[10px] text-slate-500 bg-slate-50 rounded-full",title:`Curve type: ${a.causalParams.curveType}`,children:ja[a.causalParams.curveType]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>h(!0),className:"p-1.5 text-slate-400 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"View JSON",children:e.jsx(ye,{className:"w-4 h-4"})}),e.jsx(xs,{certainty:a.certainty})]})]}),e.jsx("h3",{className:"text-base font-semibold text-slate-800 tracking-tight mb-1",children:a.title}),e.jsx("p",{className:"text-sm text-slate-500",children:a.headline}),a.dataSources&&a.dataSources.length>0&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-[9px] font-medium text-slate-400 uppercase tracking-wider",children:"Data:"}),a.dataSources.map((b,w)=>{const S={oura:"bg-violet-100 text-violet-700 border-violet-200",dexcom:"bg-emerald-100 text-emerald-700 border-emerald-200","apple-watch":"bg-slate-100 text-slate-700 border-slate-200",fitbit:"bg-teal-100 text-teal-700 border-teal-200",bloodwork:"bg-rose-100 text-rose-700 border-rose-200","Vitals+-app":"bg-amber-100 text-amber-700 border-amber-200",weather:"bg-sky-100 text-sky-700 border-sky-200",whoop:"bg-orange-100 text-orange-700 border-orange-200",levels:"bg-emerald-100 text-emerald-700 border-emerald-200"}[b.toLowerCase()]||"bg-slate-100 text-slate-600 border-slate-200",T=b.replace(/-/g," ").replace(/\b\w/g,R=>R.toUpperCase());return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 text-[10px] font-medium rounded-full border ${S}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current opacity-60"}),T]},w)}),a.dataSources.length>1&&e.jsx("span",{className:"text-[9px] text-primary-600 font-medium ml-1",children:"Multi-source insight"})]}),e.jsx("div",{className:"mt-4 p-4 bg-primary-50/50 rounded-lg border-l-[3px] border-l-serif-cyan",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(U,{className:"w-4 h-4 text-primary-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-800",children:a.recommendation}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:a.explanation})]})]})}),a.showWork&&e.jsx("div",{className:"mt-4 p-4 bg-amber-50/70 rounded-lg border border-amber-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-1.5 bg-amber-100 rounded",children:e.jsx(we,{className:"w-3.5 h-3.5 text-amber-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:"text-[10px] font-bold text-amber-700 uppercase tracking-wider",children:"Causal Analysis"}),e.jsxs("span",{className:"text-[9px] px-2 py-0.5 bg-amber-100 text-amber-700 rounded-full font-medium",children:["n=",a.evidence.personalDays," days Â· ",Math.round(a.certainty*100),"% confidence"]})]}),e.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:a.showWork}),e.jsx("p",{className:"text-[10px] text-amber-600 mt-2 italic",children:"This insight uses causal inference (not just correlation) to control for confounding variables."})]})]})}),j&&o==="detailed"&&e.jsxs("div",{className:"mt-5",children:[e.jsx("h4",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-wider mb-2",children:"Dose-Response Curve"}),e.jsx("div",{className:"bg-slate-50/50 rounded-lg p-2",children:e.jsx(xl,{params:a.causalParams,width:"100%",height:120,showCurrentValue:k})})]}),j&&e.jsxs("div",{className:"mt-5",children:[e.jsx("h4",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-wider mb-2",children:"Effect Sizes (Î²)"}),e.jsx(gl,{params:a.causalParams})]}),j&&a.causalParams.currentStatus&&k&&e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-wider",children:"Status:"}),e.jsxs("span",{className:g("px-2.5 py-1 text-xs font-medium rounded-full",a.causalParams.currentStatus==="at_optimal"&&"bg-emerald-50 text-emerald-600",a.causalParams.currentStatus==="above_optimal"&&"bg-amber-50 text-amber-600",a.causalParams.currentStatus==="below_optimal"&&"bg-primary-50 text-primary-600"),children:[a.causalParams.currentStatus==="at_optimal"&&"At optimal",a.causalParams.currentStatus==="above_optimal"&&"Above Î¸",a.causalParams.currentStatus==="below_optimal"&&"Below Î¸"]}),a.causalParams.currentValue!==void 0&&e.jsxs("span",{className:"text-xs font-mono text-slate-400",children:["(",a.causalParams.currentValue,")"]})]}),a.populationThreshold&&e.jsxs("div",{className:"mt-5 p-4 bg-gradient-to-r from-slate-50 to-primary-50/30 rounded-lg border border-primary-100",children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx("span",{className:"text-[10px] font-bold text-primary-600 uppercase tracking-wider",children:"Your Threshold vs Population"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 text-center p-3 bg-white rounded-lg border border-slate-200",children:[e.jsx("div",{className:"text-lg font-semibold text-slate-500",children:a.populationThreshold.value}),e.jsx("div",{className:"text-[10px] text-slate-400 uppercase tracking-wider",children:a.populationThreshold.label})]}),e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("span",{className:"text-primary-500 text-lg",children:"â†’"})}),e.jsxs("div",{className:"flex-1 text-center p-3 bg-primary-50 rounded-lg border-2 border-primary-300",children:[e.jsx("div",{className:"text-lg font-bold text-primary-700",children:a.cause.threshold}),e.jsx("div",{className:"text-[10px] text-primary-600 uppercase tracking-wider font-medium",children:"Your Threshold"})]})]}),a.populationThreshold.variance&&e.jsx("div",{className:"mt-3 text-center",children:e.jsxs("span",{className:"inline-block px-3 py-1 bg-emerald-50 text-emerald-700 text-xs font-medium rounded-full border border-emerald-200",children:["âœ“ ",a.populationThreshold.variance]})})]}),a.comparison&&e.jsxs("div",{className:"mt-5 grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:g("p-4 text-center rounded-lg",a.outcome.direction==="negative"?"bg-rose-50":"bg-slate-50"),children:[e.jsx("div",{className:"text-2xl font-semibold text-slate-800",children:a.comparison.before.value}),e.jsx("div",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-wider mt-1",children:a.comparison.before.label})]}),e.jsxs("div",{className:g("p-4 text-center rounded-lg",a.outcome.direction==="positive"||a.outcome.direction==="negative"?"bg-emerald-50":"bg-slate-50"),children:[e.jsx("div",{className:"text-2xl font-semibold text-slate-800",children:a.comparison.after.value}),e.jsx("div",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-wider mt-1",children:a.comparison.after.label})]})]})]}),e.jsx("div",{className:"px-5 pb-4",children:e.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between mb-1.5",children:[e.jsx("span",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-wider",children:"Personal"}),e.jsxs("span",{className:"font-medium text-primary-600",children:[Math.round(a.evidence.personalWeight*100),"%"]})]}),e.jsx("div",{className:"h-1.5 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-serif-cyan rounded-full",style:{width:`${a.evidence.personalWeight*100}%`}})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between mb-1.5",children:[e.jsx("span",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-wider",children:"Population"}),e.jsxs("span",{className:"font-medium text-slate-500",children:[Math.round(a.evidence.populationWeight*100),"%"]})]}),e.jsx("div",{className:"h-1.5 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-slate-300 rounded-full",style:{width:`${a.evidence.populationWeight*100}%`}})})]}),j&&e.jsxs("div",{className:"font-mono text-slate-400 text-[10px]",children:["n=",a.causalParams.observations]})]})}),i&&o==="detailed"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:f,className:g("w-full px-5 py-3 flex items-center justify-between text-[10px] font-medium uppercase tracking-wider","hover:bg-slate-50 border-t border-slate-100 text-slate-500",q.colors),children:[e.jsx("span",{children:"Show Work & Details"}),p?e.jsx(Oa,{className:"w-4 h-4"}):e.jsx(ue,{className:"w-4 h-4"})]}),e.jsx(Y,{children:p&&e.jsx(P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden","data-tour":"insight-evidence",children:e.jsxs("div",{className:"px-5 pb-5 space-y-4 border-t border-slate-100 pt-4 bg-slate-50/50",children:[a.whyNow&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-wider mb-1.5",children:"Why Now?"}),e.jsx("p",{className:"text-sm text-slate-600",children:a.whyNow})]}),a.holdoutPreview&&e.jsxs("div",{className:"p-4 bg-secondary-50 rounded-lg border-l-[3px] border-l-serif-lavender",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(we,{className:"w-3.5 h-3.5 text-secondary-500"}),e.jsx("h4",{className:"text-[10px] font-medium text-secondary-600 uppercase tracking-wider",children:"Predicted Impact"})]}),e.jsxs("p",{className:"text-sm font-medium text-secondary-700",children:[a.holdoutPreview.expectedChange>0?"+":"",a.holdoutPreview.expectedChange," ",a.holdoutPreview.unit," in ",a.holdoutPreview.horizon]})]}),a.dataSources&&a.dataSources.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-wider mb-2",children:"Data Sources"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:a.dataSources.map((b,w)=>e.jsx("span",{className:"px-2.5 py-1 bg-white border border-slate-200 text-xs text-slate-600 rounded-full",children:b.replace(/-/g," ")},w))})]}),a.causalChain&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-wider mb-2",children:"Causal Path"}),e.jsx("div",{className:"flex items-center gap-1.5 text-sm flex-wrap",children:a.causalChain.map((b,w)=>e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"px-2.5 py-1 bg-white border border-slate-200 text-slate-700 rounded-lg text-xs",children:b}),w<a.causalChain.length-1&&e.jsx("span",{className:"text-slate-300",children:"â†’"})]},w))})]})]})})})]}),a.actionable&&e.jsxs("div",{className:"px-5 pb-5 flex items-center gap-2",children:[a.suggestedAction&&e.jsx(L,{size:"sm",variant:"primary",onClick:()=>s?.(a.suggestedAction),children:a.suggestedAction}),e.jsx(L,{size:"sm",variant:"ghost",onClick:()=>s?.("simulate"),children:"Simulate"})]})]}),e.jsx(Y,{children:l&&e.jsx(wa,{insight:a,onClose:()=>h(!1)})})]})});aa.displayName="InsightCard";const Es=x.forwardRef(({className:t,insights:a,onInsightAction:s,emptyState:r,variant:i="default",...n},o)=>a.length===0&&r?e.jsx("div",{ref:o,className:t,...n,children:r}):e.jsx("div",{ref:o,className:g("grid gap-5",i==="compact"?"grid-cols-1 md:grid-cols-2":"grid-cols-1 lg:grid-cols-2",t),...n,children:a.map(u=>e.jsx(aa,{insight:u,variant:i,onAction:m=>s?.(u.id,m)},u.id))}));Es.displayName="InsightGrid";const wl=[{value:30,label:"Exploratory",description:"Show all insights including low certainty"},{value:50,label:"Moderate",description:"Balanced between coverage and confidence"},{value:70,label:"High",description:"Only show confident insights"},{value:85,label:"Very High",description:"Only the most certain insights"}],$s=x.forwardRef(({className:t,value:a,onChange:s,showDescription:r=!0,showPresets:i=!1,label:n="Certainty Threshold",...o},u)=>{const{certaintyThreshold:m,setCertaintyThreshold:c}=ke(),d=a!==void 0?a:m,l=s||c,h=x.useCallback(p=>p>=85?"Showing only insights with very high confidence. You may miss some useful patterns.":p>=70?"Showing insights where we have strong evidence from your personal data.":p>=50?"Balanced view showing insights with moderate to high certainty.":p>=30?"Showing more insights, including those based partly on population data.":"Showing all insights including exploratory patterns. Use with caution.",[]);return e.jsxs("div",{ref:u,className:g("",t),"data-tour":"certainty-slider",...o,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:n}),e.jsxs("span",{className:"text-sm font-semibold text-primary-600",children:[d,"%"]})]}),e.jsx(Zt,{value:d,onChange:l,showCertaintyLabel:!1}),r&&e.jsx("p",{className:"mt-3 text-xs text-gray-500",children:h(d)}),i&&e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-2",children:wl.map(p=>e.jsxs("button",{onClick:()=>l(p.value),className:g("px-3 py-2 rounded-lg text-left text-sm transition-colors",d===p.value?"bg-primary-100 text-primary-700 border border-primary-200":"bg-gray-50 text-gray-600 border border-gray-200 hover:bg-gray-100"),children:[e.jsx("span",{className:"font-medium",children:p.label}),e.jsxs("span",{className:"text-xs text-gray-400 ml-1",children:[p.value,"%"]})]},p.value))})]})});$s.displayName="CertaintyFilter";const Nl={outcome:e.jsx(U,{className:"w-4 h-4"}),load:e.jsx(G,{className:"w-4 h-4"}),marker:e.jsx(F,{className:"w-4 h-4"})},Ws=x.forwardRef(({className:t,selectedTypes:a,onToggle:s,showCounts:r,...i},n)=>{const o=["outcome","load","marker"];return e.jsxs("div",{ref:n,className:g("",t),...i,children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-3 block",children:"Variable Type"}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Filter by what the insight affects"}),e.jsx("div",{className:"space-y-2",children:o.map(u=>{const m=Ts[u],c=a.includes(u),d=r?.[u];return e.jsxs("button",{onClick:()=>s(u),className:g("w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-left text-sm transition-all border",c?g(m.bgColor,m.borderColor,"ring-1 ring-offset-1"):"bg-gray-50 border-gray-200 hover:bg-gray-100"),style:c?{"--tw-ring-color":m.color}:void 0,children:[e.jsx("span",{className:g("p-1.5 rounded-md",c?"bg-white/60":"bg-gray-100"),style:c?{color:m.color}:{color:"#6B7280"},children:Nl[u]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:g("font-medium",c?"text-gray-900":"text-gray-600"),children:m.label}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:m.description})]}),d!==void 0&&e.jsx("span",{className:g("px-2 py-0.5 text-xs rounded-full font-medium",c?"bg-white/60 text-gray-700":"bg-gray-200 text-gray-500"),children:d})]},u)})})]})});Ws.displayName="VariableTypeFilter";const kl={sleep:{label:"Sleep",color:"bg-insight-sleep/10 text-insight-sleep",emoji:"😴"},metabolic:{label:"Metabolic",color:"bg-insight-metabolic/10 text-insight-metabolic",emoji:"🔥"},recovery:{label:"Recovery",color:"bg-insight-recovery/10 text-insight-recovery",emoji:"💪"},cognitive:{label:"Cognitive",color:"bg-insight-cognitive/10 text-insight-cognitive",emoji:"🧠"},activity:{label:"Activity",color:"bg-insight-activity/10 text-insight-activity",emoji:"🏃"},stress:{label:"Stress",color:"bg-insight-stress/10 text-insight-stress",emoji:"🧘"},nutrition:{label:"Nutrition",color:"bg-insight-nutrition/10 text-insight-nutrition",emoji:"🥗"}},Os=x.forwardRef(({className:t,categories:a,selectedCategories:s,onToggle:r,showCounts:i,...n},o)=>e.jsxs("div",{ref:o,className:g("",t),...n,children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-3 block",children:"Categories"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(u=>{const m=kl[u]||{label:u,color:"bg-gray-100 text-gray-600",emoji:"📊"},c=s.includes(u),d=i?.[u];return e.jsxs("button",{onClick:()=>r(u),className:g("inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-all",c?g(m.color,"ring-2 ring-offset-1"):"bg-gray-100 text-gray-500 hover:bg-gray-200"),children:[e.jsx("span",{children:m.emoji}),e.jsx("span",{children:m.label}),d!==void 0&&e.jsx("span",{className:g("ml-1 px-1.5 py-0.5 text-xs rounded-full",c?"bg-white/50":"bg-gray-200"),children:d})]},u)})})]}));Os.displayName="CategoryFilter";const Sl=x.forwardRef(({className:t,certaintyValue:a,onCertaintyChange:s,selectedVariableTypes:r=[],onVariableTypeToggle:i,variableTypeCounts:n,categories:o,selectedCategories:u,onCategoryToggle:m,categoryCounts:c,totalCount:d,filteredCount:l,onReset:h,...p},f)=>{const v=a!==50||u.length>0||r.length>0;return e.jsxs("div",{ref:f,className:g("space-y-6",t),...p,children:[i&&e.jsx(Ws,{selectedTypes:r,onToggle:i,showCounts:n}),e.jsx(Os,{categories:o,selectedCategories:u,onToggle:m,showCounts:c}),e.jsx($s,{value:a,onChange:s,showDescription:!0}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:["Showing ",e.jsx("span",{className:"font-medium text-gray-900",children:l})," of ",d," insights"]}),v&&e.jsx("button",{onClick:h,className:"block mt-2 text-primary-600 hover:text-primary-700 font-medium",children:"Reset filters"})]})]})});Sl.displayName="InsightFiltersPanel";function Cl(){const{activePersona:t}=Se(),{insights:a,allInsights:s,minCertainty:r,setMinCertainty:i,variableTypes:n,toggleVariableType:o,categories:u,toggleCategory:m,actionableOnly:c,setActionableOnly:d,totalCount:l,filteredCount:h,resetFilters:p,categoryStats:f}=Gt(),v=ji(),[j,k]=x.useState("grid"),[N,b]=x.useState(!1),w=f.reduce((C,D)=>(C[D.category]=D.count,C),{}),y=s.reduce((C,D)=>{const E=D.variableType;return C[E]=(C[E]||0)+1,C},{}),S=a.slice(0,3),T=(C,D)=>{console.log("Insight action:",C,D)},R={outcome:e.jsx(U,{className:"w-5 h-5"}),load:e.jsx(G,{className:"w-5 h-5"}),marker:e.jsx(F,{className:"w-5 h-5"})},$={sleep:{label:"Sleep",emoji:"😴"},metabolic:{label:"Metabolic",emoji:"🔥"},recovery:{label:"Recovery",emoji:"💪"},cognitive:{label:"Cognitive",emoji:"🧠"},cardio:{label:"Cardio",emoji:"❤️"},activity:{label:"Activity",emoji:"🏃"},stress:{label:"Stress",emoji:"🧘"},nutrition:{label:"Nutrition",emoji:"🥗"}},A=n.length>0||u.length>0||r>0;return e.jsxs(Q,{title:"Your Insights",subtitle:"Personalized discoveries powered by causal AI",actions:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Jt,{}),e.jsxs("div",{className:"flex items-center border-2 border-black",children:[e.jsx("button",{onClick:()=>k("grid"),className:`p-2 ${j==="grid"?"bg-black text-white":"bg-white text-black hover:bg-gray-100"}`,children:e.jsx(ur,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>k("list"),className:`p-2 border-l-2 border-black ${j==="list"?"bg-black text-white":"bg-white text-black hover:bg-gray-100"}`,children:e.jsx(hr,{className:"w-4 h-4"})})]})]}),children:[t&&e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-6",children:e.jsxs(M,{padding:"none",className:"overflow-hidden",children:[e.jsx("div",{className:"px-6 py-3 bg-black text-white",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Active Profile"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:t.avatar,alt:t.name,className:"w-24 h-24 object-cover border-2 border-black",onError:C=>{const D=C.target;D.style.display="none"}})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h2",{className:"text-2xl font-black text-black uppercase tracking-tight",children:t.name}),e.jsxs(_,{variant:"outline",children:[t.age," YRS"]})]}),e.jsx("p",{className:"text-lg font-bold text-emerald-600 uppercase tracking-wide mb-2",children:t.archetype}),e.jsx("p",{className:"text-gray-600 mb-4",children:t.narrative}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-100 border-2 border-gray-200",children:[e.jsx(Bt,{className:"w-4 h-4 text-black"}),e.jsxs("span",{className:"text-sm font-bold text-black uppercase",children:[t.daysOfData," Days"]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-100 border-2 border-gray-200",children:[e.jsx(F,{className:"w-4 h-4 text-black"}),e.jsxs("span",{className:"text-sm font-bold text-black uppercase",children:[t.devices?.length||0," Devices"]})]}),t.hasBloodwork&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-rose-50 border-2 border-rose-200",children:[e.jsx(At,{className:"w-4 h-4 text-rose-600"}),e.jsxs("span",{className:"text-sm font-bold text-rose-700 uppercase",children:[t.labDraws," Lab Draws"]})]})]})]})]})})]})}),e.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"sticky top-0 z-20 -mx-6 px-6 py-4 bg-white border-b-2 border-black mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-sm font-black text-black uppercase tracking-wider",children:"Filter by Variable Type"}),e.jsx(mt,{content:"COMPLE Framework: Filter insights by the type of health variable they affect",children:e.jsx(It,{className:"w-4 h-4 text-gray-400 cursor-help"})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-black text-black",children:h}),e.jsxs("span",{className:"text-gray-500",children:["of ",l," insights"]}),A&&e.jsx("button",{onClick:p,className:"ml-2 px-2 py-1 bg-black text-white text-xs font-bold uppercase hover:bg-gray-800",children:"Clear"})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["outcome","load","marker"].map(C=>{const D=Ts[C],E=n.length===0||n.includes(C),Z=y[C]||0;return e.jsxs("button",{onClick:()=>o(C),className:g("relative flex items-center gap-3 p-3 text-left transition-all border-2",E?"bg-white border-black":"bg-gray-100 border-gray-200 opacity-50 hover:opacity-75"),children:[e.jsx("div",{className:"p-2 border-2",style:{backgroundColor:E?D.color:"#F3F4F6",borderColor:E?D.color:"#E5E7EB"},children:e.jsx("span",{className:E?"text-white":"text-gray-400",children:R[C]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:g("font-bold uppercase tracking-wide text-sm",E?"text-black":"text-gray-500"),children:D.label}),e.jsx("span",{className:g("px-2 py-0.5 text-xs font-bold",E?"bg-black text-white":"bg-gray-200 text-gray-500"),children:Z})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:D.description})]})]},C)})})]}),S[0]&&e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:"mb-6",children:e.jsx(M,{padding:"none",className:"overflow-hidden",children:e.jsxs("div",{className:"bg-black text-white",children:[e.jsx("div",{className:"px-6 py-3 border-b-2 border-emerald-500",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-emerald-400",children:"Top Discovery"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-black uppercase tracking-tight mb-2",children:S[0].title}),e.jsx("p",{className:"text-gray-300 mb-4",children:S[0].summary||S[0].headline}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-20 h-2 bg-white/20 overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${S[0].certainty*100}%`}})}),e.jsxs("span",{className:"text-sm font-bold text-emerald-400",children:[Math.round(S[0].certainty*100),"%"]})]}),S[0].recommendation&&e.jsx("div",{className:"px-3 py-1.5 border-2 border-white/30 text-sm font-bold uppercase",children:S[0].recommendation})]})]})]})})}),e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-6",children:e.jsxs(M,{padding:"none",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mr-1",children:"Domain:"}),v.map(C=>{const D=$[C.category]||{label:C.category,emoji:"📊"},E=u.includes(C.category),Z=w[C.category]||0;return e.jsxs("button",{onClick:()=>m(C.category),className:g("inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-bold uppercase tracking-wide transition-all border-2",E?"bg-black text-white border-black":"bg-white text-gray-600 border-gray-200 hover:border-black"),children:[e.jsx("span",{children:D.emoji}),e.jsx("span",{children:D.label}),e.jsx("span",{className:g("px-1.5 py-0.5 text-xs",E?"bg-white text-black":"bg-gray-100"),children:Z})]},C.category)})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("button",{onClick:()=>b(!N),className:g("flex items-center gap-2 px-3 py-1.5 text-xs font-bold uppercase tracking-wide transition-all border-2",N?"bg-black text-white border-black":"bg-white text-gray-600 border-gray-200 hover:border-black"),children:[e.jsx(mr,{className:"w-4 h-4"}),"More Filters",e.jsx(ue,{className:g("w-4 h-4 transition-transform",N&&"rotate-180")})]})})]}),N&&e.jsx(P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t-2 border-black",children:e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsxs("div",{className:"p-4 border-r-2 border-black",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Min Certainty"}),e.jsxs("span",{className:"text-sm font-black text-black",children:[Math.round(r*100),"%"]})]}),e.jsx(Zt,{value:Math.round(r*100),onChange:C=>i(C/100)}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:r>=.7?"High-confidence only":r>=.4?"Moderate certainty":"Including exploratory"})]}),e.jsx("div",{className:"p-4 flex items-start gap-3",children:e.jsx(ae,{label:"Actionable only",description:"Show only insights with recommended actions",checked:c,onToggle:d,size:"sm"})})]})})]})}),e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},children:a.length>0?j==="grid"?e.jsx(Es,{insights:a,onInsightAction:T,variant:"detailed"}):e.jsx("div",{className:"space-y-3",children:a.map(C=>e.jsx(aa,{insight:C,variant:"compact",onAction:D=>T(C.id,D)},C.id))}):e.jsxs(M,{padding:"none",className:"text-center",children:[e.jsx("div",{className:"px-6 py-3 bg-gray-100 border-b-2 border-black",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"No Results"})}),e.jsxs("div",{className:"p-12",children:[e.jsx("div",{className:"w-16 h-16 bg-black flex items-center justify-center mx-auto mb-4",children:e.jsx(we,{className:"w-8 h-8 text-white"})}),e.jsx("p",{className:"text-gray-500 mb-4 font-bold uppercase",children:"No insights match your current filters."}),e.jsx(L,{variant:"outline",onClick:p,children:"Reset Filters"})]})]})})]})}const Na=({protocol:t,onClose:a})=>{const[s,r]=x.useState(!1),i=JSON.stringify(t,null,2),n=async()=>{await navigator.clipboard.writeText(i),r(!0),setTimeout(()=>r(!1),2e3)};return e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm",onClick:a,children:e.jsxs(P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.2},className:"w-full max-w-3xl max-h-[80vh] bg-white rounded-xl shadow-2xl overflow-hidden",onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-slate-200 bg-slate-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:e.jsx(ye,{className:"w-4 h-4 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-800",children:"Protocol Data"}),e.jsx("p",{className:"text-xs text-slate-500",children:"JSON representation of this protocol"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:n,className:g("flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-colors",s?"bg-emerald-50 text-emerald-600":"bg-slate-100 text-slate-600 hover:bg-slate-200"),children:s?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-3 h-3"}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"w-3 h-3"}),"Copy"]})}),e.jsx("button",{onClick:a,className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(oe,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"overflow-auto max-h-[calc(80vh-80px)]",children:e.jsx("pre",{className:"p-5 text-xs font-mono text-slate-700 bg-slate-50/50 leading-relaxed",children:i})}),e.jsx("div",{className:"px-5 py-3 border-t border-slate-200 bg-slate-50",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[e.jsxs("span",{children:[t.actions.length," actions • ",t.states?.length||0," states • ",t.triggers?.length||0," triggers"]}),e.jsx("span",{className:"font-mono",children:t.id})]})})]})})},Ml={sleep:"😴",nutrition:"🥗",exercise:"💪",stress:"🧘",recovery:"❤️‍🩹",supplements:"💊",timing:"⏰"},Tl=["Easy","Moderate","Challenging","Difficult","Expert"],qe=x.forwardRef(({className:t,protocol:a,onAction:s,showProgress:r=!0,variant:i="default",...n},o)=>{const[u,m]=x.useState(!1),c=Ml[a.category??"sleep"]||"📋",d=a.status??"suggested",l=Tl[(a.difficulty||1)-1];return i==="compact"?e.jsxs(e.Fragment,{children:[e.jsx(M,{ref:o,className:g("p-3 cursor-pointer hover:border-primary-200",t),onClick:()=>s?.("view"),...n,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:c}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-900 text-sm truncate",children:a.title}),e.jsx(Ct,{status:d})]}),a.personalizedTiming&&e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:a.personalizedTiming})]}),e.jsx("button",{onClick:h=>{h.stopPropagation(),m(!0)},className:"p-1.5 text-slate-400 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"View Code",children:e.jsx(ye,{className:"w-4 h-4"})}),e.jsx(ie,{className:"w-4 h-4 text-gray-400"})]})}),e.jsx(Y,{children:u&&e.jsx(Na,{protocol:a,onClose:()=>m(!1)})})]}):e.jsxs(e.Fragment,{children:[e.jsxs(M,{ref:o,className:g("overflow-hidden",t),padding:"none","data-tour":"protocol-list",...n,children:[e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:c}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 uppercase",children:a.category}),e.jsx(Ct,{status:d,className:"ml-2"})]})]}),a.difficulty&&e.jsx(_,{variant:a.difficulty>3?"warning":"default",size:"sm",children:l})]}),e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:a.title}),e.jsx("p",{className:"text-sm text-gray-600",children:a.description}),a.personalizedTiming&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm bg-primary-50 text-primary-700 px-3 py-2 rounded-lg",children:[e.jsx(le,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:a.personalizedTiming})]}),a.expectedImpact&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(G,{className:"w-4 h-4 text-green-500"}),e.jsxs("span",{children:["Expected: ",a.expectedImpact]})]}),r&&status==="active"&&a.progress!==void 0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[a.progress,"%"]})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary-500 rounded-full transition-all",style:{width:`${a.progress}%`}})})]})]}),e.jsxs("div",{className:"px-4 pb-4 flex items-center gap-2",children:[d==="suggested"&&e.jsxs(e.Fragment,{children:[e.jsxs(L,{size:"sm",variant:"primary",onClick:()=>s?.("start"),children:[e.jsx(Ht,{className:"w-3 h-3 mr-1"}),"Start Protocol"]}),e.jsx(L,{size:"sm",variant:"outline",onClick:()=>s?.("simulate"),children:"What If?"})]}),d==="active"&&e.jsxs(e.Fragment,{children:[e.jsxs(L,{size:"sm",variant:"secondary",onClick:()=>s?.("pause"),children:[e.jsx(pr,{className:"w-3 h-3 mr-1"}),"Pause"]}),e.jsxs(L,{size:"sm",variant:"success",onClick:()=>s?.("complete"),children:[e.jsx(K,{className:"w-3 h-3 mr-1"}),"Complete"]})]}),e.jsx(L,{size:"sm",variant:"ghost",onClick:()=>s?.("view"),children:"Details"}),e.jsxs(L,{size:"sm",variant:"ghost",onClick:()=>m(!0),className:"ml-auto",children:[e.jsx(ye,{className:"w-3 h-3 mr-1"}),"Code"]})]})]}),e.jsx(Y,{children:u&&e.jsx(Na,{protocol:a,onClose:()=>m(!1)})})]})});qe.displayName="ProtocolCard";const Tt=x.forwardRef(({className:t,protocols:a,onProtocolAction:s,emptyState:r,variant:i="default",grouped:n=!1,...o},u)=>{if(a.length===0&&r)return e.jsx("div",{ref:u,className:t,...o,children:r});if(n){const m={active:a.filter(c=>c.status==="active"),suggested:a.filter(c=>c.status==="suggested"),completed:a.filter(c=>c.status==="completed")};return e.jsxs("div",{ref:u,className:g("space-y-6",t),...o,children:[m.active.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase mb-3",children:"Active Protocols"}),e.jsx("div",{className:"space-y-3",children:m.active.map(c=>e.jsx(qe,{protocol:c,variant:i,onAction:d=>s?.(c.id,d)},c.id))})]}),m.suggested.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase mb-3",children:"Suggested Protocols"}),e.jsx("div",{className:"space-y-3",children:m.suggested.map(c=>e.jsx(qe,{protocol:c,variant:i,onAction:d=>s?.(c.id,d)},c.id))})]})]})}return e.jsx("div",{ref:u,className:g(i==="compact"?"space-y-2":"grid gap-4 md:grid-cols-2",t),...o,children:a.map(m=>e.jsx(qe,{protocol:m,variant:i,onAction:c=>s?.(m.id,c)},m.id))})});Tt.displayName="ProtocolList";const ft=[{id:"caffeine_cutoff",label:"Caffeine Cutoff",unit:"hour",min:10,max:20,default:14},{id:"exercise_time",label:"Exercise Time",unit:"hour",min:6,max:22,default:17},{id:"screen_cutoff",label:"Screen Cutoff",unit:"hour",min:19,max:24,default:22},{id:"alcohol_drinks",label:"Alcohol (drinks)",unit:"drinks",min:0,max:5,default:0},{id:"bedtime_variance",label:"Bedtime Variance",unit:"min",min:0,max:120,default:30}],ka=t=>{const a=Math.floor(t),s=Math.round((t-a)*60),r=a>=12?"PM":"AM",i=a>12?a-12:a===0?12:a;return s>0?`${i}:${s.toString().padStart(2,"0")} ${r}`:`${i} ${r}`},Vs=x.forwardRef(({className:t,onClose:a,...s},r)=>{const{inputs:i,results:n,isSimulating:o,hasRun:u,combinedImpact:m,setInput:c,addInput:d,removeInput:l,runSimulation:h,resetSimulation:p,loadPreset:f,availablePresets:v}=Ni(),[j,k]=x.useState(!1),N=ft.filter(y=>!i.some(S=>S.intervention===y.id)),b=y=>{const S=ft.find(T=>T.id===y);S&&d({intervention:S.id,currentValue:S.default,proposedValue:S.default,unit:S.unit}),k(!1)},w=y=>ft.find(S=>S.id===y);return e.jsxs(M,{ref:r,className:g("p-6",t),"data-tour":"simulator",...s,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"What-If Simulator"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Test how changes might affect your outcomes"})]}),a&&e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:e.jsx(oe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[e.jsx("span",{className:"text-xs text-gray-500 self-center mr-1",children:"Presets:"}),v.map(y=>e.jsx("button",{onClick:()=>f(y),className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 text-gray-600 rounded transition-colors",children:y.replace(/-/g," ")},y))]}),e.jsx("div",{className:"space-y-4 mb-6",children:i.map((y,S)=>{const T=w(y.intervention);return T?e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"font-medium text-gray-700",children:T.label}),e.jsx("button",{onClick:()=>l(S),className:"text-gray-400 hover:text-red-500 transition-colors",children:e.jsx(oe,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Current"}),e.jsx("div",{className:"text-sm font-medium text-gray-600",children:T.unit==="hour"?ka(y.currentValue):`${y.currentValue} ${T.unit}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Proposed"}),e.jsx(dt,{value:y.proposedValue,min:T.min,max:T.max,step:T.unit==="hour"?.5:1,onChange:R=>c(S,{proposedValue:R}),size:"sm"}),e.jsx("div",{className:"text-sm font-medium text-primary-600 mt-1",children:T.unit==="hour"?ka(y.proposedValue):`${y.proposedValue} ${T.unit}`})]})]})]},S):null})}),N.length>0&&e.jsxs("div",{className:"relative mb-6",children:[e.jsxs("button",{onClick:()=>k(!j),className:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-primary-300 hover:text-primary-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(xr,{className:"w-4 h-4"}),"Add Intervention"]}),e.jsx(Y,{children:j&&e.jsx(P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-lg z-10",children:N.map(y=>e.jsx("button",{onClick:()=>b(y.id),className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg",children:y.label},y.id))})})]}),e.jsxs(L,{onClick:h,loading:o,disabled:i.length===0,fullWidth:!0,size:"lg",children:[e.jsx(Ht,{className:"w-4 h-4 mr-2"}),"Run Simulation"]}),e.jsx(Y,{children:u&&n.length>0&&e.jsxs(P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-6",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Projected Impact"}),e.jsx("div",{className:"space-y-3",children:n.map((y,S)=>e.jsx(Pl,{result:y},S))}),m&&m.interactions.length>0&&e.jsx("div",{className:"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(me,{className:"w-4 h-4 text-amber-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-800",children:"Interactions Detected"}),e.jsx("ul",{className:"text-xs text-amber-700 mt-1",children:m.interactions.map((y,S)=>e.jsxs("li",{children:["• ",y]},S))})]})]})}),e.jsx(L,{variant:"ghost",size:"sm",onClick:p,className:"mt-4",children:"Reset Results"})]})})]})});Vs.displayName="WhatIfSimulator";const Pl=({result:t})=>{const a=t.change>=0,s=a?"text-green-600":"text-red-600",r=a?G:be;return e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:t.metric}),e.jsxs("span",{className:g("text-sm font-semibold flex items-center gap-1",s),children:[e.jsx(r,{className:"w-3 h-3"}),a?"+":"",t.change.toFixed(1),e.jsxs("span",{className:"text-gray-400 text-xs",children:["(",t.changePercent.toFixed(1),"%)"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{children:["From: ",t.baseline.toFixed(1)]}),e.jsx("span",{children:"→"}),e.jsxs("span",{className:"font-medium text-gray-700",children:["To: ",t.projected.toFixed(1)]})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-gray-500",children:["Confidence: ",Math.round(t.certainty*100),"%"]}),e.jsxs("span",{className:"text-gray-500",children:["Time to effect: ",t.timeToEffect]})]}),e.jsxs("div",{className:"mt-2 h-1.5 bg-gray-200 rounded-full overflow-hidden relative",children:[e.jsx("div",{className:"absolute h-full bg-primary-200",style:{left:`${(t.confidenceInterval.low-t.baseline)/(t.confidenceInterval.high-t.confidenceInterval.low+t.baseline)*100}%`,width:`${(t.confidenceInterval.high-t.confidenceInterval.low)/t.baseline*100}%`}}),e.jsx("div",{className:"absolute h-full w-1 bg-primary-600",style:{left:`${(t.projected-t.confidenceInterval.low)/(t.confidenceInterval.high-t.confidenceInterval.low)*100}%`}})]})]})},Ze=6,Pt=24,Dl=Pt-Ze,rt={sleep:{label:"Sleep",order:1,color:"#8B5CF6"},metabolic:{label:"Metabolic",order:2,color:"#F59E0B"},activity:{label:"Activity",order:3,color:"#3B82F6"},nutrition:{label:"Nutrition",order:4,color:"#10B981"},recovery:{label:"Recovery",order:5,color:"#EC4899"},cardio:{label:"Cardio",order:6,color:"#EF4444"},cognitive:{label:"Cognitive",order:7,color:"#6366F1"},stress:{label:"Stress",order:8,color:"#14B8A6"}},_l={outcome:{label:"Outcome",color:"#10B981",bgColor:"bg-emerald-50"},load:{label:"Load",color:"#F59E0B",bgColor:"bg-amber-50"},marker:{label:"Marker",color:"#8B5CF6",bgColor:"bg-violet-50"}},Rl={caffeine:Je,coffee:Je,meal:ze,eating:ze,food:ze,sleep:J,bed:J,bedtime:J,exercise:Ye,workout:Ye,strength:Ye,zone:ee,cardio:ee,screen:J,wake:jt,morning:jt,walk:F};function bt(t){const a=t.match(/^(\d{1,2}):(\d{2})$/);if(a)return parseInt(a[1])+parseInt(a[2])/60;const s=t.match(/(\d+):(\d+)\s*(AM|PM)/i);if(s){let r=parseInt(s[1]);const i=parseInt(s[2]),n=s[3].toUpperCase();return n==="PM"&&r!==12&&(r+=12),n==="AM"&&r===12&&(r=0),r+i/60}return 12}function Dt(t){const a=Math.floor(t),s=Math.round((t-a)*60),r=a>=12?"PM":"AM",i=a>12?a-12:a===0?12:a;return s===0?`${i}${r}`:`${i}:${s.toString().padStart(2,"0")}${r}`}function Sa(t){return t.toLowerCase().includes("caffeine")?"Caffeine":t.toLowerCase().includes("last meal")?"Last Meal":t.toLowerCase().includes("eating window")?"Eating":t.toLowerCase().includes("bed")?"Bedtime":t.toLowerCase().includes("workout")||t.toLowerCase().includes("exercise")?"Workout":t.toLowerCase().includes("zone 2")?"Zone 2":t.toLowerCase().includes("screen")?"Screens":t.toLowerCase().includes("walk")?"Walk":t.toLowerCase().includes("sleep")?"Sleep":t.split(" ").slice(0,2).join(" ")}function Il(t){const a=t.toLowerCase();for(const[s,r]of Object.entries(Rl))if(a.includes(s))return r;return le}function Al(t){return rt[t]?.color||"#6B7280"}function Ll(t,a){const s=[],r=new Map(a?.map(i=>[i.id,i])||[]);for(const i of t){const n=i.linkedInsightId?r.get(i.linkedInsightId):void 0,o=i.category||"sleep",u=Al(o),m=Il(i.label);i.actionType==="cutoff"&&i.time?s.push({id:i.id,label:i.label,shortLabel:Sa(i.label),type:"point-in-time",category:o,startHour:bt(i.time),time:i.time,isActive:i.isActive??!0,impact:i.impact||0,linkedInsight:n,variableType:n?.variableType,color:u,icon:m}):i.actionType==="duration"&&i.startTime&&i.endTime&&s.push({id:i.id,label:i.label,shortLabel:Sa(i.label),type:"duration",category:o,startHour:bt(i.startTime),endHour:bt(i.endTime),isActive:i.isActive??!0,impact:i.impact||0,linkedInsight:n,variableType:n?.variableType,color:u,icon:m})}return s.sort((i,n)=>i.startHour-n.startHour)}function El(t){const a=[...t],s=t.find(i=>i.type==="point-in-time"&&(i.shortLabel.toLowerCase().includes("bed")||i.label.toLowerCase().includes("bed")));s&&a.push({id:"sleep-window",label:"Sleep Window",shortLabel:"Sleep",type:"duration",category:"sleep",startHour:s.startHour,endHour:24,isActive:!0,impact:s.impact,linkedInsight:s.linkedInsight,variableType:s.variableType,color:"#8B5CF6",icon:J});const r=t.find(i=>i.type==="point-in-time"&&(i.shortLabel.toLowerCase().includes("meal")||i.label.toLowerCase().includes("meal")));return r&&a.push({id:"eating-window",label:"Eating Window",shortLabel:"Eating",type:"duration",category:"metabolic",startHour:7.5,endHour:r.startHour,isActive:!0,impact:r.impact,linkedInsight:r.linkedInsight,variableType:r.variableType,color:"#F59E0B",icon:ze}),a}function $l(t){const a=new Map;for(const s of t){const r=a.get(s.category)||[];r.push(s),a.set(s.category,r)}return new Map([...a.entries()].sort((s,r)=>{const i=rt[s[0]]?.order||99,n=rt[r[0]]?.order||99;return i-n}))}function Wl({event:t,x:a,y:s}){const r=t.icon,i=t.variableType?_l[t.variableType]:null;return e.jsx(P.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},className:"fixed z-50 pointer-events-none",style:{left:Math.min(a,window.innerWidth-320),top:s+10},children:e.jsxs("div",{className:"bg-slate-900 text-white rounded-lg shadow-xl p-3 w-72",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-1.5 rounded",style:{backgroundColor:t.color+"30"},children:e.jsx(r,{className:"w-4 h-4",style:{color:t.color}})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-sm",children:t.label}),t.time&&e.jsx("p",{className:"text-xs text-gray-400",children:t.type==="point-in-time"?`Cutoff: ${t.time}`:`${Dt(t.startHour)} - ${Dt(t.endHour)}`})]})]}),i&&e.jsx("div",{className:"mb-2",children:e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2 py-1 rounded text-xs font-medium",style:{backgroundColor:i.color+"20",color:i.color},children:[t.variableType==="outcome"&&e.jsx(U,{className:"w-3 h-3"}),t.variableType==="load"&&e.jsx(G,{className:"w-3 h-3"}),t.variableType==="marker"&&e.jsx(F,{className:"w-3 h-3"}),"Affects ",i.label]})}),t.linkedInsight&&e.jsxs("div",{className:"border-t border-white/10 pt-2 mt-2",children:[e.jsxs("p",{className:"text-xs text-gray-300 mb-1",children:[e.jsx("span",{className:"text-gray-500",children:"Linked insight:"})," ",t.linkedInsight.title]}),t.linkedInsight.explanation&&e.jsxs("p",{className:"text-xs text-emerald-400",children:["Effect: ",t.linkedInsight.explanation]}),t.linkedInsight.causalParams&&e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs",children:[e.jsxs("span",{className:"text-gray-400",children:["θ = ",t.linkedInsight.causalParams.theta.displayValue]}),e.jsxs("span",{className:"text-gray-400",children:["n = ",t.linkedInsight.causalParams.observations]})]})]}),t.impact>0&&e.jsxs("div",{className:"flex items-center gap-2 mt-2 pt-2 border-t border-white/10",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Impact:"}),e.jsxs("span",{className:"text-xs font-medium text-emerald-400",children:["+",(t.impact*100).toFixed(0),"% contribution"]})]}),!t.isActive&&e.jsxs("div",{className:"flex items-center gap-1.5 mt-2 pt-2 border-t border-white/10 text-amber-400",children:[e.jsx(me,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:"Currently inactive"})]})]})})}function Ol({protocolName:t="Daily Protocol",actions:a,insights:s,className:r=""}){const[i,n]=x.useState(null),o=x.useMemo(()=>{const p=Ll(a,s);return El(p)},[a,s]),u=x.useMemo(()=>$l(o),[o]),m=p=>(Math.max(Ze,Math.min(Pt,p))-Ze)/Dl*100,c=(p,f)=>{n({event:p,x:f.clientX,y:f.clientY})},d=()=>{n(null)},l=p=>{i&&n({...i,x:p.clientX,y:p.clientY})},h=[];for(let p=Ze;p<=Pt;p+=3)h.push(p);return o.length===0?null:e.jsxs("div",{className:g("bg-white rounded-xl border border-slate-200 overflow-hidden",r),children:[e.jsx("div",{className:"px-4 py-3 bg-slate-50 border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-slate-800",children:t}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-4 h-1.5 rounded bg-slate-400"}),"Duration"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-400"}),"Cutoff"]})]})]})}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"relative h-6 mb-2 ml-24",children:h.map(p=>e.jsx("div",{className:"absolute transform -translate-x-1/2 text-[10px] text-slate-400 font-medium",style:{left:`${m(p)}%`},children:p===12?"12PM":p<12?`${p}AM`:p===24?"12AM":`${p-12}PM`},p))}),e.jsx("div",{className:"space-y-1",children:Array.from(u.entries()).map(([p,f])=>{const v=rt[p]||{label:p,color:"#6B7280"},j=f.filter(N=>N.type==="duration"),k=f.filter(N=>N.type==="point-in-time");return e.jsxs("div",{className:"flex items-center h-10",children:[e.jsx("div",{className:"w-24 flex-shrink-0 pr-2",children:e.jsx("span",{className:"text-xs font-medium px-2 py-0.5 rounded",style:{backgroundColor:v.color+"15",color:v.color},children:v.label})}),e.jsxs("div",{className:"flex-1 relative h-full",children:[e.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-0.5 bg-slate-100 -translate-y-1/2"}),h.map(N=>e.jsx("div",{className:"absolute top-1/2 w-px h-2 bg-slate-200 -translate-y-1/2",style:{left:`${m(N)}%`}},N)),j.map((N,b)=>{const w=m(N.startHour),y=m(N.endHour||N.startHour+1),S=Math.max(y-w,2);return e.jsx(P.div,{className:g("absolute top-1/2 -translate-y-1/2 h-5 rounded cursor-pointer transition-all",!N.isActive&&"opacity-40"),style:{left:`${w}%`,width:`${S}%`,backgroundColor:N.color+"25",border:`1.5px solid ${N.color}`},initial:{opacity:0,scaleX:0},animate:{opacity:1,scaleX:1},transition:{delay:b*.05},onMouseEnter:T=>c(N,T),onMouseLeave:d,onMouseMove:l,whileHover:{scale:1.02,boxShadow:`0 2px 8px ${N.color}40`},children:S>8&&e.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-[10px] font-medium truncate px-1",style:{color:N.color},children:N.shortLabel})},N.id)}),k.map((N,b)=>{const w=N.icon,y=m(N.startHour);return e.jsx(P.div,{className:"absolute top-1/2 -translate-y-1/2 -translate-x-1/2 z-10",style:{left:`${y}%`},initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1+b*.05},children:e.jsxs("div",{className:g("relative cursor-pointer group",!N.isActive&&"opacity-40"),onMouseEnter:S=>c(N,S),onMouseLeave:d,onMouseMove:l,children:[e.jsx(P.div,{className:"w-7 h-7 rounded-full flex items-center justify-center shadow-sm border-2 border-white",style:{backgroundColor:N.color},whileHover:{scale:1.15,boxShadow:`0 2px 8px ${N.color}60`},children:e.jsx(w,{className:"w-3.5 h-3.5 text-white"})}),e.jsx("div",{className:"absolute top-full mt-0.5 left-1/2 -translate-x-1/2 text-[9px] font-medium whitespace-nowrap",style:{color:N.color},children:Dt(N.startHour)})]})},N.id)})]})]},p)})}),e.jsx("div",{className:"mt-4 pt-3 border-t border-slate-100",children:e.jsxs("div",{className:"flex items-center justify-center gap-6 text-xs text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(U,{className:"w-3.5 h-3.5 text-emerald-500"}),e.jsx("span",{children:"Outcome (daily)"})]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(G,{className:"w-3.5 h-3.5 text-amber-500"}),e.jsx("span",{children:"Load (accumulated)"})]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(F,{className:"w-3.5 h-3.5 text-violet-500"}),e.jsx("span",{children:"Marker (biomarker)"})]})]})})]}),e.jsx(Y,{children:i&&e.jsx(Wl,{...i})})]})}function Vl(t){const a=t.toLowerCase();return a.includes("walk")||a.includes("step")?{icon:fr,color:"text-green-600",bgColor:"bg-green-50"}:a.includes("zone 2")||a.includes("cardio")||a.includes("exercise")?{icon:F,color:"text-blue-600",bgColor:"bg-blue-50"}:a.includes("strength")||a.includes("workout")||a.includes("resistance")?{icon:Ye,color:"text-purple-600",bgColor:"bg-purple-50"}:a.includes("water")||a.includes("hydrat")?{icon:At,color:"text-cyan-600",bgColor:"bg-cyan-50"}:a.includes("protein")||a.includes("fiber")||a.includes("vegetable")?{icon:br,color:"text-emerald-600",bgColor:"bg-emerald-50"}:a.includes("sleep")||a.includes("bed")?{icon:J,color:"text-indigo-600",bgColor:"bg-indigo-50"}:a.includes("hrv")||a.includes("heart")?{icon:ct,color:"text-rose-600",bgColor:"bg-rose-50"}:a.includes("energy")||a.includes("power")?{icon:ee,color:"text-amber-600",bgColor:"bg-amber-50"}:{icon:U,color:"text-gray-600",bgColor:"bg-gray-50"}}function Bl(t){return t.filter(a=>a.actionType==="target"||a.actionType==="duration").map(a=>{const{icon:s,color:r,bgColor:i}=Vl(a.label);return{id:a.id,label:a.label,type:a.actionType,icon:s,color:r,bgColor:i,impact:a.impact??5}}).sort((a,s)=>s.impact-a.impact)}function Hl({actions:t,className:a=""}){const s=Bl(t),[r,i]=x.useState(new Set);if(s.length===0)return null;const n=l=>{i(h=>{const p=new Set(h);return p.has(l)?p.delete(l):p.add(l),p})},o=r.size,u=s.length,m=u>0?o/u*100:0,c=s.filter(l=>l.type==="target"),d=s.filter(l=>l.type==="duration");return e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 "+a,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Daily Goals"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 h-1.5 bg-gray-100 rounded-full overflow-hidden",children:e.jsx(P.div,{className:"h-full bg-green-500 rounded-full",initial:{width:0},animate:{width:`${m}%`},transition:{duration:.3}})}),e.jsxs("span",{className:"text-xs text-gray-500",children:[o,"/",u]})]})]}),e.jsxs("div",{className:"space-y-2",children:[d.length>0&&e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] uppercase tracking-wide text-gray-400 font-medium",children:[e.jsx(gr,{className:"w-3 h-3"}),e.jsx("span",{children:"Activities"})]}),d.map(l=>e.jsx(Ca,{goal:l,isCompleted:r.has(l.id),onToggle:()=>n(l.id)},l.id))]}),c.length>0&&e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] uppercase tracking-wide text-gray-400 font-medium",children:[e.jsx(U,{className:"w-3 h-3"}),e.jsx("span",{children:"Targets"})]}),c.map(l=>e.jsx(Ca,{goal:l,isCompleted:r.has(l.id),onToggle:()=>n(l.id)},l.id))]})]})]})}function Ca({goal:t,isCompleted:a,onToggle:s}){const r=t.icon;return e.jsxs(P.button,{onClick:s,className:`
        w-full flex items-center gap-3 p-2 rounded-lg text-left
        transition-colors duration-150
        ${a?"bg-green-50/50":"hover:bg-gray-50"}
      `,whileTap:{scale:.98},children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Y,{mode:"wait",children:a?e.jsx(P.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},children:e.jsx(lt,{className:"w-5 h-5 text-green-500"})},"checked"):e.jsx(P.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},children:e.jsx(Va,{className:"w-5 h-5 text-gray-300"})},"unchecked")})}),e.jsx("div",{className:`p-1.5 rounded-md ${t.bgColor} flex-shrink-0`,children:e.jsx(r,{className:`w-3.5 h-3.5 ${t.color}`})}),e.jsx("span",{className:`
        text-sm flex-1 truncate
        ${a?"text-gray-400 line-through":"text-gray-700"}
      `,children:t.label}),e.jsx("div",{className:"flex-shrink-0 flex gap-0.5",children:[...Array(3)].map((i,n)=>e.jsx("div",{className:`w-1 h-1 rounded-full ${n<Math.ceil(t.impact/4)?"bg-primary-400":"bg-gray-200"}`},n))})]})}const Fl={low:{bg:"#96b9d0",text:"#6a95b3"},medium:{bg:"#f8c8dc",text:"#e99bbe"},high:{bg:"#e99bbe",text:"#c04d7d"}},Ma={hrv:ct,rhr:F,sleep:J,default:se};function zl({suppressedActions:t,className:a=""}){const[s,r]=x.useState(!1);return t.length===0?null:e.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 overflow-hidden "+a,children:[e.jsxs("button",{onClick:()=>r(!s),className:"w-full px-5 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:"rgba(248, 200, 220, 0.2)"},children:e.jsx($e,{className:"w-5 h-5",style:{color:"#e99bbe"}})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Safeguards Active"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[t.length," action",t.length>1?"s":""," suppressed today"]})]})]}),s?e.jsx(Oa,{className:"w-5 h-5 text-gray-400"}):e.jsx(ue,{className:"w-5 h-5 text-gray-400"})]}),e.jsx(Y,{children:s&&e.jsx(P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsx("div",{className:"px-5 pb-4 space-y-3",children:t.map((i,n)=>{const o=Fl[i.riskLevel];return e.jsxs(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:n*.05},className:"p-4 rounded-lg border-l-4",style:{backgroundColor:"#fafafa",borderLeftColor:o.bg},children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:i.action}),e.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:i.reason})]}),e.jsxs("span",{className:"px-2 py-1 rounded text-xs font-medium",style:{backgroundColor:o.bg+"30",color:o.text},children:[i.riskLevel," risk"]})]}),i.metrics&&i.metrics.length>0&&e.jsx("div",{className:"flex items-center gap-3 mt-3 pt-3 border-t border-gray-100",children:i.metrics.map((u,m)=>{const c=Ma[u.name.toLowerCase()]||Ma.default;return e.jsxs("div",{className:"flex items-center gap-1.5 text-xs",children:[e.jsx(c,{className:"w-3.5 h-3.5",style:{color:u.status==="danger"?"#e99bbe":"#f8c8dc"}}),e.jsxs("span",{className:"text-gray-600",children:[u.name,":"]}),e.jsx("span",{className:"font-mono",style:{color:u.status==="danger"?"#e99bbe":"#f8c8dc"},children:u.value})]},m)})}),i.alternative&&e.jsx("div",{className:"mt-3 p-2 rounded",style:{backgroundColor:"rgba(137, 204, 240, 0.1)"},children:e.jsxs("p",{className:"text-xs",style:{color:"#5ba8d4"},children:[e.jsx("span",{className:"font-medium",children:"Alternative:"})," ",i.alternative]})})]},i.id)})})})})]})}function Yl(){return[{id:"1",action:"High-intensity workout",reason:"HRV below recovery threshold",riskLevel:"high",alternative:"Light walk or gentle yoga",metrics:[{name:"HRV",value:"28ms",status:"danger"},{name:"RHR",value:"72bpm",status:"warning"}]},{id:"2",action:"Extended fasting window",reason:"Sleep debt accumulated",riskLevel:"medium",alternative:"Standard 12h eating window",metrics:[{name:"Sleep",value:"-2.5h",status:"warning"}]}]}function Ul(t){if(!t)return[];const a=[],s=t.currentMetrics;if(s?.fastingGlucose){const r=s.fastingGlucose;a.push({id:"glucose",label:"Fasting Glucose",status:r>100?"warning":r>125?"alert":"good",value:`${r} mg/dL`,change:r<100?"-24 from baseline":void 0,changeDirection:"down"})}return s?.hrv&&a.push({id:"hrv",label:"HRV Trend",status:s.hrv>45?"good":s.hrv>35?"warning":"alert",value:`${s.hrv} ms`,change:"+8 ms (30d)",changeDirection:"up"}),s?.sleepScore&&a.push({id:"sleep",label:"Sleep Quality",status:s.sleepScore>=80?"good":s.sleepScore>=70?"warning":"alert",value:`${s.sleepScore}/100`,change:s.sleepScore>=80?"Stable":"-5 pts this week",changeDirection:s.sleepScore>=80?"stable":"down"}),s?.deepSleepMin&&a.push({id:"deep-sleep",label:"Deep Sleep",status:s.deepSleepMin>=50?"good":s.deepSleepMin>=40?"warning":"alert",value:`${s.deepSleepMin} min`,changeDirection:"stable"}),a}function Gl(t,a){const s=[];t.slice(0,5).forEach((i,n)=>{const o=i.causalParams;o&&o.currentStatus!=="at_optimal"&&s.push({id:`discuss-${n}`,priority:n===0?"high":"medium",topic:i.title.split("→")[0].trim(),reason:i.recommendation||i.headline,linkedInsightId:i.id})});const r=t.filter(i=>i.causalParams?.currentStatus==="at_optimal");return r.length>0&&s.push({id:"celebrate",priority:"low",topic:"Celebrate Progress",reason:`${r.length} behaviors at optimal - reinforce consistency`}),s.length===0&&s.push({id:"general-1",priority:"medium",topic:"Review Protocol Adherence",reason:"Check compliance with active interventions"}),s.slice(0,4)}function ql(t,a,s,r){const i=[];let n=1;const o=r.filter(d=>d.status==="alert");if(o.length>0){const d=o[0];i.push({id:"alert-1",number:n++,category:"alert",label:d.label,value:d.value,detail:"Requires immediate attention",severity:"critical"})}const u=r.filter(d=>d.status==="warning"&&d.change);if(u.length>0&&i.length<5){const d=u[0];i.push({id:"trend-1",number:n++,category:"trend",label:`${d.label} Trend`,value:d.change||d.value,detail:"Monitor for continued change",severity:"important"})}const m=a.find(d=>d.causalParams?.currentStatus!=="at_optimal"&&d.certainty&&d.certainty>.75);if(m&&i.length<5){const[d]=m.title.split("→").map(l=>l.trim());i.push({id:"insight-1",number:n++,category:"insight",label:d,value:`${Math.round((m.certainty||0)*100)}% confidence`,detail:m.recommendation?.slice(0,60)+"..."||"Causal relationship identified",severity:"important"})}const c=s.find(d=>{const l=d.actions.filter(p=>p.isActive).length,h=d.actions.length;return h>0&&l/h<.8});if(c&&i.length<5){const d=c.actions.filter(p=>p.isActive).length,l=c.actions.length,h=Math.round(d/l*100);i.push({id:"adherence-1",number:n++,category:"adherence",label:c.name.replace(" Protocol",""),value:`${h}% adherence`,detail:"Discuss barriers to compliance",severity:h<50?"critical":"important"})}if(t?.thresholds&&i.length<5){const d=t.thresholds.caffeineCutoff;d&&d!=="2:00 PM"&&i.push({id:"threshold-1",number:n++,category:"threshold",label:"Personal Caffeine Cutoff",value:d,detail:"Population avg: 2:00 PM — patient is different",severity:"notable"})}for(i.length<5&&r.filter(l=>l.status==="good").slice(0,5-i.length).forEach(l=>{i.push({id:`good-${l.id}`,number:n++,category:"trend",label:l.label,value:l.value,detail:"On track — reinforce",severity:"notable"})});i.length<5;)i.push({id:`context-${i.length}`,number:n++,category:"insight",label:"Data Collection",value:`${t?.daysOfData||0} days`,detail:"Sufficient for personalized insights",severity:"notable"});return i.slice(0,5)}function Zl(){const{activePersona:t}=Se(),{allInsights:a}=Gt(),{protocolsByStatus:s}=ls(),r=Ul(t),i=Gl(a,s.active),n=ql(t,a,s.active,r),o=s.active;o.reduce((h,p)=>h+p.actions.filter(f=>f.isActive).length,0),o.reduce((h,p)=>h+p.actions.filter(f=>f.isActive).length,0);const u=a.filter(h=>h.certainty&&h.certainty>.75).slice(0,3),m={alert:{bg:"bg-red-50",border:"border-red-200",text:"text-red-700",icon:"text-red-500"},warning:{bg:"bg-amber-50",border:"border-amber-200",text:"text-amber-700",icon:"text-amber-500"},good:{bg:"bg-emerald-50",border:"border-emerald-200",text:"text-emerald-700",icon:"text-emerald-500"}},c={high:"bg-red-100 text-red-700 border-red-200",medium:"bg-amber-100 text-amber-700 border-amber-200",low:"bg-emerald-100 text-emerald-700 border-emerald-200"},d={critical:{badge:"bg-red-500",border:"border-red-300",bg:"bg-red-50"},important:{badge:"bg-amber-500",border:"border-amber-300",bg:"bg-amber-50"},notable:{badge:"bg-primary-500",border:"border-primary-300",bg:"bg-primary-50"}},l={alert:se,trend:G,insight:ee,adherence:U,threshold:F};return e.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(M,{className:"p-4 bg-gradient-to-r from-slate-800 to-slate-700 text-white border-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(wt,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-xl font-bold",children:t?.name||"Patient"}),e.jsxs(_,{className:"bg-white/20 text-white border-white/30",children:[t?.age||41,"F"]}),t?.tags?.slice(0,2).map(h=>e.jsx(_,{className:"bg-primary-500/30 text-primary-100 border-primary-400/30",children:h.replace("-"," ")},h))]}),e.jsx("p",{className:"text-slate-300 text-sm mt-1",children:t?.narrative||"Pre-diabetic turned success story"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold",children:t?.daysOfData||90}),e.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider",children:"Days of Data"})]})]})}),e.jsxs(M,{className:"p-4 border-2 border-slate-300 bg-gradient-to-r from-slate-50 to-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-6 h-6 rounded bg-slate-800 flex items-center justify-center",children:e.jsx(wt,{className:"w-4 h-4 text-white"})}),e.jsx("h3",{className:"font-bold text-slate-800 text-sm uppercase tracking-wide",children:"5 Things to Know"}),e.jsx(_,{variant:"outline",size:"sm",className:"ml-2 bg-white",children:"30-Second Scan"})]}),e.jsx("div",{className:"grid grid-cols-5 gap-3",children:n.map(h=>{const p=d[h.severity],f=l[h.category];return e.jsxs("div",{className:`p-3 rounded-lg border-2 ${p.border} ${p.bg} relative`,children:[e.jsx("div",{className:`absolute -top-2 -left-2 w-6 h-6 rounded-full ${p.badge} text-white flex items-center justify-center text-xs font-bold shadow-sm`,children:h.number}),e.jsxs("div",{className:"flex items-center gap-1.5 mb-2 mt-1",children:[e.jsx(f,{className:"w-3.5 h-3.5 text-slate-500"}),e.jsx("span",{className:"text-[10px] font-semibold text-slate-500 uppercase tracking-wider",children:h.category})]}),e.jsx("div",{className:"text-sm font-semibold text-slate-800 leading-tight",children:h.label}),e.jsx("div",{className:"text-base font-bold text-slate-900 mt-1",children:h.value}),e.jsx("div",{className:"text-[10px] text-slate-500 mt-1.5 leading-tight",children:h.detail})]},h.id)})}),e.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-slate-400",children:"Prioritized by clinical relevance • Combines wearable + lab + behavioral data"}),e.jsxs("div",{className:"flex items-center gap-3 text-[10px]",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"Critical"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),"Important"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-500"}),"Notable"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs(M,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(F,{className:"w-4 h-4 text-slate-500"}),e.jsx("h3",{className:"font-semibold text-slate-800 text-sm uppercase tracking-wide",children:"Key Metrics"})]}),e.jsx("div",{className:"space-y-2",children:r.map(h=>{const p=m[h.status];return e.jsxs("div",{className:`p-3 rounded-lg border ${p.bg} ${p.border}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm font-medium ${p.text}`,children:h.label}),h.status==="alert"&&e.jsx(se,{className:`w-4 h-4 ${p.icon}`}),h.status==="warning"&&e.jsx(se,{className:`w-4 h-4 ${p.icon}`}),h.status==="good"&&e.jsx(xe,{className:`w-4 h-4 ${p.icon}`})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("span",{className:`text-lg font-bold ${p.text}`,children:h.value}),h.change&&e.jsxs("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:[h.changeDirection==="up"&&e.jsx(G,{className:"w-3 h-3 text-emerald-500"}),h.changeDirection==="down"&&e.jsx(be,{className:"w-3 h-3 text-emerald-500"}),h.changeDirection==="stable"&&e.jsx(Ba,{className:"w-3 h-3 text-slate-400"}),h.change]})]})]},h.id)})})]}),e.jsxs(M,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(U,{className:"w-4 h-4 text-slate-500"}),e.jsx("h3",{className:"font-semibold text-slate-800 text-sm uppercase tracking-wide",children:"Protocol Adherence"})]}),e.jsx("div",{className:"space-y-3",children:o.slice(0,3).map(h=>{const p=h.actions.filter(k=>k.isActive).length,f=h.actions.length,v=Math.round(p/f*100),j=v<70;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-slate-700 truncate",children:h.name.replace(" Protocol","")}),e.jsxs("span",{className:`text-sm font-medium ${j?"text-amber-600":"text-emerald-600"}`,children:[v,"%"]})]}),e.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${j?"bg-amber-400":"bg-emerald-400"}`,style:{width:`${v}%`}})}),j&&e.jsxs("span",{className:"text-xs text-amber-600 flex items-center gap-1 mt-1",children:[e.jsx(se,{className:"w-3 h-3"}),"Discuss barriers"]})]},h.id)})})]})]}),e.jsx("div",{className:"col-span-1",children:e.jsxs(M,{className:"p-4 h-full",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ee,{className:"w-4 h-4 text-primary-500"}),e.jsx("h3",{className:"font-semibold text-slate-800 text-sm uppercase tracking-wide",children:"Causal Insights"}),e.jsx(_,{variant:"outline",size:"sm",className:"ml-auto",children:"Validated"})]}),e.jsx("div",{className:"space-y-3",children:u.map((h,p)=>{const[f,v]=h.title.split("→").map(k=>k.trim()),j=Math.round((h.certainty||0)*100);return e.jsx("div",{className:"p-3 bg-gradient-to-r from-primary-50/50 to-white rounded-lg border border-primary-100",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-primary-100 text-primary-600 flex items-center justify-center text-xs font-bold flex-shrink-0",children:p+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium text-slate-800",children:[e.jsx("span",{className:"text-primary-600",children:f}),e.jsx(ve,{className:"w-3 h-3 text-slate-400 flex-shrink-0"}),e.jsx("span",{className:"text-slate-700",children:v})]}),e.jsx("p",{className:"text-xs text-slate-600 mt-1 line-clamp-2",children:h.headline}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-16 h-1.5 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary-400 rounded-full",style:{width:`${j}%`}})}),e.jsxs("span",{className:"text-[10px] text-slate-500",children:[j,"%"]})]}),e.jsxs("span",{className:"text-[10px] text-slate-400",children:[h.evidence?.personalDays||0,"d data"]})]})]})]})},h.id)})}),e.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100",children:e.jsx("p",{className:"text-[10px] text-slate-400 italic",children:"Insights ranked by confidence and relevance to current protocols"})})]})}),e.jsx("div",{children:e.jsxs(M,{className:"p-4 h-full border-2 border-violet-200 bg-gradient-to-br from-violet-50/50 to-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(yr,{className:"w-4 h-4 text-violet-500"}),e.jsx("h3",{className:"font-semibold text-slate-800 text-sm uppercase tracking-wide",children:"Discussion Points"})]}),e.jsx("div",{className:"space-y-3",children:i.map((h,p)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider border ${c[h.priority]}`,children:h.priority==="high"?"!":h.priority==="medium"?"•":"✓"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-800",children:h.topic}),e.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:h.reason})]})]},h.id))}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-violet-100",children:[e.jsx("h4",{className:"text-[10px] font-semibold text-slate-500 uppercase tracking-wider mb-2",children:"Quick Reference"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"p-2 bg-white rounded border border-slate-200 text-center",children:[e.jsx("div",{className:"text-lg font-bold text-slate-800",children:t?.thresholds?.caffeineCutoff||"4:30 PM"}),e.jsx("div",{className:"text-[10px] text-slate-500",children:"Caffeine Cutoff"})]}),e.jsxs("div",{className:"p-2 bg-white rounded border border-slate-200 text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-slate-800",children:[t?.thresholds?.eatingWindowHours||8,"h"]}),e.jsx("div",{className:"text-[10px] text-slate-500",children:"Eating Window"})]})]})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(le,{className:"w-3 h-3"}),e.jsxs("span",{children:["Brief generated ",new Date().toLocaleTimeString()," | ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400"}),"Good"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-400"}),"Monitor"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-400"}),"Alert"]})]})]})]})}const Ql=[{id:1,type:"action",icon:Je,color:"text-amber-500",bgColor:"bg-amber-50",title:"Last call for caffeine",message:"Your personalized 2:15 PM cutoff is in 45 minutes",time:"1:30 PM",urgent:!0},{id:2,type:"recovery",icon:F,color:"text-green-500",bgColor:"bg-green-50",title:"Recovery window open",message:"HRV is elevated - good time for Zone 2 training",time:"10:00 AM",urgent:!1},{id:3,type:"metabolic",icon:ee,color:"text-purple-500",bgColor:"bg-purple-50",title:"Eating window closes soon",message:"Last meal by 7:00 PM for optimal glucose response",time:"6:15 PM",urgent:!1},{id:4,type:"sleep",icon:J,color:"text-blue-500",bgColor:"bg-blue-50",title:"Wind-down reminder",message:"Screen cutoff in 30 minutes for 10:30 PM bedtime",time:"9:30 PM",urgent:!1}];function Xl(){const{activePersona:t}=Se(),{protocolsByStatus:a,activeCount:s,suggestedCount:r}=ls(),{allInsights:i}=Gt(),[n,o]=x.useState("today"),[u,m]=x.useState(!1),c=a.active.flatMap(h=>h.actions.map(p=>({id:p.id,label:p.label,category:p.category,isActive:p.isActive,impact:p.impact,time:p.time,actionType:p.actionType,startTime:p.startTime,endTime:p.endTime,linkedInsightId:p.linkedInsightId}))),d=[{value:"today",label:"Today's Plan"},{value:"active",label:"Active",count:s},{value:"suggested",label:"Suggested",count:r},{value:"simulator",label:"What-If"},{value:"provider",label:"Provider Brief",icon:e.jsx(wt,{className:"w-4 h-4"})}],l=(h,p)=>{console.log("Protocol action:",h,p),p==="simulate"&&o("simulator")};return e.jsxs(Q,{title:"Your Protocols",subtitle:"Personalized daily plans that adapt to your context",actions:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Jt,{}),e.jsxs(L,{onClick:()=>o("simulator"),children:[e.jsx(Ft,{className:"w-4 h-4 mr-2"}),"Try What-If"]})]}),children:[e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-6",children:e.jsx(yl,{})}),e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-6",children:e.jsx(zl,{suppressedActions:Yl()})}),e.jsx(Xt,{tabs:d,activeTab:n,onTabChange:h=>o(h),variant:"underline",className:"mb-6"}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex-1",children:[n==="today"&&e.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsx(Ol,{protocolName:t?.name?`${t.name}'s Daily Protocol`:"Daily Protocol",actions:c,insights:i,className:"w-full"}),e.jsx(Hl,{actions:c}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3",children:"Live Triggers"}),e.jsx("div",{className:"space-y-3",children:Ql.map(h=>{const p=h.icon;return e.jsx(M,{className:`p-4 ${h.urgent?"border-amber-200 bg-amber-50/50":""}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${h.bgColor}`,children:e.jsx(p,{className:`w-5 h-5 ${h.color}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:h.title}),h.urgent&&e.jsx(_,{variant:"warning",size:"sm",children:"Soon"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:h.message})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(le,{className:"w-4 h-4"}),h.time]})]})},h.id)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3",children:"Key Actions for Today"}),e.jsx(B,{columns:2,gap:"md",children:a.active.slice(0,4).map(h=>e.jsxs(M,{className:"p-4 hover:border-primary-200 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:h.name}),e.jsx(xe,{className:"w-5 h-5 text-green-500"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:h.description||h.outcome}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",children:h.category}),e.jsxs("span",{className:"text-xs text-gray-500",children:[h.evidenceLevel??80,"% confidence"]})]})]},h.id))})]})]}),n==="active"&&e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},children:a.active.length>0?e.jsx(Tt,{protocols:a.active,onProtocolAction:l}):e.jsxs(M,{className:"p-12 text-center",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"No active protocols. Check the suggested protocols to get started."}),e.jsx(L,{onClick:()=>o("suggested"),children:"View Suggestions"})]})}),n==="suggested"&&e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},children:a.suggested.length>0?e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"p-4 mb-4 bg-gradient-to-r from-primary-50 to-white border-primary-100",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:e.jsx(ee,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-primary-900",children:"Personalized Suggestions"}),e.jsx("p",{className:"text-sm text-primary-700",children:"These protocols are tailored to your unique patterns and thresholds."})]})]})}),e.jsx(Tt,{protocols:a.suggested,onProtocolAction:l})]}):e.jsx(M,{className:"p-12 text-center",children:e.jsx("p",{className:"text-gray-500",children:"No new protocols suggested at this time. Keep tracking your data!"})})}),n==="simulator"&&e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},children:e.jsx(Vs,{})}),n==="provider"&&e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},children:e.jsx(Zl,{})})]}),n!=="simulator"&&n!=="provider"&&e.jsx(P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"w-72 flex-shrink-0",children:e.jsxs(M,{className:"p-4 sticky top-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Current State"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Readiness"}),e.jsx("span",{className:"font-medium text-green-600",children:"High"})]}),e.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:"78%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Recovery"}),e.jsx("span",{className:"font-medium text-primary-600",children:"Optimal"})]}),e.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary-500 rounded-full",style:{width:"85%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Stress Load"}),e.jsx("span",{className:"font-medium text-amber-600",children:"Moderate"})]}),e.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-amber-500 rounded-full",style:{width:"45%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Sleep Debt"}),e.jsx("span",{className:"font-medium text-gray-600",children:"-1.2 hrs"})]}),e.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gray-400 rounded-full",style:{width:"30%"}})})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100",children:e.jsx("p",{className:"text-xs text-gray-500",children:"States update in real-time based on your wearable data and logged activities."})})]})})]})]})}const Kl=[{id:"member-Ryan",personaId:"Ryan",name:"Ryan P.",avatar:"/assets/avatars/Ryan.jpg",status:"at-risk",statusReason:"Sleep declining, glucose trending up",flags:["sleep_regression","late_workouts","glucose_creep"],lastSession:"2024-12-20",nextSession:new Date(Date.now()+2880*60*1e3).toISOString().split("T")[0],keyMetrics:[{name:"Sleep Score",previous:78,current:65,unit:"score",trend:"down",isGood:!1},{name:"HRV",previous:48,current:42,unit:"ms",trend:"down",isGood:!1},{name:"Fasting Glucose",previous:95,current:104,unit:"mg/dL",trend:"up",isGood:!1},{name:"Triglycerides",previous:142,current:131,unit:"mg/dL",trend:"down",isGood:!0}],topDrivers:[{driver:"Late workout timing",direction:"negative",certainty:.89},{driver:"Afternoon caffeine",direction:"negative",certainty:.84},{driver:"Zone 2 training",direction:"positive",certainty:.91}],todayReco:[{text:"Finish workout before 7 PM",certainty:.89},{text:"No caffeine after 2:15 PM",certainty:.84},{text:"Lower bedroom temp to 19Â°C",certainty:.76}],coachMessage:"Hi Ryan, I noticed your sleep has been declining over the past two weeks. Looking at your data, it seems like your workout times have shifted laterâ€”which correlates strongly with your increased sleep latency. Can we chat about your current schedule and find a time that works better for your body?"},{id:"member-sarah",personaId:"sarah",name:"Sarah M.",avatar:"/assets/avatars/sarah.jpg",status:"on-track",statusReason:"Glucose improving, great adherence",flags:[],lastSession:"2024-12-18",nextSession:new Date(Date.now()+7200*60*1e3).toISOString().split("T")[0],keyMetrics:[{name:"Fasting Glucose",previous:102,current:94,unit:"mg/dL",trend:"down",isGood:!0},{name:"Time in Range",previous:78,current:87,unit:"%",trend:"up",isGood:!0},{name:"HbA1c",previous:5.5,current:5.3,unit:"%",trend:"down",isGood:!0},{name:"Sleep Score",previous:78,current:82,unit:"score",trend:"up",isGood:!0}],topDrivers:[{driver:"8-hour eating window",direction:"positive",certainty:.93},{driver:"Post-meal walks",direction:"positive",certainty:.88},{driver:"Sleep consistency",direction:"positive",certainty:.86}],todayReco:[{text:"Maintain 10 AM - 6 PM eating window",certainty:.93},{text:"15-min walk after lunch",certainty:.88},{text:"Continue 7.5+ hrs sleep",certainty:.86}],coachMessage:"Sarah, your progress over the past 3 months has been incredible! Your fasting glucose dropped from 118 to 94â€”that's a 20% improvement. Your consistency with the eating window and post-meal walks is really paying off. Let's talk about what's next in our upcoming session."},{id:"member-marcus",personaId:"marcus",name:"Marcus J.",avatar:"/assets/avatars/marcus.jpg",status:"needs-attention",statusReason:"High strain, recovery lagging",flags:["overtraining_risk","hrv_suppressed"],lastSession:"2024-12-15",nextSession:new Date(Date.now()+1440*60*1e3).toISOString().split("T")[0],keyMetrics:[{name:"Recovery Score",previous:68,current:58,unit:"%",trend:"down",isGood:!1},{name:"HRV",previous:62,current:52,unit:"ms",trend:"down",isGood:!1},{name:"hsCRP",previous:2.8,current:1.6,unit:"mg/L",trend:"down",isGood:!0},{name:"Deep Sleep",previous:58,current:62,unit:"min",trend:"up",isGood:!0}],topDrivers:[{driver:"Training spacing",direction:"negative",certainty:.91},{driver:"Cold exposure",direction:"positive",certainty:.74},{driver:"Zero alcohol",direction:"positive",certainty:.87}],todayReco:[{text:"No high-intensity today",certainty:.91},{text:"Cold shower post-activity",certainty:.74},{text:"Early caffeine cutoff (noon)",certainty:.83}],coachMessage:"Marcus, I see you've had 3 high-strain days back-to-back. Your HRV is showing signs of overreachingâ€”it dropped from 62 to 52. Let's discuss adjusting your training schedule to include more recovery days. The good news: your inflammation markers (hsCRP) continue to improve!"},{id:"member-emma",personaId:"emma",name:"Emma L.",avatar:"/assets/avatars/emma.jpg",status:"insufficient-data",statusReason:"Only 12 days of dataâ€”building baseline",flags:["new_user","irregular_bedtime"],lastSession:"2024-12-22",nextSession:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0],keyMetrics:[{name:"Sleep Score",previous:68,current:71,unit:"score",trend:"up",isGood:!0},{name:"Steps",previous:4800,current:5200,unit:"steps",trend:"up",isGood:!0},{name:"HRV",previous:36,current:38,unit:"ms",trend:"up",isGood:!0}],topDrivers:[{driver:"Bedtime consistency",direction:"negative",certainty:.62},{driver:"Step count",direction:"positive",certainty:.58}],todayReco:[{text:"Try 10:30 PM bedtime",certainty:.62},{text:"Aim for 8,000 steps",certainty:.58},{text:"Keep wearing Apple Watch to bed",certainty:1}],coachMessage:"Hi Emma! Welcome to your second week of tracking. I'm seeing some interesting patterns alreadyâ€”your bedtime varies by about 90 minutes, which might be affecting your sleep quality. Let's experiment with a consistent bedtime this week and see how your data responds."}];function Jl(){return Kl}const ec={"member-Ryan":{memberId:"member-Ryan",memberName:"Ryan P.",sessionDate:new Date(Date.now()+2880*60*1e3).toISOString().split("T")[0],sessionDuration:30,prepTimeSaved:"45 minutes",discussionPoints:[{title:"Sleep Regression",priority:"high",priorityColor:"#EF4444",whatIsHappening:["Sleep score dropped from 78 to 65 over 2 weeks","Sleep latency increased from 12 to 22 minutes","Deep sleep declined by 18 minutes"],rootCause:"Workout timing shifted from 6:30 PM to 8:15 PM average over the past 2 weeks, likely due to work deadline pressure.",suggestedIntervention:"Discuss schedule constraints and explore morning workout option. If evenings are required, recommend finishing by 7 PM.",expectedImpact:"-10 min sleep latency, +12 deep sleep minutes within 7 days",talkingPoints:["Ask about current work situation and schedule pressures","Explore feasibility of morning workouts","Discuss the 7 PM threshold and why it matters for him specifically","Set a realistic goal for this week"]},{title:"HRV Suppression",priority:"high",priorityColor:"#EF4444",whatIsHappening:["HRV dropped from 48ms to 42ms","Coincides with later caffeine consumption","Resting HR elevated by 4 bpm"],rootCause:"Caffeine consumption shifted from before 2 PM to 3-4 PM, suppressing overnight autonomic recovery.",suggestedIntervention:"Reinforce 2:15 PM caffeine cutoff. Consider switching to decaf for afternoon energy.",expectedImpact:"+6ms HRV within 10 days if caffeine cutoff is maintained",talkingPoints:["Review his current caffeine habits","Explain the HRV-caffeine connection in his data","Suggest alternatives for afternoon energy dips","Consider sleep debt as root cause of afternoon fatigue"]},{title:"Zone 2 Success (Positive)",priority:"low",priorityColor:"#3B82F6",whatIsHappening:["Triglycerides dropped from 156 to 131 mg/dL","Consistent 185 min/week Zone 2 training","Testosterone improved 26% over 3 months"],rootCause:"Sustained Zone 2 cardiovascular training is improving metabolic markers.",suggestedIntervention:"Celebrate this win! Encourage continuation of Zone 2 focus.",expectedImpact:"Continued improvement if maintained",talkingPoints:["Acknowledge his consistency with Zone 2","Share the triglyceride improvement data","Discuss how this proves the system works when he follows it","Use as motivation for sleep/caffeine changes"]}],metrics:[{name:"Sleep Score",previous:78,current:65,unit:"score",trend:"down",isGood:!1},{name:"HRV",previous:48,current:42,unit:"ms",trend:"down",isGood:!1},{name:"Sleep Latency",previous:12,current:22,unit:"min",trend:"up",isGood:!1},{name:"Deep Sleep",previous:58,current:40,unit:"min",trend:"down",isGood:!1},{name:"Fasting Glucose",previous:95,current:104,unit:"mg/dL",trend:"up",isGood:!1},{name:"Triglycerides",previous:142,current:131,unit:"mg/dL",trend:"down",isGood:!0}],lastSessionNotes:"Discussed Zone 2 progress and set goal of maintaining 175+ min/week. Ryan mentioned increased work pressure but committed to keeping workouts before 7 PM. Follow up on this commitment.",adherence:[{category:"Workout Timing",percentage:42},{category:"Caffeine Cutoff",percentage:58},{category:"Bedroom Temp",percentage:35},{category:"Zone 2 Training",percentage:92}]},"member-sarah":{memberId:"member-sarah",memberName:"Sarah M.",sessionDate:new Date(Date.now()+7200*60*1e3).toISOString().split("T")[0],sessionDuration:30,prepTimeSaved:"40 minutes",discussionPoints:[{title:"Metabolic Transformation (Celebrate!)",priority:"low",priorityColor:"#3B82F6",whatIsHappening:["Fasting glucose dropped from 118 to 94 mg/dL (20% improvement)","HbA1c improved from 5.9% to 5.3%","Time in range increased from 72% to 87%"],rootCause:"Consistent adherence to 8-hour eating window and post-meal walks for 90 days.",suggestedIntervention:"Celebrate this major milestone! Discuss what made her successful and how to maintain.",expectedImpact:"Continued improvement toward optimal ranges",talkingPoints:["Share the transformation data visually","Ask what helped her stay consistent","Discuss her long-term goals now that pre-diabetes is reversed","Explore any new health goals she wants to pursue"]},{title:"Next Phase Planning",priority:"medium",priorityColor:"#F59E0B",whatIsHappening:["Core metabolic goals largely achieved","Sleep and energy are stable","Ready for optimization phase"],rootCause:"Foundation phase completeâ€”time to introduce new optimization targets.",suggestedIntervention:"Introduce secondary goals like fitness performance or stress management.",expectedImpact:"Expanded health optimization beyond metabolic markers",talkingPoints:["Explore her interest areas (fitness, stress, longevity)","Discuss potential new wearable additions (CGM retention?)","Set 90-day goals for next phase"]}],metrics:[{name:"Fasting Glucose",previous:102,current:94,unit:"mg/dL",trend:"down",isGood:!0},{name:"HbA1c",previous:5.5,current:5.3,unit:"%",trend:"down",isGood:!0},{name:"Time in Range",previous:78,current:87,unit:"%",trend:"up",isGood:!0},{name:"Sleep Score",previous:78,current:82,unit:"score",trend:"up",isGood:!0},{name:"HRV",previous:48,current:52,unit:"ms",trend:"up",isGood:!0}],lastSessionNotes:"Sarah expressed excitement about her glucose improvements. Wants to eventually reduce CGM usage and maintain gains without continuous monitoring. Discussed transition plan.",adherence:[{category:"Eating Window",percentage:95},{category:"Post-Meal Walks",percentage:88},{category:"Sleep Schedule",percentage:82},{category:"Protein First",percentage:71}]},"member-marcus":{memberId:"member-marcus",memberName:"Marcus J.",sessionDate:new Date(Date.now()+1440*60*1e3).toISOString().split("T")[0],sessionDuration:45,prepTimeSaved:"50 minutes",discussionPoints:[{title:"Overtraining Risk",priority:"high",priorityColor:"#EF4444",whatIsHappening:["HRV dropped from 62 to 52ms (16% decline)","Recovery score at 58% (down from 68%)","3 consecutive high-strain days last week"],rootCause:"Insufficient recovery time between high-intensity sessions. Training load exceeding recovery capacity.",suggestedIntervention:"Implement mandatory 48-hour spacing between high-intensity workouts. Add dedicated recovery days.",expectedImpact:"+8ms HRV and 70%+ recovery score within 7 days",talkingPoints:["Review his training log and strain patterns","Explain the 48-hour HRV recovery window in his data","Discuss his competition/training goals","Create a realistic training schedule together"]},{title:"Inflammation Progress (Positive)",priority:"medium",priorityColor:"#F59E0B",whatIsHappening:["hsCRP dropped from 2.8 to 1.6 mg/L (43% improvement)","Zero alcohol maintained for 60 days","Cold exposure protocol consistent"],rootCause:"Alcohol elimination and consistent recovery practices are reducing systemic inflammation.",suggestedIntervention:"Reinforce the alcohol-inflammation connection and encourage continuation.",expectedImpact:"Target hsCRP below 1.0 with continued protocol",talkingPoints:["Celebrate the inflammation improvement","Discuss any challenges with alcohol abstinence","Review cold exposure routine and benefits","Consider adding omega-3 or other anti-inflammatory support"]}],metrics:[{name:"Recovery Score",previous:68,current:58,unit:"%",trend:"down",isGood:!1},{name:"HRV",previous:62,current:52,unit:"ms",trend:"down",isGood:!1},{name:"hsCRP",previous:2.8,current:1.6,unit:"mg/L",trend:"down",isGood:!0},{name:"Deep Sleep",previous:58,current:62,unit:"min",trend:"up",isGood:!0},{name:"Resting HR",previous:54,current:52,unit:"bpm",trend:"down",isGood:!0}],lastSessionNotes:"Marcus committed to maintaining zero alcohol and was excited about inflammation improvements. Discussed potential return to competitive events in Q1. Need to balance training intensity with recovery.",adherence:[{category:"Training Spacing",percentage:45},{category:"Cold Exposure",percentage:85},{category:"No Alcohol",percentage:100},{category:"Caffeine Cutoff",percentage:78}]}};new Date(Date.now()-10080*60*1e3).toISOString().split("T")[0];function Bs(){return Object.values(ec).map(t=>{const a=t.discussionPoints||[],s=a[0];return{...t,id:t.memberId,clientName:t.memberName,focus:typeof s=="object"&&s?.title||"General coaching",urgency:a.some(r=>typeof r=="object"&&r.priority==="high")?"high":"medium",sessionTime:t.sessionDate,keyMetrics:t.metrics.slice(0,4).map(r=>({label:r.name,value:`${r.current}${r.unit}`,trend:r.trend==="up"?r.isGood?"+":"-":r.trend==="down"?r.isGood?"-":"+":""})),alerts:a.filter(r=>typeof r=="object"&&r.priority==="high").map(r=>typeof r=="object"?r.whatIsHappening?.[0]:r)}})}function tc(){return{totalSessions:Bs().length,newInsights:24,protocolsStarted:8,avgCertainty:76,needsAttention:[{name:"Ryan P.",reason:"Sleep regression - workout timing shifted"},{name:"Marcus J.",reason:"Overtraining risk - HRV declining"}],topProtocols:[{name:"Zone 2 Training",clients:8,improvement:"+12% cardio"},{name:"Caffeine Cutoff",clients:6,improvement:"+8ms HRV"},{name:"Time-Restricted Eating",clients:5,improvement:"-8 mg/dL glucose"}]}}const Ta={"action-required":{label:"Action Required",color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200",icon:me},"needs-support":{label:"Needs Support",color:"text-amber-600",bgColor:"bg-amber-50",borderColor:"border-amber-200",icon:se},"on-track":{label:"On Track",color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200",icon:xe}},ac=t=>[{driver:"Sleep consistency",effectSize:"+18%",confidence:"85-92%",direction:"positive",icon:J},{driver:"Evening caffeine",effectSize:"-12%",confidence:"78-88%",direction:"negative",icon:ee},{driver:"Morning HRV",effectSize:"+8%",confidence:"72-84%",direction:"positive",icon:ct},{driver:"Screen time before bed",effectSize:"-6%",confidence:"68-79%",direction:"negative",icon:vr}],Pa={"slow-metabolizer":{label:"Slow Metabolizer",color:"text-purple-600",bg:"bg-purple-100"},"high-responder":{label:"High Responder",color:"text-primary-600",bg:"bg-primary-100"},"stress-sensitive":{label:"Stress Sensitive",color:"text-amber-600",bg:"bg-amber-100"},"recovery-optimized":{label:"Recovery Optimized",color:"text-green-600",bg:"bg-green-100"}};function sc(){const[t,a]=x.useState("roster"),[s,r]=x.useState(null),i=Jl(),n=Bs(),o=tc(),u=i.map((d,l)=>({...d,coachStatus:l===0?"action-required":l===1?"needs-support":"on-track",archetype:Object.keys(Pa)[l%4],traitModifiers:["Caffeine sensitive","Morning chronotype"].slice(0,l%2+1),lastUpdate:`${Math.floor(Math.random()*24)+1}h ago`})),m=[{value:"roster",label:"Member Overview",count:i.length},{value:"sessions",label:"Session Prep",count:n.length},{value:"digest",label:"Weekly Digest"}],c={"action-required":u.filter(d=>d.coachStatus==="action-required").length,"needs-support":u.filter(d=>d.coachStatus==="needs-support").length,"on-track":u.filter(d=>d.coachStatus==="on-track").length};return e.jsxs(Q,{title:"Coach Dashboard",subtitle:"Member insights, session prep, and causal intelligence",children:[e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-6",children:e.jsx(B,{columns:3,gap:"md",children:Object.entries(Ta).map(([d,l])=>{const h=l.icon,p=c[d];return e.jsx(M,{className:`p-4 ${l.bgColor} ${l.borderColor} border cursor-pointer hover:shadow-md transition-shadow`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-white/80",children:e.jsx(h,{className:`w-5 h-5 ${l.color}`})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-2xl font-bold ${l.color}`,children:p}),e.jsx("p",{className:"text-sm text-gray-600",children:l.label})]})]})},d)})})}),e.jsx(Xt,{tabs:m,activeTab:t,onTabChange:d=>a(d),variant:"underline",className:"mb-6"}),t==="roster"&&e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},children:e.jsx("div",{className:"space-y-4",children:u.map(d=>{const l=Ta[d.coachStatus],h=l.icon,p=Pa[d.archetype],f=ac(d.id);return e.jsxs(M,{className:`p-5 ${s===d.id?"ring-2 ring-primary-500":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-400 to-primary-600 rounded-full flex items-center justify-center text-white font-bold text-lg",children:d.name.charAt(0)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:d.name}),e.jsx(_,{className:`${p.bg} ${p.color} border-0`,children:p.label})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("p",{className:"text-sm text-gray-500",children:d.focus}),d.traitModifiers.map((v,j)=>e.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-100 rounded text-gray-600",children:v},j))]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-lg ${l.bgColor}`,children:[e.jsx(h,{className:`w-4 h-4 ${l.color}`}),e.jsx("span",{className:`text-sm font-medium ${l.color}`,children:l.label})]}),e.jsx("span",{className:"text-xs text-gray-500",children:d.lastUpdate})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:d.daysOfData}),e.jsx("div",{className:"text-xs text-gray-500",children:"Days of Data"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:d.insightCount}),e.jsx("div",{className:"text-xs text-gray-500",children:"Insights"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:d.activeProtocols}),e.jsx("div",{className:"text-xs text-gray-500",children:"Active Protocols"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-semibold text-primary-600",children:[Math.round(75+Math.random()*20),"%"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Evidence Weight"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("h5",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(we,{className:"w-4 h-4 text-primary-500"}),"Top Causal Drivers"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:f.slice(0,4).map((v,j)=>{const k=v.icon;return e.jsxs("div",{className:`flex items-center gap-2 p-2 rounded-lg ${v.direction==="positive"?"bg-green-50":"bg-red-50"}`,children:[e.jsx(k,{className:`w-4 h-4 ${v.direction==="positive"?"text-green-600":"text-red-600"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:v.driver}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs font-semibold ${v.direction==="positive"?"text-green-600":"text-red-600"}`,children:v.effectSize}),e.jsxs("span",{className:"text-xs text-gray-500",children:["CrI: ",v.confidence]})]})]})]},j)})})]}),e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>r(s===d.id?null:d.id),children:[s===d.id?"Collapse":"View Full Profile",e.jsx(ie,{className:`w-4 h-4 ml-1 transition-transform ${s===d.id?"rotate-90":""}`})]})]},d.id)})})}),t==="sessions"&&e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},children:e.jsx("div",{className:"grid gap-4 lg:grid-cols-2","data-tour":"session-prep",children:n.map(d=>e.jsxs(M,{className:"p-5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-400 to-primary-600 rounded-full flex items-center justify-center text-white font-bold text-lg",children:d.clientName.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:d.clientName}),e.jsx("p",{className:"text-sm text-gray-500",children:d.focus})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs(_,{variant:d.urgency==="high"?"warning":"default",children:[d.urgency," priority"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[e.jsx(le,{className:"w-3 h-3 inline mr-1"}),d.sessionTime]})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3 mb-4",children:d.keyMetrics.slice(0,3).map((l,h)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 text-center",children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:l.value}),e.jsx("div",{className:"text-xs text-gray-500",children:l.label}),l.trend&&e.jsxs("div",{className:`text-xs flex items-center justify-center gap-1 ${l.trend.startsWith("+")?"text-green-600":"text-red-600"}`,children:[l.trend.startsWith("+")?e.jsx(G,{className:"w-3 h-3"}):e.jsx(be,{className:"w-3 h-3"}),l.trend]})]},h))}),e.jsxs("div",{className:"mb-4 p-3 bg-green-50 border border-green-100 rounded-lg",children:[e.jsxs("h4",{className:"text-sm font-medium text-green-800 mb-2 flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4"}),"Celebration Points"]}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{className:"text-sm text-green-700",children:"3 consecutive days of sleep goal achieved"}),e.jsx("li",{className:"text-sm text-green-700",children:"HRV trending up 12% this week"})]})]}),e.jsxs("div",{className:"mb-4 p-3 bg-primary-50 border border-primary-100 rounded-lg",children:[e.jsxs("h4",{className:"text-sm font-medium text-primary-800 mb-2 flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),"Suggested Interventions"]}),e.jsx("ul",{className:"space-y-1",children:d.discussionPoints.slice(0,2).map((l,h)=>e.jsx("li",{className:"text-sm text-primary-700",children:typeof l=="string"?l:l.title},h))})]}),d.alerts&&d.alerts.length>0&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-700 text-sm",children:[e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Attention Needed"})]}),e.jsx("ul",{className:"mt-1 text-xs text-amber-600",children:d.alerts.map((l,h)=>e.jsxs("li",{children:["• ",l]},h))})]}),e.jsxs(L,{size:"sm",variant:"outline",fullWidth:!0,children:["View Full Prep",e.jsx(ie,{className:"w-4 h-4 ml-1"})]})]},d.id))})}),t==="digest"&&e.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},children:[e.jsx(M,{className:"p-6 bg-gradient-to-r from-navy-900 to-navy-800 text-white mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"This Week's Impact"}),e.jsx("p",{className:"text-gray-300",children:"Your coaching generated measurable improvements"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-4xl font-bold text-primary-400",children:"+14%"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Avg. Outcome Improvement"})]})]})}),e.jsxs(B,{columns:2,gap:"md",children:[e.jsxs(M,{className:"p-5",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5 text-primary-500"}),"Weekly Metrics"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Total Sessions"}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:o.totalSessions})]}),e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"New Insights Generated"}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:o.newInsights})]}),e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Protocols Started"}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:o.protocolsStarted})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Avg Member Certainty"}),e.jsxs("span",{className:"text-xl font-bold text-primary-600",children:[o.avgCertainty,"%"]})]})]})]}),e.jsxs(M,{className:"p-5",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5 text-amber-500"}),"Members Needing Attention"]}),e.jsx("div",{className:"space-y-3",children:o.needsAttention.map((d,l)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-amber-50 rounded-lg border border-amber-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-200 rounded-full flex items-center justify-center text-amber-700 font-bold text-sm",children:d.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:d.name}),e.jsx("p",{className:"text-xs text-amber-600",children:d.reason})]})]}),e.jsx(L,{size:"xs",variant:"outline",children:"Review"})]},l))})]})]}),e.jsx(H,{title:"Top Performing Protocols This Week",className:"mt-6",children:e.jsx(B,{columns:3,gap:"md",children:o.topProtocols.map((d,l)=>e.jsxs(M,{className:"p-4 hover:border-primary-200 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-1.5 bg-green-100 rounded",children:e.jsx(G,{className:"w-4 h-4 text-green-600"})}),e.jsx("span",{className:"font-medium text-gray-900",children:d.name})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[d.clients," members enrolled"]}),e.jsxs("p",{className:"text-sm font-semibold text-green-600",children:[d.improvement," avg improvement"]})]},l))})}),e.jsx(H,{title:"Top Causal Discoveries This Week",className:"mt-6",children:e.jsx(M,{className:"p-5",children:e.jsx("div",{className:"space-y-3",children:[{insight:"Sleep consistency shows 2.3x stronger effect than duration alone",confidence:"91%",members:8},{insight:"Evening screen cutoff improving outcomes for stress-sensitive archetypes",confidence:"87%",members:5},{insight:"Morning protein timing correlating with sustained energy levels",confidence:"82%",members:6}].map((d,l)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(we,{className:"w-5 h-5 text-primary-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:d.insight}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Observed in ",d.members," members"]})]})]}),e.jsxs(_,{variant:"outline",className:"text-primary-600 border-primary-200",children:[d.confidence," confidence"]})]},l))})})})]})]})}const Re={insights:{endpoint:"GET /api/v1/insights",description:"Retrieve personalized insights for a user",response:{insights:[{id:"ins_001",category:"sleep",title:"Caffeine significantly impacts your sleep quality",certainty:.87,evidenceWeight:.82,actionable:!0,suggestedAction:"Limit caffeine after 2:15 PM",causalChain:["Caffeine intake","Adenosine blocking","Sleep latency","Sleep quality"]}],meta:{total:6,filtered:4,certaintyThreshold:.5}}},protocols:{endpoint:"GET /api/v1/protocols",description:"Get active and suggested protocols",response:{protocols:[{id:"prot_001",category:"sleep",title:"Caffeine Timing Protocol",status:"active",personalizedTiming:"No caffeine after 2:15 PM",expectedImpact:"+8% sleep score",certainty:.87}],meta:{active:2,suggested:3}}},simulate:{endpoint:"POST /api/v1/simulate",description:"Run what-if simulation",response:{simulation:{baseline:{sleepScore:72,hrv:45},projected:{sleepScore:78,hrv:48},change:{sleepScore:"+6",hrv:"+3"},certainty:.75,timeToEffect:"3-7 days",confidenceInterval:{low:74,high:82}}}},metrics:{endpoint:"GET /api/v1/metrics",description:"Retrieve raw metrics data",response:{metrics:[{date:"2024-12-15",sleepScore:72,sleepDuration:420,hrv:45,restingHr:58,steps:8500}],meta:{days:45,lastSync:"2024-12-15T08:30:00Z"}}}};function rc(){const{activePersona:t}=Se(),[a,s]=x.useState("insights"),[r,i]=x.useState(!1),[n,o]=x.useState(Re.insights.response),[u,m]=x.useState(!1);Object.entries(Re).map(([h,p])=>({value:h,label:p.endpoint.split(" ")[1].split("/").pop()||h}));const c=async()=>{i(!0),await We(800),o(Re[a].response),i(!1)},d=async()=>{await navigator.clipboard.writeText(JSON.stringify(n,null,2)),m(!0),setTimeout(()=>m(!1),2e3)},l=Re[a];return e.jsxs(Q,{title:"API Explorer",subtitle:"Explore Serif's REST API endpoints",children:[e.jsxs(B,{columns:2,gap:"lg",children:[e.jsxs("div",{children:[e.jsx(H,{title:"Available Endpoints",children:e.jsx("div",{className:"space-y-2",children:Object.entries(Re).map(([h,p])=>e.jsxs(M,{interactive:!0,onClick:()=>{s(h),o(p.response)},className:`p-4 ${a===h?"ring-2 ring-primary-500 border-primary-500":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_,{variant:p.endpoint.startsWith("GET")?"success":"primary",size:"sm",children:p.endpoint.split(" ")[0]}),e.jsx("code",{className:"text-sm font-mono text-gray-700",children:p.endpoint.split(" ")[1]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:p.description})]},h))})}),e.jsxs(H,{title:"Request",className:"mt-6",children:[e.jsxs(M,{className:"p-4 bg-gray-900",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 text-gray-400 text-xs",children:[e.jsx(jr,{className:"w-4 h-4"}),e.jsx("span",{children:"cURL"})]}),e.jsx("pre",{className:"text-sm text-green-400 font-mono overflow-x-auto",children:`curl -X ${l.endpoint.split(" ")[0]} \\
  '${l.endpoint.split(" ")[1]}' \\
  -H 'Authorization: Bearer <token>' \\
  -H 'X-User-ID: ${t?.id||"user_123"}'`})]}),e.jsxs(L,{onClick:c,loading:r,className:"mt-4",fullWidth:!0,children:[e.jsx(Ht,{className:"w-4 h-4 mr-2"}),"Run Request"]})]})]}),e.jsxs("div",{"data-tour":"api-response",children:[e.jsx(H,{title:"Response",actions:e.jsx(L,{size:"sm",variant:"ghost",onClick:d,children:u?e.jsx(K,{className:"w-4 h-4"}):e.jsx(Ne,{className:"w-4 h-4"})}),children:e.jsx(ut,{data:n,theme:"dark",expandLevel:3,className:"max-h-[600px] overflow-auto"})}),e.jsx(H,{title:"Response Schema",className:"mt-6",children:e.jsx(M,{className:"p-4",children:e.jsxs("div",{className:"space-y-3 text-sm",children:[a==="insights"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-mono text-primary-600",children:"certainty"}),e.jsx("span",{className:"text-gray-500 ml-2",children:"float (0-1)"}),e.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Confidence level based on personal data quality"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-mono text-primary-600",children:"evidenceWeight"}),e.jsx("span",{className:"text-gray-500 ml-2",children:"float (0-1)"}),e.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Balance between personal data vs population prior"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-mono text-primary-600",children:"causalChain"}),e.jsx("span",{className:"text-gray-500 ml-2",children:"string[]"}),e.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Causal path from action to outcome"})]})]}),a==="simulate"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-mono text-primary-600",children:"confidenceInterval"}),e.jsx("span",{className:"text-gray-500 ml-2",children:"object"}),e.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"95% confidence bounds for projected outcome"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-mono text-primary-600",children:"timeToEffect"}),e.jsx("span",{className:"text-gray-500 ml-2",children:"string"}),e.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Expected duration to see results"})]})]})]})})})]})]}),e.jsx(H,{title:"Integration Guide",className:"mt-8",children:e.jsx(M,{className:"p-6",children:e.jsxs(B,{columns:3,gap:"md",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"1. Authentication"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Use API keys for server-to-server, OAuth for user-facing apps. All requests require Authorization header."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"2. Rate Limits"}),e.jsx("p",{className:"text-sm text-gray-600",children:"1000 requests/minute per API key. Insights cached for 5 minutes. Real-time webhooks available for Pro tier."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"3. Webhooks"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Subscribe to insight.created, protocol.updated events. Retry with exponential backoff."})]})]})})}),e.jsx(H,{title:"Enterprise Architecture",className:"mt-8",children:e.jsxs(B,{columns:2,gap:"lg",children:[e.jsxs(M,{className:"p-6 border-2 border-blue-200 bg-gradient-to-br from-blue-50/50 to-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(zt,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Multi-Tenant Isolation"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Complete data separation per partner"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-gray-700",children:"Tenant-scoped encryption keys (AES-256)"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-gray-700",children:"Isolated compute environments per partner"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-gray-700",children:"Partner data never co-mingled in storage"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-gray-700",children:"Cross-platform learning uses anonymized aggregates only"})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:e.jsx("code",{className:"text-xs text-blue-800",children:"X-Tenant-ID: partner_human_edge"})})]}),e.jsxs(M,{className:"p-6 border-2 border-emerald-200 bg-gradient-to-br from-emerald-50/50 to-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:e.jsx(re,{className:"w-5 h-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"FHIR R4 Native"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Healthcare interoperability standard"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-gray-700",children:"Native FHIR R4 resource support"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-gray-700",children:"Observation, DiagnosticReport, Patient"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-gray-700",children:"SMART on FHIR authentication"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-gray-700",children:"Bulk FHIR export for analytics"})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-emerald-50 rounded-lg border border-emerald-200",children:e.jsx("code",{className:"text-xs text-emerald-800",children:"Content-Type: application/fhir+json"})})]})]})}),e.jsx(H,{title:"Security & Compliance",className:"mt-8",children:e.jsxs(M,{className:"p-6 border-2 border-violet-200 bg-gradient-to-r from-violet-50/30 to-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-violet-100 rounded-lg",children:e.jsx($e,{className:"w-5 h-5 text-violet-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Enterprise-Grade Security"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Built for healthcare data compliance"})]})]}),e.jsxs(B,{columns:4,gap:"md",children:[e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border border-violet-100",children:[e.jsx(wr,{className:"w-6 h-6 text-violet-500 mx-auto mb-2"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"HIPAA Ready"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"BAA available"})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border border-violet-100",children:[e.jsx($e,{className:"w-6 h-6 text-violet-500 mx-auto mb-2"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"SOC 2 Type II"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"In progress"})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border border-violet-100",children:[e.jsx(Nr,{className:"w-6 h-6 text-violet-500 mx-auto mb-2"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"End-to-End Encryption"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"TLS 1.3 + AES-256"})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border border-violet-100",children:[e.jsx(kr,{className:"w-6 h-6 text-violet-500 mx-auto mb-2"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Data Residency"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"US, EU options"})]})]})]})}),e.jsx(H,{title:"SDK Integration",className:"mt-8",children:e.jsxs(B,{columns:2,gap:"lg",children:[e.jsxs(M,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(_,{variant:"outline",children:"TypeScript"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Official SDK"})]}),e.jsx("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg text-xs overflow-x-auto",children:`import { SerifClient } from '@serif/sdk';

const serif = new SerifClient({
  apiKey: process.env.SERIF_API_KEY,
  tenantId: 'partner_human_edge'
});

// Get personalized insights
const insights = await serif.insights.list({
  userId: 'user_123',
  category: 'sleep',
  minCertainty: 0.7
});

// Run what-if simulation
const simulation = await serif.simulate({
  userId: 'user_123',
  intervention: { caffeineCutoff: '14:00' }
});`})]}),e.jsxs(M,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(_,{variant:"outline",children:"Python"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Official SDK"})]}),e.jsx("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg text-xs overflow-x-auto",children:`from serif import SerifClient

client = SerifClient(
    api_key=os.environ["SERIF_API_KEY"],
    tenant_id="partner_human_edge"
)

# Get personalized insights
insights = client.insights.list(
    user_id="user_123",
    category="sleep",
    min_certainty=0.7
)

# Subscribe to real-time updates
@client.on("insight.created")
def handle_insight(event):
    print(f"New insight: {event.data}")`})]})]})}),e.jsx(H,{title:"Enterprise SLA",className:"mt-8",children:e.jsx(M,{className:"p-6",children:e.jsxs(B,{columns:4,gap:"md",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-primary-600",children:"99.9%"}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Uptime SLA"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-primary-600",children:"<100ms"}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"P95 Latency"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-primary-600",children:"24/7"}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Enterprise Support"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-primary-600",children:"6 weeks"}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Avg Integration Time"})]})]})})})]})}function ic(){const[t,a]=x.useState(50),[s,r]=x.useState({insights:!0,protocols:!0,weeklyDigest:!0,deviceAlerts:!1});return e.jsxs(Q,{title:"Settings",subtitle:"Manage your preferences and account settings",children:[e.jsx(H,{title:"Insight Preferences",subtitle:"Control how insights are displayed",children:e.jsxs(B,{columns:2,gap:"md",children:[e.jsxs(M,{className:"p-5",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Certainty Threshold"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Minimum certainty level for showing insights. Lower values show more exploratory insights."}),e.jsx(dt,{value:t,onChange:a,min:0,max:100,step:5,showValue:!0,showLabels:!0,minLabel:"Exploratory",maxLabel:"High Confidence",variant:"certainty"})]}),e.jsxs(M,{className:"p-5",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Evidence Display"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ae,{label:"Show evidence breakdown",description:"Display personal vs population data contribution",checked:!0,size:"sm"}),e.jsx(ae,{label:"Show confidence intervals",description:"Display uncertainty ranges on predictions",checked:!0,size:"sm"}),e.jsx(ae,{label:"Explain causal chains",description:"Show how insights connect to outcomes",checked:!1,size:"sm"})]})]})]})}),e.jsx(H,{title:"Notifications",subtitle:"Choose what updates you receive",className:"mt-8",children:e.jsx(M,{className:"p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(ae,{label:"New insights",description:"Get notified when new high-certainty insights are discovered",checked:s.insights,onToggle:()=>r(i=>({...i,insights:!i.insights})),size:"sm"}),e.jsx(ae,{label:"Protocol reminders",description:"Daily reminders for your active protocols",checked:s.protocols,onToggle:()=>r(i=>({...i,protocols:!i.protocols})),size:"sm"}),e.jsx(ae,{label:"Weekly digest",description:"Summary of your progress and trends",checked:s.weeklyDigest,onToggle:()=>r(i=>({...i,weeklyDigest:!i.weeklyDigest})),size:"sm"}),e.jsx(ae,{label:"Device sync alerts",description:"Notify when device sync fails or data is stale",checked:s.deviceAlerts,onToggle:()=>r(i=>({...i,deviceAlerts:!i.deviceAlerts})),size:"sm"})]})})}),e.jsx(H,{title:"Privacy & Data",subtitle:"Manage your data and privacy settings",className:"mt-8",children:e.jsxs(B,{columns:2,gap:"md",children:[e.jsxs(M,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-50",children:e.jsx(re,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Data Management"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Control your health data"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(L,{variant:"outline",size:"sm",fullWidth:!0,children:"Export All Data"}),e.jsx(L,{variant:"outline",size:"sm",fullWidth:!0,children:"Download Insights Report"}),e.jsx(L,{variant:"outline",size:"sm",fullWidth:!0,className:"text-red-600 hover:bg-red-50",children:"Delete All Data"})]})]}),e.jsxs(M,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-50",children:e.jsx($e,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Privacy Controls"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage data sharing"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ae,{label:"Contribute to research",description:"Allow anonymized data for health research",checked:!1,size:"sm"}),e.jsx(ae,{label:"Share with coach",description:"Allow your coach to view your insights",checked:!0,size:"sm"})]})]})]})}),e.jsx(H,{title:"Connected Accounts",subtitle:"Manage linked services",className:"mt-8",children:e.jsx(M,{className:"p-5",children:e.jsx("div",{className:"space-y-4",children:[{name:"Apple Health",connected:!0,lastSync:"2 hours ago"},{name:"Oura Ring",connected:!0,lastSync:"30 minutes ago"},{name:"Vitals+ Labs",connected:!0,lastSync:"3 days ago"},{name:"Garmin Connect",connected:!1}].map(i=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${i.connected?"bg-green-500":"bg-gray-300"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:i.name}),i.connected&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Last synced: ",i.lastSync]})]})]}),e.jsx(L,{variant:"outline",size:"sm",children:i.connected?"Disconnect":"Connect"})]},i.name))})})})]})}const nc=[{id:"he-ds-labs",type:"pathology-lab",name:"Partner Pathology Labs",description:"Thyrocare, Metropolis - ~78 biomarkers via PDF/HL7. OCR pipeline (Google Vision + regex) â†’ BigQuery blood_results",cadence:"quarterly",pipeline:"Lab PDF â†’ Portal/Email â†’ OCR (Vision/Textract) â†’ Validation â†’ BigQuery",lastSync:"2025-01-15T08:30:00Z",status:"active",recordCount:15420},{id:"he-ds-terra",type:"terra-api",name:"Terra API Aggregator",description:"Apple Watch, Fitbit, Garmin, Oura - steps, HR, HRV, sleep stages, workouts, stress",cadence:"continuous",pipeline:"User OAuth â†’ Terra webhook â†’ GCP Pub/Sub â†’ Kafka â†’ BigQuery raw_wearable â†’ daily ETL",lastSync:"2025-01-20T06:00:00Z",status:"active",recordCount:2847e3},{id:"he-ds-cgm",type:"ble-device",name:"CGM (Abbott FreeStyle Libre)",description:"Continuous glucose monitoring - interstitial glucose every 15 min, TIR/TAR metrics",cadence:"continuous",pipeline:"LibreView Cloud â†’ Terra pull â†’ webhook â†’ BigQuery cgm_readings",lastSync:"2025-01-20T05:45:00Z",status:"active",recordCount:892e3},{id:"he-ds-bp",type:"ble-device",name:"BP Monitor (Omron Connect)",description:"Blood pressure readings - SBP/DBP, HR",cadence:"event-based",pipeline:"Omron Cloud â†’ Terra â†’ BigQuery bp_readings",lastSync:"2025-01-19T19:30:00Z",status:"active",recordCount:8450},{id:"he-ds-scale",type:"ble-device",name:"Body Composition Scale (Withings)",description:"Weight, body fat %, muscle mass, bone mass, water %",cadence:"event-based",pipeline:"Withings Health Cloud â†’ Terra â†’ BigQuery weight_readings",lastSync:"2025-01-20T07:15:00Z",status:"active",recordCount:4200},{id:"he-ds-profile",type:"self-report",name:"Profile & Lifestyle Forms",description:"Demographics, diet, caffeine/alcohol, goals, medications, surgeries",cadence:"event-based",pipeline:"React-Native form â†’ Firestore user_profile â†’ Cloud Function â†’ BigQuery",lastSync:"2025-01-18T14:00:00Z",status:"active",recordCount:1250},{id:"he-ds-surveys",type:"self-report",name:"Weekly Micro-Surveys",description:"Sleep quality, stress, energy, mood - subjective wellbeing tracking",cadence:"weekly",pipeline:"App survey â†’ Firestore â†’ BigQuery survey_responses",lastSync:"2025-01-19T20:00:00Z",status:"active",recordCount:18500},{id:"he-ds-interventions",type:"intervention",name:"Intervention Catalogue",description:"1,200 clinician-vetted intervention codes (nutrition, Zone-2, supplements, sleep hygiene)",cadence:"event-based",pipeline:"PostgreSQL CMS â†’ REST API â†’ BigQuery intervention_events",lastSync:"2025-01-20T02:00:00Z",status:"active",recordCount:32e3},{id:"he-ds-compliance",type:"compliance",name:"Compliance & Behavior Logs",description:"Adherence tracking - passive detection from wearables + manual confirmations",cadence:"daily",pipeline:"Compliance micro-service evaluates sensors vs. goal â†’ compliance_log at 02:00 local",lastSync:"2025-01-20T02:00:00Z",status:"active",recordCount:156e3},{id:"he-ds-environment",type:"environment",name:"Environmental Context",description:"Weather (temp, humidity), AQI, daylight hours - nightly pull",cadence:"daily",pipeline:"OpenWeatherMap/BreezoMeter APIs â†’ nightly cron â†’ BigQuery environment_context",lastSync:"2025-01-20T00:00:00Z",status:"active",recordCount:45e3},{id:"he-ds-engagement",type:"engagement",name:"Engagement & UX Telemetry",description:"Push delivery, open/click rates, screen views",cadence:"real-time",pipeline:"Firebase Cloud Messaging + Analytics â†’ BigQuery eng_events",lastSync:"2025-01-20T07:59:00Z",status:"active",recordCount:425e4}],oc=[{id:"x-steps",name:"Daily Steps",category:"Activity",dataSource:"terra-api",unit:"steps",description:"Total daily step count from wearable",sampleRate:"daily"},{id:"x-active-energy",name:"Active Energy",category:"Activity",dataSource:"terra-api",unit:"kcal",description:"Calories burned through activity",sampleRate:"daily"},{id:"x-zone2-minutes",name:"Zone 2 Training Minutes",category:"Exercise",dataSource:"terra-api",unit:"minutes",description:"Time spent in aerobic zone (60-70% max HR)",sampleRate:"daily"},{id:"x-workout-frequency",name:"Workout Frequency",category:"Exercise",dataSource:"terra-api",unit:"sessions/week",description:"Number of logged workouts per week",sampleRate:"weekly"},{id:"x-sleep-duration",name:"Sleep Duration",category:"Sleep",dataSource:"terra-api",unit:"hours",description:"Total time asleep",sampleRate:"daily"},{id:"x-deep-sleep",name:"Deep Sleep",category:"Sleep",dataSource:"terra-api",unit:"minutes",description:"Time in deep/slow-wave sleep",sampleRate:"daily"},{id:"x-rem-sleep",name:"REM Sleep",category:"Sleep",dataSource:"terra-api",unit:"minutes",description:"Time in REM sleep stage",sampleRate:"daily"},{id:"x-sleep-latency",name:"Sleep Latency",category:"Sleep",dataSource:"terra-api",unit:"minutes",description:"Time to fall asleep",sampleRate:"daily"},{id:"x-hrv",name:"Heart Rate Variability",category:"Recovery",dataSource:"terra-api",unit:"ms RMSSD",description:"Overnight HRV - parasympathetic tone indicator",sampleRate:"daily"},{id:"x-resting-hr",name:"Resting Heart Rate",category:"Recovery",dataSource:"terra-api",unit:"bpm",description:"Lowest sustained HR during sleep",sampleRate:"daily"},{id:"x-stress-score",name:"Stress Score",category:"Recovery",dataSource:"terra-api",unit:"0-100",description:"Garmin/Fitbit stress index",sampleRate:"daily"},{id:"x-avg-glucose",name:"Average Glucose",category:"Metabolic",dataSource:"ble-device",unit:"mg/dL",description:"Mean interstitial glucose over 24h",sampleRate:"96/day"},{id:"x-glucose-variability",name:"Glucose Variability",category:"Metabolic",dataSource:"ble-device",unit:"CV%",description:"Coefficient of variation in glucose",sampleRate:"daily"},{id:"x-time-in-range",name:"Time in Range",category:"Metabolic",dataSource:"ble-device",unit:"%",description:"Percentage of time glucose 70-140 mg/dL",sampleRate:"daily"},{id:"x-dawn-effect",name:"Dawn Phenomenon",category:"Metabolic",dataSource:"ble-device",unit:"mg/dL rise",description:"Morning glucose spike (4-8am)",sampleRate:"daily"},{id:"x-systolic",name:"Systolic BP",category:"Cardiovascular",dataSource:"ble-device",unit:"mmHg",description:"Systolic blood pressure",sampleRate:"event-based"},{id:"x-diastolic",name:"Diastolic BP",category:"Cardiovascular",dataSource:"ble-device",unit:"mmHg",description:"Diastolic blood pressure",sampleRate:"event-based"},{id:"x-weight",name:"Body Weight",category:"Body Composition",dataSource:"ble-device",unit:"kg",description:"Morning fasted weight",sampleRate:"event-based"},{id:"x-body-fat",name:"Body Fat Percentage",category:"Body Composition",dataSource:"ble-device",unit:"%",description:"Bioimpedance-estimated body fat",sampleRate:"event-based"},{id:"x-hba1c",name:"HbA1c",category:"Metabolic Lab",dataSource:"pathology-lab",unit:"%",description:"Glycated hemoglobin - 3mo glucose average",sampleRate:"quarterly"},{id:"x-fasting-insulin",name:"Fasting Insulin",category:"Metabolic Lab",dataSource:"pathology-lab",unit:"mIU/L",description:"Insulin resistance marker",sampleRate:"quarterly"},{id:"x-apob",name:"ApoB",category:"Lipid Lab",dataSource:"pathology-lab",unit:"mg/dL",description:"Atherogenic particle count",sampleRate:"quarterly"},{id:"x-hscrp",name:"hs-CRP",category:"Inflammatory Lab",dataSource:"pathology-lab",unit:"mg/L",description:"High-sensitivity C-reactive protein",sampleRate:"quarterly"},{id:"x-vitamin-d",name:"Vitamin D (25-OH)",category:"Vitamin Lab",dataSource:"pathology-lab",unit:"ng/mL",description:"Vitamin D status",sampleRate:"quarterly"},{id:"x-aqi",name:"Air Quality Index",category:"Environment",dataSource:"environment",unit:"AQI",description:"Local air quality from BreezoMeter",sampleRate:"daily"},{id:"x-temp",name:"Ambient Temperature",category:"Environment",dataSource:"environment",unit:"Â°C",description:"Local weather temperature",sampleRate:"daily"},{id:"x-daylight",name:"Daylight Hours",category:"Environment",dataSource:"environment",unit:"hours",description:"Hours of daylight",sampleRate:"daily"},{id:"x-caffeine",name:"Caffeine Intake",category:"Lifestyle",dataSource:"self-report",unit:"units/day",description:"Self-reported caffeine consumption",sampleRate:"weekly"},{id:"x-alcohol",name:"Alcohol Intake",category:"Lifestyle",dataSource:"self-report",unit:"units/week",description:"Self-reported alcohol consumption",sampleRate:"weekly"},{id:"x-subjective-stress",name:"Subjective Stress",category:"Wellbeing",dataSource:"self-report",unit:"1-5",description:"Weekly self-reported stress level",sampleRate:"weekly"}],lc=[{id:"y-hba1c",name:"HbA1c",category:"Metabolic",description:"Glycemic control - target <5.7%",targetDirection:"decrease",unit:"%"},{id:"y-fasting-glucose",name:"Fasting Glucose",category:"Metabolic",description:"Morning fasted blood glucose - target 70-100 mg/dL",targetDirection:"optimize",unit:"mg/dL"},{id:"y-time-in-range",name:"Time in Range",category:"Metabolic",description:"CGM time 70-140 mg/dL - target >90%",targetDirection:"increase",unit:"%"},{id:"y-apob",name:"ApoB",category:"Cardiovascular",description:"Atherogenic burden - target <90 mg/dL",targetDirection:"decrease",unit:"mg/dL"},{id:"y-hscrp",name:"hs-CRP",category:"Inflammation",description:"Systemic inflammation - target <1.0 mg/L",targetDirection:"decrease",unit:"mg/L"},{id:"y-body-fat",name:"Body Fat Percentage",category:"Body Composition",description:"Target: men <20%, women <28%",targetDirection:"decrease",unit:"%"},{id:"y-vo2max",name:"VO2 Max",category:"Fitness",description:"Cardiorespiratory fitness - target age-appropriate percentile",targetDirection:"increase",unit:"mL/kg/min"},{id:"y-hrv",name:"HRV (RMSSD)",category:"Recovery",description:"Autonomic balance - higher is generally better",targetDirection:"increase",unit:"ms"},{id:"y-sleep-efficiency",name:"Sleep Efficiency",category:"Sleep",description:"Time asleep / time in bed - target >85%",targetDirection:"increase",unit:"%"},{id:"y-deep-sleep-pct",name:"Deep Sleep Percentage",category:"Sleep",description:"Restorative sleep proportion - target 15-20%",targetDirection:"optimize",unit:"%"}],cc=[{id:"he-user-001",name:"Arjun K.",avatar:"ðŸ‘¨â€ðŸ’¼",enrollmentDate:"2024-07-15",activeDays:180,complianceRate:94,currentPhase:"Optimization",tags:["prediabetes","tech-professional","apple-watch","cgm-user"]},{id:"he-user-002",name:"Priya M.",avatar:"ðŸ‘©â€âš•ï¸",enrollmentDate:"2024-09-01",activeDays:135,complianceRate:88,currentPhase:"Active Intervention",tags:["metabolic-syndrome","physician","garmin","high-engagement"]},{id:"he-user-003",name:"Vikram S.",avatar:"ðŸ§‘â€ðŸ’»",enrollmentDate:"2024-06-01",activeDays:225,complianceRate:91,currentPhase:"Maintenance",tags:["diabetes-reversal","entrepreneur","oura","cgm-user","star-performer"]},{id:"he-user-004",name:"Anita R.",avatar:"ðŸ‘©â€ðŸ«",enrollmentDate:"2024-10-15",activeDays:95,complianceRate:76,currentPhase:"Baseline",tags:["weight-management","educator","fitbit","new-user"]}],dc=[{id:"he-insight-001",title:"Post-Dinner Walk Improves Glucose Response",description:"A 15-minute walk within 30 minutes after dinner reduces glucose spike by 18% on average",xVariables:["x-steps","x-avg-glucose"],yVariable:"y-time-in-range",modelType:"causal",confidence:.89,theta:1500,beta:.18,recommendation:"Schedule a 15-minute walk after your largest meal of the day",linkedResources:["cgm-reading-001","wearable-001"]},{id:"he-insight-002",title:"Sleep Duration Correlates with HRV",description:"Each additional hour of sleep above 6h increases next-day HRV by ~8ms",xVariables:["x-sleep-duration","x-deep-sleep"],yVariable:"y-hrv",modelType:"causal",confidence:.82,theta:6,beta:8,recommendation:"Prioritize 7-8 hours of sleep for optimal recovery",linkedResources:["wearable-sleep-001"]},{id:"he-insight-003",title:"Zone 2 Training Reduces hs-CRP",description:"â‰¥150 min/week of Zone 2 cardio associated with 22% lower hs-CRP at 90 days",xVariables:["x-zone2-minutes","x-workout-frequency"],yVariable:"y-hscrp",modelType:"causal",confidence:.78,theta:150,beta:-.22,recommendation:"Build to 150+ minutes of Zone 2 training weekly (walking, easy cycling)",linkedResources:["lab-crp-001","wearable-workout-001"]},{id:"he-insight-004",title:"Caffeine Cutoff Improves Deep Sleep",description:"No caffeine after 2pm increases deep sleep duration by 12 minutes on average",xVariables:["x-caffeine","x-sleep-latency"],yVariable:"y-deep-sleep-pct",modelType:"causal",confidence:.75,theta:14,beta:12,recommendation:"Avoid caffeine after 2pm to protect deep sleep",linkedResources:["survey-001","wearable-sleep-002"]},{id:"he-insight-005",title:"Fasting Insulin Predicts Glucose Variability",description:"Fasting insulin >10 mIU/L associated with 35% higher glucose CV",xVariables:["x-fasting-insulin"],yVariable:"y-time-in-range",modelType:"predictive",confidence:.85,theta:10,beta:.35,recommendation:"Focus on insulin sensitizing interventions: time-restricted eating, strength training",linkedResources:["lab-insulin-001","cgm-summary-001"]},{id:"he-insight-006",title:"Dawn Phenomenon Mitigation via Evening Routine",description:"Completing sleep hygiene protocol reduces morning glucose spike by 15 mg/dL",xVariables:["x-dawn-effect","x-sleep-duration","x-sleep-latency"],yVariable:"y-fasting-glucose",modelType:"causal",confidence:.72,theta:0,beta:-15,recommendation:"Follow evening wind-down: dim lights 9pm, no screens 10pm, bedroom 18Â°C",linkedResources:["cgm-dawn-001","compliance-001"]}],mc={id:"human-edge",name:"Elevated Health",logo:"ðŸƒâ€â™‚ï¸",description:"Comprehensive metabolic health optimization platform with ~78 biomarkers, continuous wearable data, CGM, and clinician-guided interventions",dataSources:nc,xVariables:oc,yVariables:lc,insights:dc,users:cc},uc=[{id:"hb-ds-habits",type:"self-report",name:"Habit Tracker Core",description:"Primary habit logging via band tap + app confirmation. Captures completion timestamps, streak data, habit metadata, and contextual notes.",cadence:"real-time",pipeline:"Band BLE tap → Mobile SDK → Firebase Realtime → Cloud Function → BigQuery habit_completions",lastSync:"2025-01-20T08:15:00Z",status:"active",recordCount:12450},{id:"hb-ds-terra",type:"terra-api",name:"Wearables (Terra API)",description:"Apple Watch, Fitbit, Garmin integration for sleep quality, HRV, steps, and activity correlation with habit success.",cadence:"continuous",pipeline:"User OAuth → Terra webhook → GCP Pub/Sub → BigQuery raw_wearable → daily ETL join with habits",lastSync:"2025-01-20T06:00:00Z",status:"active",recordCount:245e3},{id:"hb-ds-surveys",type:"self-report",name:"Weekly Check-ins",description:"Motivation score, habit difficulty ratings, mood, life events. Used for confounding control in causal models.",cadence:"weekly",pipeline:"App survey modal → Firestore → Cloud Function → BigQuery weekly_surveys",lastSync:"2025-01-19T20:00:00Z",status:"active",recordCount:890},{id:"hb-ds-engagement",type:"engagement",name:"App Engagement Telemetry",description:"Notification delivery/response times, app opens, screen views, feature usage, reminder interactions.",cadence:"real-time",pipeline:"Firebase Analytics + Cloud Messaging → BigQuery engagement_events",lastSync:"2025-01-20T08:20:00Z",status:"active",recordCount:78500}],hc=[{id:"x-completion-hour",name:"Habit Completion Hour",category:"Timing",dataSource:"self-report",unit:"hour (0-23)",description:"Hour of day when habit was completed",sampleRate:"per-completion"},{id:"x-day-of-week",name:"Day of Week",category:"Timing",dataSource:"self-report",unit:"1-7",description:"Day of week (1=Monday, 7=Sunday)",sampleRate:"daily"},{id:"x-days-since-start",name:"Days Since Habit Started",category:"Timing",dataSource:"self-report",unit:"days",description:"Number of days since habit was created",sampleRate:"daily"},{id:"x-current-streak",name:"Current Streak Length",category:"Behavior",dataSource:"self-report",unit:"days",description:"Consecutive days habit completed without break",sampleRate:"daily"},{id:"x-reminder-response-time",name:"Reminder Response Time",category:"Behavior",dataSource:"engagement",unit:"minutes",description:"Time between reminder notification and habit completion",sampleRate:"per-completion"},{id:"x-habit-stack-count",name:"Habit Stack Count",category:"Behavior",dataSource:"self-report",unit:"count",description:"Number of habits completed within 30-min window (stacking)",sampleRate:"per-completion"},{id:"x-previous-day-completed",name:"Previous Day Completion",category:"Behavior",dataSource:"self-report",unit:"boolean (0/1)",description:"Whether habit was completed the previous day",sampleRate:"daily"},{id:"x-sleep-score",name:"Prior Night Sleep Score",category:"Context",dataSource:"terra-api",unit:"0-100",description:"Sleep quality score from previous night",sampleRate:"daily"},{id:"x-morning-hrv",name:"Morning HRV",category:"Context",dataSource:"terra-api",unit:"ms RMSSD",description:"Heart rate variability upon waking",sampleRate:"daily"},{id:"x-prior-day-steps",name:"Prior Day Steps",category:"Context",dataSource:"terra-api",unit:"steps",description:"Total steps from previous day",sampleRate:"daily"},{id:"x-app-opens",name:"Daily App Opens",category:"Engagement",dataSource:"engagement",unit:"count",description:"Number of times app opened that day",sampleRate:"daily"},{id:"x-time-in-app",name:"Time in App",category:"Engagement",dataSource:"engagement",unit:"minutes",description:"Total time spent in app that day",sampleRate:"daily"},{id:"x-notification-tap-rate",name:"Notification Tap Rate",category:"Engagement",dataSource:"engagement",unit:"%",description:"7-day rolling average of notification tap rate",sampleRate:"daily"},{id:"x-motivation-score",name:"Weekly Motivation Score",category:"Self-Report",dataSource:"self-report",unit:"1-10",description:"Self-reported motivation level from weekly survey",sampleRate:"weekly"},{id:"x-perceived-difficulty",name:"Perceived Habit Difficulty",category:"Self-Report",dataSource:"self-report",unit:"1-5",description:"How hard the habit feels to complete",sampleRate:"weekly"}],pc=[{id:"y-completion-rate",name:"Daily Habit Completion Rate",category:"Habit Success",description:"Percentage of target habits completed each day - target 80%+",targetDirection:"increase",unit:"%"},{id:"y-streak-survival",name:"Streak Survival Days",category:"Habit Success",description:"Number of days until streak is broken - higher is better",targetDirection:"increase",unit:"days"},{id:"y-weekly-consistency",name:"Weekly Completion Consistency",category:"Habit Success",description:"Consistency of completion times across the week (lower variance = better)",targetDirection:"optimize",unit:"std dev (hours)"},{id:"y-automaticity",name:"Habit Automaticity Score",category:"Habit Formation",description:"Self-reported ease of habit (SRHI scale) - target 5+",targetDirection:"increase",unit:"1-7 scale"},{id:"y-retention",name:"30-Day User Retention",category:"Engagement",description:"Whether user is still active after 30 days",targetDirection:"increase",unit:"boolean"}],xc=[{id:"hb-user-001",name:"Marcus T.",avatar:"💪",enrollmentDate:"2024-12-05",activeDays:45,complianceRate:92,currentPhase:"Active Optimization",tags:["fitness-focused","morning-person","apple-watch","high-performer"],dataSources:["Apple Watch","Habit Band","Weekly Surveys"],insightCount:4},{id:"hb-user-002",name:"Elena R.",avatar:"🌱",enrollmentDate:"2024-12-30",activeDays:21,complianceRate:68,currentPhase:"Baseline",tags:["new-user","multiple-habits","needs-reminders","evening-person"],dataSources:["Fitbit","Habit Band","Weekly Surveys"],insightCount:3}],gc=[{id:"hb-insight-001",title:"Morning Magic Window",description:'Habits completed before 8 AM have 2.3x higher streak survival than those completed later. Early completion creates psychological "win" that reinforces the habit loop.',xVariables:["x-completion-hour","x-sleep-score"],yVariable:"y-streak-survival",modelType:"causal",confidence:.87,theta:8,beta:2.3,recommendation:"Set habit reminders for 6:30-7:30 AM. Complete highest-priority habit before breakfast.",linkedResources:["habit-log-001","wearable-sleep-001"]},{id:"hb-insight-002",title:"Habit Stacking Multiplier",description:"Completing a new habit immediately after an existing routine increases completion rate by 47%. Anchoring to established behaviors reduces friction.",xVariables:["x-habit-stack-count","x-previous-day-completed"],yVariable:"y-completion-rate",modelType:"causal",confidence:.82,theta:1,beta:.47,recommendation:"Pair new habits with existing routines: meditation after morning coffee, stretching after brushing teeth.",linkedResources:["habit-stack-001"]},{id:"hb-insight-003",title:"Sleep-Habit Connection",description:"Sleep quality below 70% predicts a 35% drop in next-day habit completion. Poor sleep depletes willpower reserves needed for habit execution.",xVariables:["x-sleep-score","x-morning-hrv"],yVariable:"y-completion-rate",modelType:"causal",confidence:.79,theta:70,beta:-.35,recommendation:"On low-sleep days, reduce habit targets to essentials only. Protect sleep as the foundation.",linkedResources:["wearable-sleep-002","habit-log-002"]},{id:"hb-insight-004",title:"Reminder Response Window",description:"Responding to habit reminders within 5 minutes correlates with 89% completion rate. Delayed response drops completion to 34%.",xVariables:["x-reminder-response-time","x-notification-tap-rate"],yVariable:"y-completion-rate",modelType:"causal",confidence:.91,theta:5,beta:.89,recommendation:"Act immediately when reminder fires. Set reminders for moments of low friction (post-meal, transitions).",linkedResources:["engagement-001"]}],fc={id:"habit-bandz",name:"Habit Bandz",logo:"🎯",description:"Habit tracking platform with companion wearable band. Focus on behavioral habit formation, streak optimization, and habit stacking. 2 pilot users in early beta.",dataSources:uc,xVariables:hc,yVariables:pc,insights:gc,users:xc},Hs=[mc,fc];function _t(t){return Hs.find(a=>a.id===t)}function bc(){return Hs.map(t=>({id:t.id,name:t.name,logo:t.logo,dataSourceCount:t.dataSources.length,xVariableCount:t.xVariables.length,yVariableCount:t.yVariables.length,insightCount:t.insights.length,userCount:t.users.length,totalRecords:t.dataSources.reduce((a,s)=>a+(s.recordCount||0),0)}))}function yc(){const t=[],a=new Date("2025-01-20");for(let s=44;s>=0;s--){const r=new Date(a);r.setDate(r.getDate()-s);const i=r.toISOString().split("T")[0],n=r.getDay()===0||r.getDay()===6,o=70+Math.floor(Math.random()*25),u=42+Math.floor(Math.random()*18),m=.92,c=o<70?.15:0,d=m-c,l=[];if(Math.random()<d+.05){const h=n?7+Math.random()*1.5:6+Math.random();l.push({habitId:"habit-workout",completedAt:`${i}T${String(Math.floor(h)).padStart(2,"0")}:${String(Math.floor(h%1*60)).padStart(2,"0")}:00Z`,reminderResponseMin:Math.floor(Math.random()*3)+1})}if(l.length>0&&Math.random()<d){const h=new Date(l[0].completedAt);h.setMinutes(h.getMinutes()+35+Math.floor(Math.random()*15)),l.push({habitId:"habit-meditation",completedAt:h.toISOString(),reminderResponseMin:Math.floor(Math.random()*2)+1})}Math.random()<d-.05&&l.push({habitId:"habit-reading",completedAt:`${i}T${21+Math.floor(Math.random()*2)}:${String(Math.floor(Math.random()*60)).padStart(2,"0")}:00Z`,reminderResponseMin:Math.floor(Math.random()*8)+2}),t.push({date:i,habitsCompleted:l.length,habitsTarget:3,completions:l,sleepScorePriorNight:o,hrvMorning:u,motivationLevel:7+Math.floor(Math.random()*3)})}return t}function vc(){const t=[],a=new Date("2025-01-20");for(let s=20;s>=0;s--){const r=new Date(a);r.setDate(r.getDate()-s);const i=r.toISOString().split("T")[0],n=r.getDay()===0||r.getDay()===6,o=55+Math.floor(Math.random()*35),u=35+Math.floor(Math.random()*20),m=.68,c=o<70?.25:0,d=n?.1:0,l=m-c+d,h=[];if(Math.random()<l+.15&&h.push({habitId:"habit-journaling",completedAt:`${i}T${20+Math.floor(Math.random()*2)}:${String(Math.floor(Math.random()*60)).padStart(2,"0")}:00Z`,reminderResponseMin:Math.floor(Math.random()*5)+2}),h.some(p=>p.habitId==="habit-journaling")&&Math.random()<.87){const p=new Date(h.find(f=>f.habitId==="habit-journaling").completedAt);p.setMinutes(p.getMinutes()+10+Math.floor(Math.random()*10)),h.push({habitId:"habit-gratitude",completedAt:p.toISOString(),reminderResponseMin:1})}Math.random()<l-.1&&h.push({habitId:"habit-stretching",completedAt:`${i}T${18+Math.floor(Math.random()*3)}:${String(Math.floor(Math.random()*60)).padStart(2,"0")}:00Z`,reminderResponseMin:Math.floor(Math.random()*15)+5}),Math.random()<l-.15&&h.push({habitId:"habit-water",completedAt:`${i}T${12+Math.floor(Math.random()*8)}:${String(Math.floor(Math.random()*60)).padStart(2,"0")}:00Z`,reminderResponseMin:Math.floor(Math.random()*20)+5}),Math.random()<l-.25&&h.push({habitId:"habit-screen-cutoff",completedAt:`${i}T21:30:00Z`,reminderResponseMin:Math.floor(Math.random()*10)+3}),t.push({date:i,habitsCompleted:h.length,habitsTarget:5,completions:h,sleepScorePriorNight:o,hrvMorning:u,motivationLevel:5+Math.floor(Math.random()*4)})}return t}const jc={userId:"hb-user-001",name:"Marcus T.",avatar:"💪",archetype:"The Streak Builder",enrollmentDate:"2024-12-05",activeDays:45,complianceRate:92,currentPhase:"Active Optimization",tags:["fitness-focused","morning-person","apple-watch","high-performer"],dataSources:[{id:"ds-apple",name:"Apple Watch",icon:"watch",connected:!0,lastSync:"2025-01-20T08:00:00Z"},{id:"ds-band",name:"Habit Band",icon:"target",connected:!0,lastSync:"2025-01-20T07:15:00Z"},{id:"ds-surveys",name:"Weekly Surveys",icon:"clipboard",connected:!0,lastSync:"2025-01-19T20:00:00Z"}],habits:[{id:"habit-workout",name:"Morning Workout",category:"Fitness",emoji:"🏋️",targetFrequency:"daily",currentStreak:28,bestStreak:28,completionRate:96,avgCompletionTime:"6:45 AM"},{id:"habit-meditation",name:"Meditation",category:"Mindfulness",emoji:"🧘",targetFrequency:"daily",currentStreak:28,bestStreak:28,completionRate:91,avgCompletionTime:"7:25 AM",stackedWith:"habit-workout"},{id:"habit-reading",name:"Evening Reading",category:"Learning",emoji:"📚",targetFrequency:"daily",currentStreak:12,bestStreak:19,completionRate:84,avgCompletionTime:"9:30 PM"}],dailyLogs:yc(),personalInsights:[{id:"ins-marcus-001",title:"Early Bird Advantage",subtitle:"Your workouts before 7 AM have 98% streak survival",xVariable:"Workout completion time",yVariable:"Streak survival",theta:{value:7,unit:"hour",displayValue:"7:00 AM"},betaBelow:{value:.98,description:"98% streak survival rate"},betaAbove:{value:-.18,description:"-18% survival per hour after 7 AM"},currentValue:6.75,currentUnit:"hour",currentStatus:"at_optimal",personalDataPct:94,populationDataPct:6,observations:42,daysOfData:45,curveType:"plateau_down",actionableAdvice:"Your 6:45 AM average is perfect. Keep protecting this window."},{id:"ins-marcus-002",title:"Meditation Stack",subtitle:"Stacking meditation after workout gives 3x streak survival",xVariable:"Minutes after workout",yVariable:"Meditation streak",theta:{value:45,unit:"min",displayValue:"45 min after workout"},betaBelow:{value:3,description:"3x streak survival"},betaAbove:{value:-.5,description:"-50% survival if delayed >45 min"},currentValue:35,currentUnit:"min",currentStatus:"at_optimal",personalDataPct:91,populationDataPct:9,observations:38,daysOfData:45,curveType:"plateau_down",actionableAdvice:"Your habit stack is working perfectly. Meditation follows workout 91% of the time."},{id:"ins-marcus-003",title:"Sleep-Recovery Link",subtitle:"HRV below 45ms predicts skipped meditation",xVariable:"Morning HRV",yVariable:"Meditation completion",theta:{value:45,unit:"ms",displayValue:"45 ms RMSSD"},betaBelow:{value:-.28,description:"-28% completion rate"},betaAbove:{value:.02,description:"Minimal additional benefit"},currentValue:52,currentUnit:"ms",currentStatus:"at_optimal",personalDataPct:88,populationDataPct:12,observations:45,daysOfData:45,curveType:"plateau_up",actionableAdvice:"Your average HRV is 52ms - well above threshold. Keep prioritizing recovery."},{id:"ins-marcus-004",title:"Reading Timing",subtitle:"Reading after 10 PM reduces next-day workout quality",xVariable:"Reading completion time",yVariable:"Next-day workout intensity",theta:{value:22,unit:"hour",displayValue:"10:00 PM"},betaBelow:{value:.85,description:"85% workout intensity maintained"},betaAbove:{value:-.12,description:"-12% intensity per hour after 10 PM"},currentValue:21.5,currentUnit:"hour",currentStatus:"at_optimal",personalDataPct:78,populationDataPct:22,observations:35,daysOfData:45,curveType:"plateau_down",actionableAdvice:"Your 9:30 PM average is great. Consider a hard stop at 10 PM."}],keyMetrics:[{id:"km-streak",name:"Current Streak",value:28,unit:"days",change:7,changeDirection:"up",isGood:!0,sparklineData:[14,15,18,21,24,26,28],period:"7-day"},{id:"km-completion",name:"Completion Rate",value:92,unit:"%",change:4,changeDirection:"up",isGood:!0,sparklineData:[85,87,88,90,91,91,92],period:"7-day"},{id:"km-consistency",name:"Timing Consistency",value:.8,unit:"hr std",change:-.3,changeDirection:"down",isGood:!0,sparklineData:[1.4,1.2,1.1,1,.9,.85,.8],period:"7-day"},{id:"km-response",name:"Avg Reminder Response",value:2.1,unit:"min",change:-.8,changeDirection:"down",isGood:!0,sparklineData:[3.5,3.2,2.8,2.5,2.3,2.2,2.1],period:"7-day"}],weeklyStats:[{week:"2025-W03",completionRate:92,avgStreakLength:26,habitStackEvents:6,avgReminderResponse:2.1},{week:"2025-W02",completionRate:90,avgStreakLength:19,habitStackEvents:6,avgReminderResponse:2.5},{week:"2025-W01",completionRate:88,avgStreakLength:12,habitStackEvents:5,avgReminderResponse:3.2},{week:"2024-W52",completionRate:85,avgStreakLength:5,habitStackEvents:4,avgReminderResponse:4.1}]},wc={userId:"hb-user-002",name:"Elena R.",avatar:"🌱",archetype:"The Habit Explorer",enrollmentDate:"2024-12-30",activeDays:21,complianceRate:68,currentPhase:"Baseline",tags:["new-user","multiple-habits","needs-reminders","evening-person"],dataSources:[{id:"ds-fitbit",name:"Fitbit",icon:"watch",connected:!0,lastSync:"2025-01-20T07:30:00Z"},{id:"ds-band",name:"Habit Band",icon:"target",connected:!0,lastSync:"2025-01-20T06:45:00Z"},{id:"ds-surveys",name:"Weekly Surveys",icon:"clipboard",connected:!0,lastSync:"2025-01-19T21:00:00Z"}],habits:[{id:"habit-journaling",name:"Evening Journaling",category:"Mindfulness",emoji:"📝",targetFrequency:"daily",currentStreak:5,bestStreak:8,completionRate:81,avgCompletionTime:"8:45 PM"},{id:"habit-gratitude",name:"Gratitude Practice",category:"Mindfulness",emoji:"🙏",targetFrequency:"daily",currentStreak:5,bestStreak:7,completionRate:76,avgCompletionTime:"9:00 PM",stackedWith:"habit-journaling"},{id:"habit-stretching",name:"Evening Stretching",category:"Fitness",emoji:"🧘‍♀️",targetFrequency:"daily",currentStreak:2,bestStreak:5,completionRate:58,avgCompletionTime:"7:15 PM"},{id:"habit-water",name:"Water Intake (8 glasses)",category:"Health",emoji:"💧",targetFrequency:"daily",currentStreak:1,bestStreak:4,completionRate:52,avgCompletionTime:"3:30 PM"},{id:"habit-screen-cutoff",name:"Screen Cutoff (9:30 PM)",category:"Sleep",emoji:"📵",targetFrequency:"daily",currentStreak:0,bestStreak:3,completionRate:38,avgCompletionTime:"9:30 PM"}],dailyLogs:vc(),personalInsights:[{id:"ins-elena-001",title:"Journaling-Gratitude Stack",subtitle:"When you journal first, gratitude completion is 87%",xVariable:"Journaling completed",yVariable:"Gratitude completion",theta:{value:1,unit:"boolean",displayValue:"Journal first"},betaBelow:{value:.35,description:"35% gratitude completion alone"},betaAbove:{value:.87,description:"87% when stacked with journaling"},currentValue:1,currentUnit:"stack",currentStatus:"at_optimal",personalDataPct:86,populationDataPct:14,observations:17,daysOfData:21,curveType:"plateau_up",actionableAdvice:"This stack is working! Consider dropping other habits to focus on this pair."},{id:"ins-elena-002",title:"Sleep-Habit Correlation",subtitle:"Sleep below 70% predicts 42% drop in next-day habits",xVariable:"Prior night sleep score",yVariable:"Next-day completion rate",theta:{value:70,unit:"%",displayValue:"70% sleep score"},betaBelow:{value:-.42,description:"-42% completion rate"},betaAbove:{value:.05,description:"+5% per 10 points above threshold"},currentValue:62,currentUnit:"%",currentStatus:"below_optimal",personalDataPct:82,populationDataPct:18,observations:21,daysOfData:21,curveType:"plateau_up",actionableAdvice:"Your avg sleep score is 62%. Improving sleep would boost all your habits."},{id:"ins-elena-003",title:"Too Many Habits",subtitle:"You complete 2.1 habits/day on average vs 5 target",xVariable:"Number of active habits",yVariable:"Per-habit completion rate",theta:{value:3,unit:"habits",displayValue:"3 habits max"},betaBelow:{value:.78,description:"78% completion per habit"},betaAbove:{value:-.15,description:"-15% per additional habit"},currentValue:5,currentUnit:"habits",currentStatus:"above_optimal",personalDataPct:75,populationDataPct:25,observations:21,daysOfData:21,curveType:"plateau_down",actionableAdvice:"Research shows 2-3 habits is optimal for new users. Consider pausing Water and Screen Cutoff."}],keyMetrics:[{id:"km-streak",name:"Best Active Streak",value:5,unit:"days",change:2,changeDirection:"up",isGood:!0,sparklineData:[2,3,0,2,4,5,5],period:"7-day"},{id:"km-completion",name:"Completion Rate",value:68,unit:"%",change:8,changeDirection:"up",isGood:!0,sparklineData:[55,58,62,60,65,68,68],period:"7-day"},{id:"km-stack-rate",name:"Stack Success Rate",value:87,unit:"%",change:12,changeDirection:"up",isGood:!0,sparklineData:[70,72,78,80,82,85,87],period:"7-day"},{id:"km-response",name:"Avg Reminder Response",value:6.8,unit:"min",change:-2.1,changeDirection:"down",isGood:!0,sparklineData:[12,10,9,8.5,7.5,7,6.8],period:"7-day"}],weeklyStats:[{week:"2025-W03",completionRate:68,avgStreakLength:4.2,habitStackEvents:5,avgReminderResponse:6.8},{week:"2025-W02",completionRate:62,avgStreakLength:3.1,habitStackEvents:4,avgReminderResponse:8.5},{week:"2025-W01",completionRate:55,avgStreakLength:2,habitStackEvents:2,avgReminderResponse:11.2}]},Nc={"hb-user-001":jc,"hb-user-002":wc};function kc(t){return Nc[t]}function Sc(){const t=[],a=new Date("2025-01-20T00:00:00Z");for(let s=6;s>=0;s--)for(let r=0;r<96;r++){const i=new Date(a);i.setDate(i.getDate()-s),i.setMinutes(r*15);const n=Math.floor(r*15/60);let o=95;n>=7&&n<9?o=105+Math.sin((n-7)*Math.PI)*25:n>=12&&n<14?o=110+Math.sin((n-12)*Math.PI)*35:n>=19&&n<21?o=115+Math.sin((n-19)*Math.PI)*45:n>=4&&n<7&&(o=98+(n-4)*3);const u=(Math.random()-.5)*15,m=Math.round(Math.max(70,Math.min(180,o+u)));let c="stable";if(t.length>0){const d=m-t[t.length-1].glucose;d>10?c="rising_fast":d>3?c="rising":d<-10?c="falling_fast":d<-3&&(c="falling")}t.push({timestamp:i.toISOString(),glucose:m,trend:c})}return t}function Cc(){const t=[],a=new Date("2025-01-20");for(let s=29;s>=0;s--){const r=new Date(a);r.setDate(r.getDate()-s);const i=1-s/60;t.push({date:r.toISOString().split("T")[0],sleepScore:Math.round(72+i*10+(Math.random()-.5)*8),sleepDuration:Math.round(390+i*30+(Math.random()-.5)*40),deepSleep:Math.round(60+i*15+(Math.random()-.5)*15),remSleep:Math.round(85+i*10+(Math.random()-.5)*20),hrv:Math.round(38+i*8+(Math.random()-.5)*8),restingHR:Math.round(62-i*4+(Math.random()-.5)*4),steps:Math.round(7e3+i*2e3+(Math.random()-.5)*3e3),activeEnergy:Math.round(350+i*100+(Math.random()-.5)*100),zone2Minutes:Math.round(15+i*20+Math.random()*15),stressScore:Math.round(45-i*10+(Math.random()-.5)*15)})}return t}const Mc={userId:"he-user-001",name:"Arjun K.",avatar:"/avatars/arjun.jpg",archetype:"The Optimizing Executive",enrollmentDate:"2024-07-15",activeDays:180,complianceRate:94,currentPhase:"Optimization",tags:["prediabetes","tech-professional","apple-watch","cgm-user"],dataSources:[{id:"ds-apple",name:"Apple Watch",icon:"watch",connected:!0,lastSync:"2025-01-20T08:00:00Z"},{id:"ds-cgm",name:"Libre CGM",icon:"activity",connected:!0,lastSync:"2025-01-20T07:45:00Z"},{id:"ds-thyrocare",name:"Thyrocare Labs",icon:"flask",connected:!0,lastSync:"2025-01-10T00:00:00Z"},{id:"ds-withings",name:"Withings Scale",icon:"scale",connected:!0,lastSync:"2025-01-20T06:30:00Z"},{id:"ds-omron",name:"Omron BP",icon:"heart",connected:!0,lastSync:"2025-01-19T20:00:00Z"}],cgmReadings:Sc(),dailyMetrics:Cc(),labHistory:[{biomarker:"HbA1c",code:"4548-4",unit:"%",readings:[{date:"2024-07-15",value:6.2},{date:"2024-10-15",value:5.9},{date:"2025-01-10",value:5.6}],trend:"improving",targetRange:{low:4,high:5.6},currentInterpretation:"optimal"},{biomarker:"Fasting Glucose",code:"2339-0",unit:"mg/dL",readings:[{date:"2024-07-15",value:118},{date:"2024-10-15",value:108},{date:"2025-01-10",value:98}],trend:"improving",targetRange:{low:70,high:100},currentInterpretation:"optimal"},{biomarker:"Fasting Insulin",code:"2484-4",unit:"mIU/L",readings:[{date:"2024-07-15",value:18.2},{date:"2024-10-15",value:14.5},{date:"2025-01-10",value:10.8}],trend:"improving",targetRange:{low:2.6,high:11},currentInterpretation:"normal"},{biomarker:"hs-CRP",code:"1988-5",unit:"mg/L",readings:[{date:"2024-07-15",value:3.8},{date:"2024-10-15",value:2.4},{date:"2025-01-10",value:1.6}],trend:"improving",targetRange:{low:0,high:1},currentInterpretation:"borderline"},{biomarker:"Vitamin D",code:"1989-3",unit:"ng/mL",readings:[{date:"2024-07-15",value:22},{date:"2024-10-15",value:32},{date:"2025-01-10",value:45}],trend:"improving",targetRange:{low:40,high:80},currentInterpretation:"optimal"},{biomarker:"ApoB",code:"1884-6",unit:"mg/dL",readings:[{date:"2024-07-15",value:112},{date:"2024-10-15",value:102},{date:"2025-01-10",value:94}],trend:"improving",targetRange:{low:0,high:90},currentInterpretation:"borderline"}],personalInsights:[{id:"ins-001",title:"Post-Dinner Walk",subtitle:"Reduces your glucose spike by 22%",xVariable:"Post-meal steps",yVariable:"Glucose spike",theta:{value:1200,unit:"steps",displayValue:"1,200 steps"},betaBelow:{value:-.22,description:"-22% glucose spike reduction"},betaAbove:{value:.03,description:"+3% minimal additional benefit"},currentValue:1847,currentUnit:"steps",currentStatus:"at_optimal",personalDataPct:89,populationDataPct:11,observations:142,daysOfData:156,curveType:"plateau_down",actionableAdvice:"Keep this up! Your post-meal walks are working well."},{id:"ins-002",title:"Bedtime Threshold",subtitle:"Your sleep efficiency drops after 10:15 PM",xVariable:"Bedtime",yVariable:"Sleep efficiency",theta:{value:22.25,unit:"hour",displayValue:"10:15 PM"},betaBelow:{value:.85,description:"85% sleep efficiency"},betaAbove:{value:-.023,description:"-2.3% per hour after threshold"},currentValue:22.5,currentUnit:"hour",currentStatus:"above_optimal",personalDataPct:92,populationDataPct:8,observations:168,daysOfData:180,curveType:"plateau_down",actionableAdvice:"Try winding down 30 minutes earlier tonight."},{id:"ins-003",title:"Zone 2 Training",subtitle:"Optimal at 150+ minutes/week for your HRV",xVariable:"Weekly Zone 2 minutes",yVariable:"HRV (RMSSD)",theta:{value:150,unit:"min/week",displayValue:"150 min/week"},betaBelow:{value:.12,description:"+12% HRV per 30 min added"},betaAbove:{value:.02,description:"+2% diminishing returns"},currentValue:135,currentUnit:"min/week",currentStatus:"below_optimal",personalDataPct:78,populationDataPct:22,observations:24,daysOfData:168,curveType:"plateau_up",actionableAdvice:"Add one more 30-min easy walk this week to hit your threshold."},{id:"ins-004",title:"Caffeine Cutoff",subtitle:"Your deep sleep improves with 2 PM cutoff",xVariable:"Last caffeine time",yVariable:"Deep sleep %",theta:{value:14,unit:"hour",displayValue:"2:00 PM"},betaBelow:{value:.18,description:"18% deep sleep"},betaAbove:{value:-.015,description:"-1.5% per hour after 2 PM"},currentValue:15,currentUnit:"hour",currentStatus:"above_optimal",personalDataPct:85,populationDataPct:15,observations:89,daysOfData:120,curveType:"plateau_down",actionableAdvice:"Your afternoon coffee at 3 PM is costing you ~12 min of deep sleep."}],interventions:[{code:"INT-Z2-001",name:"Zone 2 Cardio Protocol",category:"exercise",startDate:"2024-08-01",targetMetric:"VO2max, hs-CRP",compliance:88,lastCompleted:"2025-01-19",streak:12},{code:"INT-TRE-001",name:"Time-Restricted Eating (16:8)",category:"nutrition",startDate:"2024-09-15",targetMetric:"Fasting glucose, TIR",compliance:92,lastCompleted:"2025-01-20",streak:28},{code:"INT-VITD-001",name:"Vitamin D3 5000 IU",category:"supplement",startDate:"2024-07-20",targetMetric:"Vitamin D level",compliance:98,lastCompleted:"2025-01-20",streak:45},{code:"INT-SLEEP-001",name:"Sleep Hygiene Protocol",category:"sleep",startDate:"2024-10-01",targetMetric:"Deep sleep %, HRV",compliance:76,lastCompleted:"2025-01-19",streak:5}],dailyProtocol:[{priority:1,code:"PROTO_POSTMEAL_WALK",action:"15-min walk after dinner",reason:"Reduces your glucose spike by 22%",linkedInsightId:"ins-001",timeOfDay:"After dinner"},{priority:2,code:"SUPP_VITAMIN_D",action:"Take Vitamin D with breakfast",reason:"Maintaining your level at 45 ng/mL",timeOfDay:"Morning"},{priority:3,code:"CARDIO_ZONE2",action:"Zone 2 cardio: 30 min easy pace",reason:"2 more sessions this week to hit 150 min target",linkedInsightId:"ins-003",timeOfDay:"Anytime"},{priority:4,code:"PROTO_BEDTIME_ROUTINE",action:"Wind down by 10:00 PM",reason:"Your sleep efficiency drops 2.3%/hr after 10:15 PM",linkedInsightId:"ins-002",timeOfDay:"Evening"},{priority:5,code:"NUTRITION_CAFFEINE",action:"No caffeine after 2 PM",reason:"Protects your deep sleep",linkedInsightId:"ins-004",timeOfDay:"Afternoon"}],keyMetrics:[{id:"km-tir",name:"Time in Range",value:85,unit:"%",change:8,changeDirection:"up",isGood:!0,sparklineData:[72,74,78,76,80,82,85],period:"7-day"},{id:"km-hba1c",name:"HbA1c",value:5.6,unit:"%",change:-.3,changeDirection:"down",isGood:!0,sparklineData:[6.2,5.9,5.6],period:"quarterly"},{id:"km-hrv",name:"HRV",value:45,unit:"ms",change:7,changeDirection:"up",isGood:!0,sparklineData:[38,40,42,41,44,43,45],period:"7-day"},{id:"km-deep",name:"Deep Sleep",value:78,unit:"min",change:12,changeDirection:"up",isGood:!0,sparklineData:[62,68,70,72,75,74,78],period:"7-day"},{id:"km-steps",name:"Avg Steps",value:9234,unit:"steps",change:1850,changeDirection:"up",isGood:!0,sparklineData:[7200,8100,8900,9500,8800,9400,9234],period:"7-day"},{id:"km-crp",name:"hs-CRP",value:1.6,unit:"mg/L",change:-.8,changeDirection:"down",isGood:!0,sparklineData:[3.8,2.4,1.6],period:"quarterly"}]},Tc={"he-user-001":Mc};function Pc(t){return Tc[t]}function Dc(t,a){if(t==="human-edge")return Pc(a);if(t==="habit-bandz")return kc(a)}const yt={dataSourceTypes:[],variableCategories:[],searchQuery:""},te=it((t,a)=>({activeClientId:null,activeClient:null,viewMode:"overview",selectedDataSourceId:null,selectedInsightId:null,selectedUserId:null,userDetail:null,userDetailLoading:!1,filters:{...yt},clientSummaries:bc(),setActiveClient:s=>{const r=_t(s);t({activeClientId:s,activeClient:r||null,selectedDataSourceId:null,selectedInsightId:null,selectedUserId:null,userDetail:null,filters:{...yt}})},setViewMode:s=>{t({viewMode:s})},setSelectedDataSource:s=>{t({selectedDataSourceId:s})},setSelectedInsight:s=>{t({selectedInsightId:s})},setSelectedUser:s=>{t({selectedUserId:s})},loadUserDetail:(s,r)=>{t({userDetailLoading:!0}),setTimeout(()=>{const i=Dc(s,r);t({userDetail:i||null,userDetailLoading:!1,selectedUserId:r,activeClientId:s,activeClient:_t(s)||null})},100)},clearUserDetail:()=>{t({userDetail:null,selectedUserId:null})},setFilters:s=>{t(r=>({filters:{...r.filters,...s}}))},resetFilters:()=>{t({filters:{...yt}})},getDataSources:()=>a().activeClient?.dataSources||[],getXVariables:()=>a().activeClient?.xVariables||[],getYVariables:()=>a().activeClient?.yVariables||[],getInsights:()=>a().activeClient?.insights||[],getUsers:()=>a().activeClient?.users||[],getDataSourceById:s=>a().getDataSources().find(r=>r.id===s),getInsightById:s=>a().getInsights().find(r=>r.id===s),getUserById:s=>a().getUsers().find(r=>r.id===s),getFilteredXVariables:()=>{const{filters:s}=a();let r=a().getXVariables();if(s.dataSourceTypes.length>0&&(r=r.filter(i=>s.dataSourceTypes.includes(i.dataSource))),s.variableCategories.length>0&&(r=r.filter(i=>s.variableCategories.includes(i.category))),s.searchQuery){const i=s.searchQuery.toLowerCase();r=r.filter(n=>n.name.toLowerCase().includes(i)||n.description.toLowerCase().includes(i))}return r},getFilteredInsights:()=>{const{filters:s}=a();let r=a().getInsights();if(s.searchQuery){const i=s.searchQuery.toLowerCase();r=r.filter(n=>n.title.toLowerCase().includes(i)||n.description.toLowerCase().includes(i))}return r}})),_c=()=>te(t=>t.activeClient),Rc=()=>te(t=>t.clientSummaries),Fs=()=>te(a=>a.activeClient)?.dataSources||[],zs=()=>te(a=>a.activeClient)?.xVariables||[],Ys=()=>te(a=>a.activeClient)?.yVariables||[],Ic=()=>te(a=>a.activeClient)?.insights||[],Ac=()=>te(a=>a.activeClient)?.users||[],Lc=()=>{const t=Fs(),a=t.reduce((n,o)=>n+(o.recordCount||0),0),s=t.filter(n=>n.status==="active").length,r=t.filter(n=>n.status==="error").length,i=t.reduce((n,o)=>{if(!o.lastSync)return n;const u=new Date(o.lastSync);return u>n?u:n},new Date(0));return{totalSources:t.length,totalRecords:a,activeCount:s,errorCount:r,lastSync:i.getTime()>0?i.toISOString():null}},Ec=()=>te(t=>t.userDetail),$c=()=>te(t=>t.userDetailLoading);function Wc(t){return t?"cgmReadings"in t:!1}function Oc({source:t}){const a={active:"bg-green-100 text-green-700 border-green-200",pending:"bg-yellow-100 text-yellow-700 border-yellow-200",error:"bg-red-100 text-red-700 border-red-200"},r={active:xe,pending:le,error:me}[t.status],i=n=>n>=1e6?`${(n/1e6).toFixed(1)}M`:n>=1e3?`${(n/1e3).toFixed(0)}K`:n.toString();return e.jsxs(M,{className:"p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-primary-50 rounded-lg",children:e.jsx(re,{className:"w-4 h-4 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.type})]})]}),e.jsxs(_,{className:a[t.status],children:[e.jsx(r,{className:"w-3 h-3 mr-1"}),t.status]})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-3 line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[e.jsx(zt,{className:"w-3 h-3"}),e.jsxs("span",{children:[i(t.recordCount||0)," records"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[e.jsx(Le,{className:"w-3 h-3"}),e.jsx("span",{children:t.cadence})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsx("p",{className:"text-xs text-gray-400 font-mono truncate",title:t.pipeline,children:t.pipeline})})]})}function Da({variable:t,type:a}){const s=a==="y",r=t;return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${s?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:a.toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm truncate",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.category})]}),!s&&t.unit&&e.jsx(_,{variant:"outline",className:"text-xs",children:t.unit}),s&&e.jsxs(_,{variant:"outline",className:`text-xs ${r.targetDirection==="increase"?"text-green-600 border-green-200":r.targetDirection==="decrease"?"text-red-600 border-red-200":"text-blue-600 border-blue-200"}`,children:[r.targetDirection==="increase"&&"â†‘",r.targetDirection==="decrease"&&"â†“",r.targetDirection==="optimize"&&"â—Ž",r.targetDirection==="maintain"&&"â†’"]})]})}function Vc({insight:t}){const a=zs(),s=Ys(),r=t.xVariables.map(n=>a.find(o=>o.id===n)).filter(Boolean),i=s.find(n=>n.id===t.yVariable);return e.jsxs(M,{className:"p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx(_,{className:`text-xs ${t.modelType==="causal"?"bg-purple-100 text-purple-700":t.modelType==="predictive"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:t.modelType}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[e.jsx(U,{className:"w-3 h-3"}),Math.round(t.confidence*100),"% confidence"]})]}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex items-center gap-2 mb-3 flex-wrap",children:[r.map((n,o)=>e.jsxs("span",{children:[e.jsx(_,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:n.name}),o<r.length-1&&e.jsx("span",{className:"text-gray-400 mx-1",children:"+"})]},n.id)),e.jsx(ve,{className:"w-4 h-4 text-gray-400"}),i&&e.jsx(_,{variant:"outline",className:"text-xs bg-green-50 text-green-700",children:i.name})]}),(t.theta!==void 0||t.beta!==void 0)&&e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 mb-3",children:[t.theta!==void 0&&e.jsxs("span",{children:["Î¸ = ",e.jsx("span",{className:"font-mono text-gray-700",children:t.theta})]}),t.beta!==void 0&&e.jsxs("span",{children:["Î² = ",e.jsx("span",{className:"font-mono text-gray-700",children:t.beta})]})]}),t.recommendation&&e.jsx("div",{className:"pt-3 border-t border-gray-100",children:e.jsxs("p",{className:"text-xs text-primary-600 flex items-start gap-1",children:[e.jsx(ee,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),t.recommendation]})})]})}function Bc({user:t,clientId:a}){const[s,r]=x.useState(!1),i=t.complianceRate>=90?"text-emerald-600 bg-emerald-50 border-emerald-200":t.complianceRate>=70?"text-amber-600 bg-amber-50 border-amber-200":"text-rose-600 bg-rose-50 border-rose-200";return e.jsxs(M,{className:"overflow-hidden transition-all duration-200 hover:shadow-md",children:[e.jsxs("div",{className:"p-4 flex items-center gap-4 cursor-pointer hover:bg-slate-50/50 transition-colors",onClick:()=>r(!s),children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white text-lg font-semibold flex-shrink-0",children:t.avatar||t.name.charAt(0)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-slate-800 truncate",children:t.name}),e.jsx("p",{className:"text-xs text-slate-500",children:t.currentPhase})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-700",children:t.activeDays}),e.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider",children:"Days"})]}),e.jsxs("div",{className:`px-2.5 py-1 rounded-full text-xs font-medium border ${i}`,children:[t.complianceRate,"%"]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-500",children:[e.jsx(re,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:t.dataSources?.length||0})]})]}),e.jsx(P.div,{animate:{rotate:s?180:0},transition:{duration:.2},className:"flex-shrink-0",children:e.jsx(ie,{className:"w-5 h-5 text-slate-400 transform rotate-90"})})]}),e.jsx(Y,{children:s&&e.jsx(P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsxs("div",{className:"px-4 pb-4 pt-2 border-t border-slate-100 bg-slate-50/30",children:[t.tags.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-wider mb-2",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.tags.map(n=>e.jsx(_,{variant:"outline",className:"text-xs",children:n},n))})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-100",children:[e.jsx("p",{className:"text-lg font-semibold text-slate-800",children:t.activeDays}),e.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-wider",children:"Active Days"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-100",children:[e.jsxs("p",{className:"text-lg font-semibold text-slate-800",children:[t.complianceRate,"%"]}),e.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-wider",children:"Compliance"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-100",children:[e.jsx("p",{className:"text-lg font-semibold text-slate-800",children:t.insightCount||0}),e.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-wider",children:"Insights"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-100",children:[e.jsx("p",{className:"text-lg font-semibold text-slate-800",children:t.dataSources?.length||0}),e.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-wider",children:"Data Sources"})]})]}),t.dataSources&&t.dataSources.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-wider mb-2",children:"Connected Sources"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.dataSources.map(n=>e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-white border border-slate-200 rounded-lg text-xs text-slate-600",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),n]},n))})]}),e.jsxs(Ia,{to:`/clients/${a}/users/${t.id}`,className:"flex items-center justify-center gap-2 w-full py-2.5 bg-primary-50 hover:bg-primary-100 text-primary-600 text-sm font-medium rounded-lg transition-colors",children:["View Full Profile",e.jsx(Cr,{className:"w-4 h-4"})]})]})})})]})}function Hc({client:t,onSelect:a,isSelected:s}){const r=i=>i>=1e6?`${(i/1e6).toFixed(1)}M`:i>=1e3?`${(i/1e3).toFixed(0)}K`:i.toString();return e.jsxs(M,{className:`p-6 cursor-pointer transition-all ${s?"ring-2 ring-primary-500 bg-primary-50/50":"hover:shadow-lg hover:border-primary-200"}`,onClick:a,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-4xl",children:t.logo}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500",children:"Enterprise Client"})]})]}),e.jsx(ie,{className:`w-5 h-5 transition-transform ${s?"rotate-90 text-primary-600":"text-gray-400"}`})]}),e.jsxs(B,{columns:2,gap:"sm",className:"mb-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Data Sources"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.dataSourceCount})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(zt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Total Records"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r(t.totalRecords)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(F,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"X Variables"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.xVariableCount})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Y Variables"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.yVariableCount})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[e.jsx(ee,{className:"w-4 h-4 text-primary-500"}),e.jsxs("span",{children:[t.insightCount," Active Insights"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[e.jsx(Rt,{className:"w-4 h-4"}),e.jsxs("span",{children:[t.userCount," Users"]})]})]})]})}function Fc(){const t=Rc(),a=_c(),s=Fs(),r=zs(),i=Ys(),n=Ic(),o=Ac(),u=Lc(),{setActiveClient:m,activeClientId:c,viewMode:d,setViewMode:l}=te(),[h,p]=x.useState(!1),[f,v]=x.useState(!1);x.useEffect(()=>{!c&&t.length>0&&m(t[0].id)},[c,t,m]);const j=h?s:s.slice(0,6),k=f?r:r.slice(0,8),N=i.slice(0,5);return e.jsxs(Q,{title:"Enterprise Clients",subtitle:"Data infrastructure and causal insights for enterprise partners",actions:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(_,{variant:"outline",className:"text-sm",children:[e.jsx(Sr,{className:"w-4 h-4 mr-1"}),t.length," Active Clients"]})}),children:[e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsx(B,{columns:2,gap:"lg",children:t.map(b=>e.jsx(Hc,{client:b,onSelect:()=>m(b.id),isSelected:c===b.id},b.id))})}),a&&e.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[e.jsxs(M,{className:"p-6 bg-gradient-to-r from-slate-900 to-slate-800 text-white",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("span",{className:"text-5xl",children:a.logo}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:a.name}),e.jsx("p",{className:"text-gray-300",children:a.description})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("p",{className:"text-3xl font-bold",children:u.totalSources}),e.jsx("p",{className:"text-sm text-gray-300",children:"Data Sources"})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("p",{className:"text-3xl font-bold",children:u.totalRecords>=1e6?`${(u.totalRecords/1e6).toFixed(1)}M`:`${(u.totalRecords/1e3).toFixed(0)}K`}),e.jsx("p",{className:"text-sm text-gray-300",children:"Total Records"})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("p",{className:"text-3xl font-bold",children:u.activeCount}),e.jsx("p",{className:"text-sm text-gray-300",children:"Active Pipelines"})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("p",{className:"text-3xl font-bold",children:n.length}),e.jsx("p",{className:"text-sm text-gray-300",children:"Causal Insights"})]})]})]}),c==="human-edge"&&e.jsxs(M,{className:"p-6 border-2 border-emerald-200 bg-gradient-to-br from-emerald-50/50 to-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:e.jsx(G,{className:"w-5 h-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Serif Impact Dashboard"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Elevated Health pilot metrics since integration (6 weeks)"})]})]}),e.jsxs(_,{className:"bg-emerald-100 text-emerald-700 border-emerald-200",children:[e.jsx(xe,{className:"w-3 h-3 mr-1"}),"Live Pilot"]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Retention Lift"}),e.jsx("span",{className:"text-xs text-emerald-600 font-medium",children:"vs baseline"})]}),e.jsx("p",{className:"text-4xl font-bold text-emerald-600",children:"3.2x"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Users with Serif insights"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Daily Opens"}),e.jsx("span",{className:"text-xs text-emerald-600 font-medium",children:"+242%"})]}),e.jsx("p",{className:"text-4xl font-bold text-slate-800",children:"4.1x"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"vs 1.2x industry avg"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-slate-400 uppercase tracking-wider",children:"30-Day Retention"}),e.jsx("span",{className:"text-xs text-emerald-600 font-medium",children:"+8pp"})]}),e.jsx("p",{className:"text-4xl font-bold text-slate-800",children:"92%"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"vs 84% industry avg"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Build vs Buy"}),e.jsx("span",{className:"text-xs text-emerald-600 font-medium",children:"saved"})]}),e.jsx("p",{className:"text-4xl font-bold text-slate-800",children:"$58K"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"/month vs in-house team"})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-slate-50 rounded-lg border border-slate-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(et,{className:"w-5 h-5 text-primary-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Serif's causal intelligence layer has increased user retention by 3.2x while reducing development costs by 85%."}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Integration completed in 6 weeks vs 18-24 month internal build estimate."})]})]})})]}),c==="habit-bandz"&&e.jsxs(M,{className:"p-6 border-2 border-violet-200 bg-gradient-to-br from-violet-50/50 to-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-violet-100 rounded-lg",children:e.jsx(G,{className:"w-5 h-5 text-violet-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Serif Impact Dashboard"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Habit Bandz pilot metrics since integration (3 weeks)"})]})]}),e.jsxs(_,{className:"bg-violet-100 text-violet-700 border-violet-200",children:[e.jsx(le,{className:"w-3 h-3 mr-1"}),"Early Pilot"]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Streak Survival"}),e.jsx("span",{className:"text-xs text-violet-600 font-medium",children:"vs baseline"})]}),e.jsx("p",{className:"text-4xl font-bold text-violet-600",children:"2.8x"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Avg 11 days vs 4 days"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-slate-400 uppercase tracking-wider",children:"30-Day Retention"}),e.jsx("span",{className:"text-xs text-violet-600 font-medium",children:"+33pp"})]}),e.jsx("p",{className:"text-4xl font-bold text-slate-800",children:"78%"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"vs 45% habit app avg"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Completion Lift"}),e.jsx("span",{className:"text-xs text-violet-600 font-medium",children:"+34%"})]}),e.jsx("p",{className:"text-4xl font-bold text-slate-800",children:"+34%"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Daily habit completion"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Build vs Buy"}),e.jsx("span",{className:"text-xs text-violet-600 font-medium",children:"saved"})]}),e.jsx("p",{className:"text-4xl font-bold text-slate-800",children:"$42K"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"/month vs in-house ML"})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-slate-50 rounded-lg border border-slate-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(et,{className:"w-5 h-5 text-violet-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Serif's causal insights have increased average streak length from 4 days to 11 days, driving 2.8x improvement in habit success rates."}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Cross-platform insight: Sleep data from wearables predicts next-day habit completion with 79% accuracy."})]})]})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(re,{className:"w-5 h-5 text-primary-600"}),"Data Sources & Pipelines"]}),s.length>6&&e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>p(!h),children:h?"Show Less":`Show All (${s.length})`})]}),e.jsx(B,{columns:3,gap:"md",children:j.map(b=>e.jsx(Oc,{source:b},b.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-blue-100 text-blue-700 flex items-center justify-center text-xs font-bold",children:"X"}),"Predictor Variables (",r.length,")"]}),r.length>8&&e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>v(!f),children:f?"Show Less":"Show All"})]}),e.jsx(M,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[k.map(b=>e.jsx(Da,{variable:b,type:"x"},b.id)),!f&&r.length>8&&e.jsxs("p",{className:"text-xs text-gray-400 text-center py-2",children:["+",r.length-8," more variables"]})]})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-green-100 text-green-700 flex items-center justify-center text-xs font-bold",children:"Y"}),"Outcome Variables (",i.length,")"]}),e.jsx(M,{className:"p-4",children:e.jsx("div",{className:"space-y-2",children:N.map(b=>e.jsx(Da,{variable:b,type:"y"},b.id))})})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2 mb-4",children:[e.jsx(ee,{className:"w-5 h-5 text-primary-600"}),"Causal Insights (X â†’ Y Relationships)"]}),e.jsx(B,{columns:2,gap:"md",children:n.map(b=>e.jsx(Vc,{insight:b},b.id))})]}),o.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[e.jsx(Rt,{className:"w-5 h-5 text-primary-500"}),"Patient Overview (",o.length,")"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Click to expand details"})]}),e.jsx("div",{className:"space-y-3",children:o.map(b=>e.jsx(Bc,{user:b,clientId:c},b.id))})]})]},a.id)]})}const zc={watch:Ee,smartphone:$a,flask:Ft,scale:Mr,heart:ct,activity:F,cloud:nt};function Yc({name:t,avatar:a,archetype:s,clientName:r,clientLogo:i,enrollmentDate:n,activeDays:o,complianceRate:u,currentPhase:m,tags:c,dataSources:d,additionalStats:l=[],className:h}){const p=new Date(n).toLocaleDateString("en-US",{month:"short",year:"numeric"});return e.jsxs("div",{className:g("bg-white rounded-xl border border-gray-100 p-6",h),children:[e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsxs("div",{className:"flex-shrink-0",children:[a?e.jsx("img",{src:a,alt:t,className:"w-20 h-20 rounded-full object-cover border-4 border-white shadow-lg",onError:f=>{const v=f.target;v.style.display="none",v.nextElementSibling?.classList.remove("hidden")}}):null,e.jsx("div",{className:g("w-20 h-20 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white text-3xl font-bold shadow-lg border-4 border-white",a&&"hidden"),children:t.charAt(0)})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 truncate",children:t}),e.jsxs("span",{className:"px-2.5 py-1 bg-gray-100 text-gray-700 rounded-full text-sm font-medium flex items-center gap-1.5",children:[i&&e.jsx("span",{children:i}),r]})]}),e.jsxs("p",{className:"text-lg text-primary-600 font-medium mb-2",children:['"',s,'"']}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:c.map(f=>e.jsx("span",{className:"px-2 py-0.5 bg-gray-50 text-gray-600 rounded text-xs font-medium",children:f},f))}),e.jsxs("div",{className:"flex flex-wrap gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Bt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-600",children:[e.jsx("strong",{children:o})," days active"]}),e.jsxs("span",{className:"text-gray-400",children:["since ",p]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(lt,{className:"w-4 h-4 text-green-500"}),e.jsxs("span",{className:"text-gray-600",children:[e.jsxs("strong",{children:[u,"%"]})," compliance"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(F,{className:"w-4 h-4 text-blue-500"}),e.jsxs("span",{className:"text-gray-600",children:["Phase: ",e.jsx("strong",{children:m})]})]}),l.map(f=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(fe,{className:"w-4 h-4 text-amber-500"}),e.jsxs("span",{className:"text-gray-600",children:[e.jsx("strong",{children:f.value})," ",f.label]})]},f.label))]})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-100",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-3",children:"Connected Data Sources"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(f=>{const v=zc[f.icon]||F;return e.jsxs("div",{className:g("flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium",f.connected?"bg-green-50 text-green-700 border border-green-200":"bg-gray-50 text-gray-500 border border-gray-200"),children:[e.jsx(v,{className:"w-4 h-4"}),f.name,f.connected&&e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500",title:"Connected"})]},f.id)})})]})]})}function Us({isOpen:t,onClose:a,data:s,title:r}){const[i,n]=x.useState("inbound"),[o,u]=x.useState(0);if(!t)return null;const m=[{id:"inbound",label:"Inbound Data",icon:e.jsx(re,{className:"w-4 h-4"}),count:s.inbound.length},{id:"model",label:"Model",icon:e.jsx(Nt,{className:"w-4 h-4"})},{id:"outbound",label:"Outbound Response",icon:e.jsx(kt,{className:"w-4 h-4"})}];return e.jsx(Y,{children:e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:a,children:e.jsxs(P.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},className:"bg-white rounded-xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col",onClick:c=>c.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Data Pipeline Inspector"}),e.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:r})]}),e.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(oe,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white rounded-lg border border-gray-200 shadow-sm",children:[e.jsx(re,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Device/Lab Data"})]}),e.jsx(ve,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white rounded-lg border border-gray-200 shadow-sm",children:[e.jsx(Nt,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Serif Model"})]}),e.jsx(ve,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white rounded-lg border border-gray-200 shadow-sm",children:[e.jsx(kt,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"API Response"})]})]})}),e.jsx("div",{className:"flex border-b border-gray-100 px-6",children:m.map(c=>e.jsxs("button",{onClick:()=>n(c.id),className:g("flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 -mb-px transition-colors",i===c.id?"text-primary-600 border-primary-500":"text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300"),children:[c.icon,c.label,c.count!==void 0&&e.jsx(_,{variant:"outline",className:"ml-1 text-xs",children:c.count})]},c.id))}),e.jsxs("div",{className:"flex-1 overflow-auto p-6",children:[i==="inbound"&&e.jsx(Uc,{data:s.inbound,expandedIndex:o,onExpandChange:u}),i==="model"&&s.model&&e.jsx(Gc,{model:s.model}),i==="outbound"&&e.jsx(qc,{data:s.outbound})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 bg-gray-50 flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsx(Tr,{className:"w-3.5 h-3.5 inline mr-1"}),"All data structures follow FHIR-analogous schemas"]}),e.jsx(L,{variant:"outline",size:"sm",onClick:a,children:"Close"})]})]})})})}function Uc({data:t,expandedIndex:a,onExpandChange:s}){return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsxs(_,{variant:"outline",className:"text-blue-600 border-blue-200",children:[e.jsx(re,{className:"w-3 h-3 mr-1"}),t.length," Data Source",t.length!==1?"s":""]}),e.jsx("span",{className:"text-sm text-gray-500",children:"Raw data received from devices and labs"})]}),t.map((r,i)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>s(a===i?-1:i),className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[a===i?e.jsx(ue,{className:"w-4 h-4 text-gray-400"}):e.jsx(ie,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-gray-900",children:r.label}),e.jsx("p",{className:"text-xs text-gray-500",children:r.description})]})]}),e.jsx(_,{variant:"outline",className:"text-xs",children:r.schema})]}),a===i&&e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsx(ut,{data:r.data,theme:"dark",expandLevel:2,showCopy:!0})})]},i))]})}function Gc({model:t}){const[a,s]=x.useState(!1),r=async()=>{await navigator.clipboard.writeText(t.computation),s(!0),setTimeout(()=>s(!1),2e3)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsxs(_,{variant:"outline",className:"text-purple-600 border-purple-200",children:[e.jsx(Nt,{className:"w-3 h-3 mr-1"}),t.label]}),e.jsx("span",{className:"text-sm text-gray-500",children:t.description})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:r,className:"absolute top-3 right-3 p-2 text-gray-400 hover:text-gray-200 hover:bg-gray-700 rounded-md transition-colors z-10",children:a?e.jsx(K,{className:"w-4 h-4 text-green-400"}):e.jsx(Ne,{className:"w-4 h-4"})}),e.jsx("pre",{className:"bg-gray-900 rounded-lg p-4 overflow-auto max-h-[400px] text-sm font-mono",children:e.jsx("code",{className:"text-gray-200 whitespace-pre-wrap",children:t.computation})})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:"Note:"})," This is a simplified representation of the model computation. The actual implementation includes additional statistical validation, edge case handling, and performance optimizations."]})})]})}function qc({data:t}){return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsxs(_,{variant:"outline",className:"text-green-600 border-green-200",children:[e.jsx(kt,{className:"w-3 h-3 mr-1"}),"API Response"]}),e.jsx("span",{className:"text-sm text-gray-500",children:t.description})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Schema"}),e.jsx("p",{className:"font-mono text-sm text-gray-700",children:t.schema})]}),e.jsx("div",{className:"h-8 w-px bg-gray-200"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Label"}),e.jsx("p",{className:"text-sm text-gray-700",children:t.label})]})]}),e.jsx(ut,{data:t.data,theme:"dark",expandLevel:3,showCopy:!0})]})}const Gs={user:{user_id:"terra_u_8a7f9b2c",provider:"APPLE",last_webhook_update:"2025-01-19T22:15:00Z",reference_id:"he-user-001"},type:"activity",data:[{metadata:{start_time:"2025-01-19T19:30:00Z",end_time:"2025-01-19T19:48:00Z",upload_type:"automatic"},activity_data:{steps:1847,active_duration_seconds:1080,moderate_intensity_seconds:720,low_intensity_seconds:360,calories_data:{total_burned_calories:98,active_calories:72,bmr_calories:26},distance_data:{distance_meters:1420}},heart_data:{resting_hr_bpm:58,avg_hr_bpm:98,max_hr_bpm:112,min_hr_bpm:62}}]},qs={device_id:"libre_3_f8a2b9c4",user_id:"he-user-001",sensor_serial:"MH00L1234X7",readings:[{timestamp:"2025-01-19T19:00:00Z",glucose_mg_dl:142,trend_arrow:"rising",quality_flag:"good"},{timestamp:"2025-01-19T19:15:00Z",glucose_mg_dl:158,trend_arrow:"rising",quality_flag:"good"},{timestamp:"2025-01-19T19:30:00Z",glucose_mg_dl:165,trend_arrow:"rising",quality_flag:"good"},{timestamp:"2025-01-19T19:45:00Z",glucose_mg_dl:152,trend_arrow:"falling",quality_flag:"good"},{timestamp:"2025-01-19T20:00:00Z",glucose_mg_dl:138,trend_arrow:"falling",quality_flag:"good"},{timestamp:"2025-01-19T20:15:00Z",glucose_mg_dl:124,trend_arrow:"falling",quality_flag:"good"},{timestamp:"2025-01-19T20:30:00Z",glucose_mg_dl:118,trend_arrow:"stable",quality_flag:"good"},{timestamp:"2025-01-19T20:45:00Z",glucose_mg_dl:112,trend_arrow:"stable",quality_flag:"good"}],daily_summary:{date:"2025-01-19",time_in_range_pct:85,time_above_range_pct:12,time_below_range_pct:3,time_very_high_pct:2,time_very_low_pct:0,average_glucose:108,glucose_management_indicator:5.6,coefficient_of_variation:18.2,standard_deviation:19.7,readings_count:96},meta:{sensor_start_time:"2025-01-05T08:00:00Z",sensor_end_time:"2025-01-19T08:00:00Z",days_remaining:0,firmware_version:"3.2.1"}},Zc={insight_id:"ins_he001_postdinner_walk",user_id:"he-user-001",client_id:"human-edge",created_at:"2025-01-12T00:00:00Z",updated_at:"2025-01-19T23:00:00Z",model:{name:"PersonalDoseResponse",version:"2.4.1",type:"causal",last_trained:"2025-01-19T06:00:00Z"},content:{title:"Post-Dinner Walk â†’ Glucose Control",headline:"Your 15-minute walks reduce post-meal glucose spikes by 22%",summary:"Analysis of 142 post-dinner observations shows that walking at least 1,200 steps within 30 minutes of dinner significantly reduces your glucose excursion. The effect plateaus beyond this threshold.",category:"metabolic"},causal_parameters:{x_variable:{id:"post_dinner_steps",name:"Post-Dinner Steps",description:"Steps taken within 30 minutes after evening meal",current_value:1847,unit:"steps",data_source:"Terra/Apple Watch",sample_rate:"per meal event"},y_variable:{id:"glucose_delta_auc",name:"Glucose Spike (AUC)",description:"Area under the curve above baseline for 2 hours post-meal",unit:"mgÂ·min/dL",target_direction:"decrease"},theta:{value:1200,unit:"steps",display_value:"1,200 steps",confidence_interval_95:[980,1420],standard_error:112,p_value:.001,interpretation:"The minimum effective dose for glucose spike reduction"},beta:{below_threshold:{coefficient:-.018,std_error:.004,t_statistic:-4.5,p_value:1e-4,description:"Each additional 100 steps reduces spike by 1.8%"},above_threshold:{coefficient:.002,std_error:.003,t_statistic:.67,p_value:.52,description:"Minimal additional benefit beyond threshold"}},curve_type:"plateau_down",model_fit:{r_squared:.68,adjusted_r_squared:.66,rmse:142,aic:1823,bic:1847}},evidence:{personal:{observations:142,days_of_data:180,weight:.89,date_range:{start:"2024-07-22",end:"2025-01-19"},data_quality_score:.94},population:{sample_size:12847,studies_referenced:3,weight:.11,source_description:"Elevated Health metabolic cohort + published literature"},combined_confidence:.91,confidence_category:"very_high",calibration_status:"high_confidence",min_days_for_stable:30},status:{current_position:"at_optimal",distance_from_threshold:647,distance_unit:"steps above",trend:"stable",trend_days:14,priority_score:72},linked_data:{data_sources:["Terra/Apple Watch","Libre CGM"],observation_ids:["obs_142","obs_141","obs_140"],time_range:{start:"2024-07-22",end:"2025-01-19"},contributing_records:284},recommendation:{action:"Continue your post-dinner walks",detailed_guidance:"Your current 1,847 steps post-dinner is above your optimal threshold of 1,200. Keep up this habit for sustained glucose control.",protocol_code:"PROTO_POSTMEAL_WALK",urgency:"routine",expected_impact:"Maintain 22% reduction in post-meal glucose spikes"},_meta:{request_id:"req_8f7a6b5c4d3e2f1a",processing_time_ms:127,cache_hit:!1,api_version:"v1.2.0"}},Zs={user:{user_id:"terra_u_8a7f9b2c",provider:"APPLE",last_webhook_update:"2025-01-20T07:30:00Z",reference_id:"he-user-001"},type:"sleep",data:[{metadata:{start_time:"2025-01-19T22:45:00Z",end_time:"2025-01-20T06:15:00Z",upload_type:"automatic"},sleep_data:{sleep_durations_data:{asleep_seconds:25200,awake_seconds:1800,deep_seconds:5400,rem_seconds:6300,light_seconds:13500,in_bed_seconds:27e3},sleep_efficiency:93.3,latency_seconds:540,awakenings_count:2},heart_data:{resting_hr_bpm:52,avg_hr_bpm:54,min_hr_bpm:48,hrv_data:{avg_sdnn:48,avg_rmssd:45}}}]},Qc={insight_id:"ins_he001_bedtime_sleep",user_id:"he-user-001",client_id:"human-edge",created_at:"2025-01-05T00:00:00Z",updated_at:"2025-01-19T23:00:00Z",model:{name:"PersonalDoseResponse",version:"2.4.1",type:"causal",last_trained:"2025-01-19T06:00:00Z"},content:{title:"Bedtime â†’ Sleep Efficiency",headline:"Every hour after 10:15 PM costs you 2.3% sleep efficiency",summary:"Your sleep efficiency drops significantly when you go to bed after 10:15 PM. This threshold is personalized to your chronotype and lifestyle.",category:"sleep"},causal_parameters:{x_variable:{id:"bedtime_hour",name:"Bedtime",description:"Time you get into bed",current_value:22.75,unit:"hour (24h)",data_source:"Terra/Apple Watch",sample_rate:"daily"},y_variable:{id:"sleep_efficiency",name:"Sleep Efficiency",description:"Percentage of time in bed spent asleep",unit:"%",target_direction:"increase"},theta:{value:22.25,unit:"hour",display_value:"10:15 PM",confidence_interval_95:[21.75,22.75],standard_error:.25,p_value:.002,interpretation:"Your optimal bedtime threshold"},beta:{below_threshold:{coefficient:.3,std_error:.15,t_statistic:2,p_value:.06,description:"Minimal improvement from earlier bedtimes"},above_threshold:{coefficient:-2.3,std_error:.4,t_statistic:-5.75,p_value:1e-4,description:"Each hour later decreases efficiency by 2.3%"}},curve_type:"plateau_down",model_fit:{r_squared:.52,adjusted_r_squared:.49,rmse:4.2,aic:892,bic:912}},evidence:{personal:{observations:156,days_of_data:180,weight:.82,date_range:{start:"2024-07-22",end:"2025-01-19"},data_quality_score:.91},population:{sample_size:8923,studies_referenced:2,weight:.18,source_description:"Elevated Health sleep cohort"},combined_confidence:.85,confidence_category:"high",calibration_status:"stable",min_days_for_stable:30},status:{current_position:"below_optimal",distance_from_threshold:30,distance_unit:"minutes late",trend:"stable",trend_days:7,priority_score:68},linked_data:{data_sources:["Terra/Apple Watch"],observation_ids:["obs_156","obs_155","obs_154"],time_range:{start:"2024-07-22",end:"2025-01-19"},contributing_records:156},recommendation:{action:"Start winding down by 10:00 PM",detailed_guidance:"Last night you went to bed at 10:45 PM, 30 minutes after your optimal threshold. Building a wind-down routine can help you get to bed earlier.",protocol_code:"PROTO_BEDTIME_ROUTINE",urgency:"suggested",expected_impact:"Could improve sleep efficiency by 1.2%"},_meta:{request_id:"req_2a3b4c5d6e7f8g9h",processing_time_ms:98,cache_hit:!0,api_version:"v1.2.0"}},Xc={report_id:"lab_thyrocare_20250115",user_id:"he-user-001",lab_name:"Thyrocare Technologies",lab_location:"Mumbai, Maharashtra",collection_date:"2025-01-15",report_date:"2025-01-16",received_date:"2025-01-16T14:30:00Z",processing:{method:"ocr_vision",confidence:.97,processing_time_ms:2340,review_status:"auto_approved"},patient:{name:"Arjun Kumar",age:42,sex:"M",reference_id:"he-user-001"},results:[{loinc_code:"1989-3",name:"Vitamin D, 25-Hydroxy",value:28,unit:"ng/mL",reference_range:{low:20,high:100,optimal_low:40,optimal_high:60,age_adjusted:!1,sex_specific:!1},interpretation:"low",flag:"Below Optimal",method:"Chemiluminescence Immunoassay"},{loinc_code:"4548-4",name:"Hemoglobin A1c",value:5.6,unit:"%",reference_range:{low:4,high:5.6,optimal_low:4.5,optimal_high:5.4,age_adjusted:!0,sex_specific:!1},interpretation:"normal",method:"HPLC"},{loinc_code:"2093-3",name:"Total Cholesterol",value:185,unit:"mg/dL",reference_range:{low:0,high:200,optimal_low:0,optimal_high:180,age_adjusted:!1,sex_specific:!1},interpretation:"optimal",method:"Enzymatic"}],attachments:{pdf_url:"https://storage.serif.health/labs/he-user-001/2025-01-15.pdf",ocr_text_url:"https://storage.serif.health/labs/he-user-001/2025-01-15_ocr.txt",ocr_json_url:"https://storage.serif.health/labs/he-user-001/2025-01-15_ocr.json"}},Kc={items:[{item_id:"item_walk_postdinner",priority:1,priority_label:"high",code:"PROTO_POSTMEAL_WALK",action:"15-min walk after dinner",action_detail:"Take a 15-minute walk within 30 minutes of finishing dinner",category:"exercise",rationale:{linked_insight_id:"ins_he001_postdinner_walk",linked_insight_title:"Post-Dinner Walk â†’ Glucose Control",effect_description:"Reduces your post-meal glucose spike by 22%",evidence_summary:"Based on 142 personal observations over 180 days",personalization_note:"Your threshold is 1,200 steps - you typically hit 1,800+"},timing:{time_of_day:"evening",window_start:"19:00",window_end:"21:00",suggested_time:"19:30",duration_minutes:15,frequency:"daily"},tracking:{detection_method:"passive_wearable",success_criteria:{type:"threshold",metric:"post_dinner_steps",threshold:1200,unit:"steps",operator:"gte"},verification_source:"Terra/Apple Watch",verification_delay_minutes:30},status:{state:"pending"}},{item_id:"item_vitamin_d",priority:2,priority_label:"high",code:"SUPP_VITAMIN_D",action:"Take Vitamin D with breakfast",action_detail:"2000 IU Vitamin D3 with a meal containing fat for absorption",category:"supplement",rationale:{linked_lab_id:"lab_thyrocare_20250115",linked_lab_result:"Vitamin D: 28 ng/mL (optimal: 40-60)",effect_description:"Addresses your suboptimal Vitamin D level",evidence_summary:"Lab result from Jan 15, 2025 shows level below optimal range"},timing:{time_of_day:"morning",window_start:"07:00",window_end:"10:00",suggested_time:"08:00",frequency:"daily"},tracking:{detection_method:"manual_confirmation",success_criteria:{type:"boolean"}},status:{state:"pending"}},{item_id:"item_zone2",priority:3,priority_label:"medium",code:"CARDIO_ZONE2",action:"Zone 2 cardio: 30 min",action_detail:"Easy pace where you can hold a conversation (HR 105-125 for you)",category:"exercise",rationale:{effect_description:"Improves metabolic flexibility and insulin sensitivity",evidence_summary:"3 sessions this week to hit your 150 min/week target",personalization_note:"You have completed 60 minutes so far this week"},timing:{time_of_day:"anytime",duration_minutes:30,frequency:"3x per week"},tracking:{detection_method:"passive_wearable",success_criteria:{type:"duration",metric:"zone2_minutes",threshold:30,unit:"minutes",operator:"gte"},verification_source:"Terra/Apple Watch"},status:{state:"pending"}},{item_id:"item_bedtime",priority:4,priority_label:"medium",code:"PROTO_BEDTIME_ROUTINE",action:"Wind down by 10:00 PM",action_detail:"Start your wind-down routine to be in bed by 10:15 PM",category:"sleep",rationale:{linked_insight_id:"ins_he001_bedtime_sleep",linked_insight_title:"Bedtime â†’ Sleep Efficiency",effect_description:"Your sleep efficiency drops 2.3% per hour after 10:15 PM",evidence_summary:"Based on 156 nights of sleep data"},timing:{time_of_day:"night",window_start:"21:30",window_end:"22:15",suggested_time:"22:00",frequency:"daily"},tracking:{detection_method:"passive_wearable",success_criteria:{type:"threshold",metric:"bedtime_hour",threshold:22.25,unit:"hour",operator:"lte"},verification_source:"Terra/Apple Watch",verification_delay_minutes:480},status:{state:"pending"}}]};function Jc(t){switch(t){case"ins-001":return{insightId:"ins-001",inbound:[{label:"Terra Webhook (Activity)",description:"Apple Watch activity data received via Terra API webhook",data:Gs,schema:"TerraWebhookPayload"},{label:"CGM Readings",description:"Abbott Libre glucose readings pulled from LibreView Cloud",data:qs,schema:"CGMReadingPayload"}],model:{label:"PersonalDoseResponse v2.4.1",description:"Piecewise linear regression with change-point detection",computation:`
// Identify threshold (Î¸) using change-point detection
const theta = findChangePoint(x_data, y_data);

// Fit piecewise linear model
const beta_below = linearRegression(
  x_data.filter(x => x < theta),
  y_data.filter((_, i) => x_data[i] < theta)
);

const beta_above = linearRegression(
  x_data.filter(x => x >= theta),
  y_data.filter((_, i) => x_data[i] >= theta)
);

// Combine with population prior (Bayesian update)
const posterior = bayesianUpdate({
  personal: { observations: 142, weight: 0.89 },
  population: { n: 12847, weight: 0.11 }
});
          `.trim()},outbound:{label:"Insight API Response",description:"Personalized causal insight with Î¸/Î² parameters",data:Zc,schema:"InsightAPIResponse"}};case"ins-002":return{insightId:"ins-002",inbound:[{label:"Terra Webhook (Sleep)",description:"Apple Watch sleep data received via Terra API webhook",data:Zs,schema:"TerraWebhookPayload"}],model:{label:"PersonalDoseResponse v2.4.1",description:"Piecewise linear regression with change-point detection",computation:`
// Sleep efficiency vs bedtime analysis
const bedtimes = sleepData.map(s => parseTime(s.bedtime));
const efficiencies = sleepData.map(s => s.efficiency);

// Find optimal bedtime threshold
const theta = findChangePoint(bedtimes, efficiencies);

// Effect is negative after threshold (efficiency drops)
const beta_above = linearRegression(
  bedtimes.filter(t => t > theta),
  efficiencies.filter((_, i) => bedtimes[i] > theta)
); // Returns ~ -2.3%/hour
          `.trim()},outbound:{label:"Insight API Response",description:"Personalized bedtime optimization insight",data:Qc,schema:"InsightAPIResponse"}};default:return null}}function ed(t,a){if(a==="human-edge"){const s=Kc.items.find(i=>i.code===t);if(!s)return null;const r=[];return s.rationale.linked_insight_id&&(s.code==="PROTO_POSTMEAL_WALK"?(r.push({label:"Terra Activity Webhook",description:"Recent activity data showing post-dinner walking pattern",data:Gs,schema:"TerraWebhookPayload"}),r.push({label:"CGM Readings",description:"Post-meal glucose response data",data:qs,schema:"CGMReadingPayload"})):s.code==="PROTO_BEDTIME_ROUTINE"&&r.push({label:"Terra Sleep Webhook",description:"Recent sleep data with bedtime patterns",data:Zs,schema:"TerraWebhookPayload"})),s.rationale.linked_lab_id&&r.push({label:"Lab Result (OCR)",description:"Processed lab report from Thyrocare",data:Xc,schema:"LabResultPayload"}),{protocolItemId:t,inbound:r,model:{label:"ProtocolPrioritizer v1.8.0",description:"Multi-objective optimization for daily actions",computation:`
// Score each potential protocol item
const scores = candidates.map(item => ({
  item,
  score: weightedSum([
    { factor: 'impact_magnitude', weight: 0.35, value: item.expectedImpact },
    { factor: 'confidence', weight: 0.25, value: item.evidenceConfidence },
    { factor: 'urgency', weight: 0.20, value: item.urgencyScore },
    { factor: 'user_preference', weight: 0.10, value: item.preferenceMatch },
    { factor: 'feasibility', weight: 0.10, value: item.feasibilityScore },
  ])
}));

// Apply constraints and rank
const protocol = scores
  .filter(s => !userExclusions.includes(s.item.code))
  .filter(s => fitsSchedule(s.item, userSchedule))
  .sort((a, b) => b.score - a.score)
  .slice(0, MAX_DAILY_ITEMS);
        `.trim()},outbound:{label:"Protocol Item Response",description:"Prioritized action with rationale and tracking spec",data:s,schema:"ProtocolItemResponse"}}}return null}const td={plateau_up:{line:"#10B981",fill:"rgba(16, 185, 129, 0.15)",bg:"bg-green-50",text:"text-green-700"},plateau_down:{line:"#EF4444",fill:"rgba(239, 68, 68, 0.15)",bg:"bg-red-50",text:"text-red-700"},v_min:{line:"#06B6D4",fill:"rgba(6, 182, 212, 0.15)",bg:"bg-cyan-50",text:"text-cyan-700"},v_max:{line:"#8B5CF6",fill:"rgba(139, 92, 246, 0.15)",bg:"bg-purple-50",text:"text-purple-700"},linear:{line:"#6B7280",fill:"rgba(107, 114, 128, 0.15)",bg:"bg-gray-50",text:"text-gray-700"}};function ad({curveType:t,currentXPercent:a,thetaXPercent:s=.5,color:r}){const u=()=>{switch(t){case"plateau_up":return`M 12 68 Q ${58.8} ${51.2} 90 26 L 168 26`;case"plateau_down":return`M 12 26 L 90 26 Q ${121.2} ${31.599999999999998} 168 68`;case"v_min":return`M 12 ${23.200000000000003} Q 51 ${62.4} 90 ${62.4} Q 129 ${62.4} 168 ${23.200000000000003}`;case"v_max":return`M 12 ${56.8} Q 51 ${17.6} 90 ${17.6} Q 129 ${17.6} 168 ${56.8}`;default:return"M 12 68 L 168 12"}},m=f=>{switch(t){case"plateau_up":return f<.5?68-f*2*56*.75:26;case"plateau_down":return f<.5?26:26+(f-.5)*2*56*.5;case"v_min":return 62.4-Math.abs(f-.5)*2*56*.6;case"v_max":return 17.6+Math.abs(f-.5)*2*56*.6;default:return 68-f*56}},c=u(),d=12+156*s,l=m(s),h=12+156*a,p=m(a);return e.jsxs("svg",{width:180,height:80,className:"overflow-visible",children:[e.jsx("path",{d:`${c} L 168 68 L 12 68 Z`,fill:r.fill}),e.jsx("path",{d:c,fill:"none",stroke:r.line,strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:d,y1:12,x2:d,y2:68,stroke:r.line,strokeWidth:"1",strokeDasharray:"3 2",opacity:.6}),e.jsx("circle",{cx:d,cy:l,r:"4",fill:r.line}),e.jsx("circle",{cx:d,cy:l,r:"2",fill:"white"}),e.jsx("circle",{cx:h,cy:p,r:"5",fill:"#F59E0B",stroke:"white",strokeWidth:"2"})]})}function sd({insight:t,compact:a=!1,className:s}){const r=td[t.curveType],[i,n]=x.useState(!1),o=x.useMemo(()=>Jc(t.id),[t.id]),u=x.useMemo(()=>{const l=t.theta.value*.6,h=t.theta.value-l,p=t.theta.value+l,f=(t.currentValue-h)/(p-h);return Math.max(.05,Math.min(.95,f))},[t.currentValue,t.theta.value]),c={below_optimal:{icon:me,label:"Below Threshold",color:"text-amber-600 bg-amber-50 border-amber-200"},at_optimal:{icon:lt,label:"At Optimal",color:"text-green-600 bg-green-50 border-green-200"},above_optimal:{icon:me,label:"Above Threshold",color:"text-amber-600 bg-amber-50 border-amber-200"}}[t.currentStatus],d=c.icon;return a?e.jsxs("div",{className:g("bg-white rounded-lg border border-gray-100 p-4",s),children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:t.title}),e.jsx("p",{className:"text-sm text-gray-500",children:t.subtitle})]}),e.jsxs("div",{className:g("px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1",c.color),children:[e.jsx(d,{className:"w-3 h-3"}),c.label]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Current:"}),e.jsxs("span",{className:"font-mono font-medium",children:[t.currentValue," ",t.currentUnit]}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsxs("span",{className:"text-gray-500",children:[t.personalDataPct,"% your data"]})]})]}):e.jsxs("div",{className:g("bg-white rounded-xl border border-gray-100 overflow-hidden",s),children:[e.jsx("div",{className:"p-4 border-b border-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:g("p-2 rounded-lg",r.bg),children:e.jsx(U,{className:g("w-5 h-5",r.text)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:t.title}),e.jsx("p",{className:"text-sm text-primary-600",children:t.subtitle})]})]}),e.jsxs("div",{className:g("px-2.5 py-1 rounded-full text-xs font-medium flex items-center gap-1.5 border",c.color),children:[e.jsx(d,{className:"w-3.5 h-3.5"}),c.label]})]})}),e.jsxs("div",{className:"p-4 flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ad,{curveType:t.curveType,currentXPercent:u,color:r})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Your threshold (θ)"}),e.jsx("span",{className:g("font-mono font-semibold",r.text),children:t.theta.displayValue})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Below θ"}),e.jsx("span",{className:"font-mono text-gray-700",children:t.betaBelow.description})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Above θ"}),e.jsx("span",{className:"font-mono text-gray-700",children:t.betaAbove.description})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm pt-2 border-t border-gray-100",children:[e.jsx("span",{className:"text-gray-500",children:"Current value"}),e.jsxs("span",{className:"font-mono font-semibold text-amber-600",children:[t.currentValue," ",t.currentUnit]})]})]})]}),e.jsxs("div",{className:"px-4 pb-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1.5",children:e.jsxs("div",{className:"flex-1 h-2 bg-gray-100 rounded-full overflow-hidden flex",children:[e.jsx("div",{className:"h-full bg-primary-500",style:{width:`${t.personalDataPct}%`}}),e.jsx("div",{className:"h-full bg-gray-300",style:{width:`${t.populationDataPct}%`}})]})}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:[e.jsxs("strong",{children:[t.personalDataPct,"%"]})," your data |"," ",e.jsxs("strong",{children:[t.populationDataPct,"%"]})," population"]}),e.jsxs("span",{children:["n = ",t.observations," observations"]})]})]}),e.jsx("div",{className:"px-4 pb-4",children:e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-amber-50 rounded-lg border border-amber-100",children:[e.jsx(fe,{className:"w-4 h-4 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-amber-800",children:t.actionableAdvice})]})}),e.jsxs("div",{className:"px-4 pb-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-400",children:[e.jsx(It,{className:"w-3 h-3"}),e.jsxs("span",{children:["Based on ",t.daysOfData," days of your data"]})]}),o&&e.jsxs("button",{onClick:()=>n(!0),className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-gray-600 hover:text-primary-600 bg-gray-50 hover:bg-primary-50 rounded-md border border-gray-200 hover:border-primary-200 transition-colors",children:[e.jsx(Ha,{className:"w-3.5 h-3.5"}),"View Data"]})]}),o&&e.jsx(Us,{isOpen:i,onClose:()=>n(!1),data:o,title:t.title})]})}function rd({readings:t,selectedDate:a,onDateChange:s,className:r}){const i=x.useMemo(()=>{const p=new Map;t.forEach(v=>{const j=v.timestamp.split("T")[0];p.has(j)||p.set(j,[]),p.get(j).push(v)});const f=[];return p.forEach((v,j)=>{const k=v.map(y=>y.glucose),N=k.reduce((y,S)=>y+S,0)/k.length,b=k.filter(y=>y>=70&&y<=140).length,w=Math.sqrt(k.reduce((y,S)=>y+Math.pow(S-N,2),0)/k.length);f.push({date:j,readings:v.sort((y,S)=>y.timestamp.localeCompare(S.timestamp)),avgGlucose:Math.round(N),tir:Math.round(b/k.length*100),cv:Math.round(w/N*100),min:Math.min(...k),max:Math.max(...k)})}),f.sort((v,j)=>j.date.localeCompare(v.date))},[t]),[n,o]=x.useState(0),u=i[n];if(!u)return e.jsx("div",{className:g("bg-white rounded-xl border border-gray-100 p-6",r),children:e.jsx("p",{className:"text-gray-500 text-center",children:"No CGM data available"})});const m=u.readings.map(p=>{const f=new Date(p.timestamp);return{time:f.getHours()+f.getMinutes()/60,timeLabel:f.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),glucose:p.glucose,trend:p.trend}}),c=new Date(u.date).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),d=n<i.length-1,l=n>0,h=p=>p<70?"#EF4444":p>140?"#F59E0B":"#10B981";return e.jsxs("div",{className:g("bg-white rounded-xl border border-gray-100 overflow-hidden",r),children:[e.jsx("div",{className:"p-4 border-b border-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(Bt,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Glucose Trace"}),e.jsx("p",{className:"text-sm text-gray-500",children:c})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>o(p=>p+1),disabled:!d,className:"p-1.5 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(La,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("span",{className:"text-sm text-gray-500 min-w-[100px] text-center",children:["Day ",i.length-n," of ",i.length]}),e.jsx("button",{onClick:()=>o(p=>p-1),disabled:!l,className:"p-1.5 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(ie,{className:"w-5 h-5 text-gray-600"})})]})]})}),e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-100 flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"TIR:"}),e.jsxs("span",{className:g("font-semibold",u.tir>=70?"text-green-600":u.tir>=50?"text-amber-600":"text-red-600"),children:[u.tir,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Avg:"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[u.avgGlucose," mg/dL"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"CV:"}),e.jsxs("span",{className:g("font-semibold",u.cv<=36?"text-green-600":"text-amber-600"),children:[u.cv,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Range:"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[u.min,"-",u.max," mg/dL"]})]})]}),e.jsx("div",{className:"p-4",children:e.jsx(ot,{width:"100%",height:220,children:e.jsxs(Pr,{data:m,margin:{top:10,right:10,left:-10,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"glucoseGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#6366F1",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#6366F1",stopOpacity:.05})]})}),e.jsx(Et,{strokeDasharray:"3 3",stroke:"#E5E7EB",vertical:!1}),e.jsx($t,{dataKey:"time",tickFormatter:p=>`${Math.floor(p)}:00`,ticks:[0,6,12,18,24],domain:[0,24],fontSize:12,stroke:"#9CA3AF"}),e.jsx(Wt,{domain:[50,200],ticks:[70,100,140,180],fontSize:12,stroke:"#9CA3AF"}),e.jsx(Dr,{y1:70,y2:140,fill:"#10B981",fillOpacity:.1}),e.jsx(Ke,{y:70,stroke:"#10B981",strokeDasharray:"3 3"}),e.jsx(Ke,{y:140,stroke:"#10B981",strokeDasharray:"3 3"}),e.jsx(Ot,{content:({active:p,payload:f})=>{if(!p||!f||!f[0])return null;const v=f[0].payload;return e.jsxs("div",{className:"bg-white p-2 rounded-lg shadow-lg border border-gray-100 text-sm",children:[e.jsx("p",{className:"font-medium text-gray-900",children:v.timeLabel}),e.jsxs("p",{style:{color:h(v.glucose)},children:[e.jsx("strong",{children:v.glucose})," mg/dL"]}),e.jsx("p",{className:"text-gray-500 text-xs capitalize",children:v.trend.replace("_"," ")})]})}}),e.jsx(Wa,{type:"monotone",dataKey:"glucose",stroke:"#6366F1",strokeWidth:2,fill:"url(#glucoseGradient)",dot:!1,activeDot:{r:4,fill:"#6366F1",stroke:"white",strokeWidth:2}})]})})}),e.jsxs("div",{className:"px-4 pb-4 flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-100 border border-green-300"}),e.jsx("span",{children:"Target range (70-140 mg/dL)"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-primary-500"}),e.jsx("span",{children:"Glucose level"})]})]})]})}const id={Morning:jt,"After dinner":J,Evening:J,Afternoon:Je,Anytime:le};function nd({items:t,date:a,clientId:s,onToggle:r,className:i}){const[n,o]=x.useState(new Set(t.filter(b=>b.completed).map((b,w)=>w))),[u,m]=x.useState(!1),[c,d]=x.useState(null),l=x.useMemo(()=>!c||!s?null:ed(c,s),[c,s]),h=t.find(b=>b.code===c),p=b=>{d(b),m(!0)},f=a||new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),v=b=>{const w=new Set(n);w.has(b)?w.delete(b):w.add(b),o(w),r?.(b,!n.has(b))},j=n.size,k=t.length,N=Math.round(j/k*100);return e.jsxs("div",{className:g("bg-white rounded-xl border border-gray-100 overflow-hidden",i),children:[e.jsx("div",{className:"p-4 border-b border-gray-50 bg-gradient-to-r from-amber-50 to-orange-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Today's Protocol"}),e.jsx("p",{className:"text-sm text-gray-500",children:f})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:j}),e.jsxs("span",{className:"text-gray-400",children:["/",k]})]}),e.jsxs("div",{className:"w-12 h-12 relative",children:[e.jsxs("svg",{className:"w-12 h-12 transform -rotate-90",children:[e.jsx("circle",{cx:"24",cy:"24",r:"20",fill:"none",stroke:"#E5E7EB",strokeWidth:"4"}),e.jsx("circle",{cx:"24",cy:"24",r:"20",fill:"none",stroke:"#F59E0B",strokeWidth:"4",strokeLinecap:"round",strokeDasharray:`${N*1.26} 126`})]}),e.jsxs("span",{className:"absolute inset-0 flex items-center justify-center text-xs font-semibold text-gray-700",children:[N,"%"]})]})]})]})}),e.jsx("div",{className:"divide-y divide-gray-50",children:t.sort((b,w)=>b.priority-w.priority).map((b,w)=>{const y=n.has(w),S=b.timeOfDay?id[b.timeOfDay]||le:le;return e.jsxs("div",{className:g("p-4 flex items-start gap-3 transition-colors",y?"bg-green-50/50":"hover:bg-gray-50"),children:[e.jsx("button",{onClick:()=>v(w),className:g("flex-shrink-0 mt-0.5 transition-colors",y?"text-green-500":"text-gray-300 hover:text-gray-400"),children:y?e.jsx(lt,{className:"w-5 h-5"}):e.jsx(Va,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:g("w-5 h-5 rounded-full flex items-center justify-center text-xs font-semibold",b.priority===1?"bg-amber-100 text-amber-700":b.priority===2?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"),children:b.priority}),e.jsx("span",{className:g("font-medium",y?"text-gray-400 line-through":"text-gray-900"),children:b.action})]}),e.jsx("p",{className:g("text-sm ml-7",y?"text-gray-400":"text-gray-500"),children:b.reason}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 ml-7",children:[b.timeOfDay&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gray-100 rounded text-xs text-gray-600",children:[e.jsx(S,{className:"w-3 h-3"}),b.timeOfDay]}),b.linkedInsightId&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-primary-50 rounded text-xs text-primary-600",children:[e.jsx(Aa,{className:"w-3 h-3"}),"Linked insight"]}),s&&b.code&&e.jsxs("button",{onClick:T=>{T.stopPropagation(),p(b.code)},className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gray-50 hover:bg-primary-50 rounded text-xs text-gray-500 hover:text-primary-600 border border-gray-200 hover:border-primary-200 transition-colors",children:[e.jsx(Ha,{className:"w-3 h-3"}),"View Data"]})]})]})]},w)})}),j===k&&e.jsx("div",{className:"p-4 bg-green-50 border-t border-green-100",children:e.jsx("p",{className:"text-sm text-green-700 font-medium text-center",children:"All items completed! Great work today."})}),l&&h&&e.jsx(Us,{isOpen:u,onClose:()=>{m(!1),d(null)},data:l,title:h.action})]})}function od({data:t,width:a=80,height:s=24,color:r="#6366F1",showDots:i=!1,className:n}){if(!t||t.length<2)return null;const o=2,u=Math.min(...t),c=Math.max(...t)-u||1,d=t.map((h,p)=>{const f=o+p/(t.length-1)*(a-o*2),v=s-o-(h-u)/c*(s-o*2);return{x:f,y:v,value:h}}),l=d.map((h,p)=>`${p===0?"M":"L"} ${h.x} ${h.y}`).join(" ");return e.jsxs("svg",{width:a,height:s,className:g("overflow-visible",n),viewBox:`0 0 ${a} ${s}`,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`sparkline-gradient-${r}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:r,stopOpacity:"0.2"}),e.jsx("stop",{offset:"100%",stopColor:r,stopOpacity:"0"})]})}),e.jsx("path",{d:`${l} L ${d[d.length-1].x} ${s-o} L ${o} ${s-o} Z`,fill:`url(#sparkline-gradient-${r})`}),e.jsx("path",{d:l,fill:"none",stroke:r,strokeWidth:"1.5",strokeLinecap:"round"}),i&&d.length>0&&e.jsx("circle",{cx:d[d.length-1].x,cy:d[d.length-1].y,r:"2.5",fill:r})]})}function ld({name:t,value:a,unit:s,change:r,changeDirection:i,isGood:n,sparklineData:o,period:u,className:m}){const c=i==="up"?G:i==="down"?be:Ba,d=n?"text-green-600 bg-green-50":i==="stable"?"text-gray-600 bg-gray-50":"text-red-600 bg-red-50",l=n?"#10B981":i==="stable"?"#6B7280":"#EF4444";return e.jsxs("div",{className:g("bg-white rounded-xl p-4 border border-gray-100",m),children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:t}),e.jsxs("div",{className:g("flex items-center gap-1 px-1.5 py-0.5 rounded text-xs font-medium",d),children:[e.jsx(c,{className:"w-3 h-3"}),i!=="stable"&&e.jsxs("span",{children:[r>0?"+":"",typeof r=="number"&&r%1!==0?r.toFixed(1):r]})]})]}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:typeof a=="number"&&a%1!==0?a.toFixed(1):a}),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:s})]}),e.jsx(od,{data:o,color:l,width:60,height:20,showDots:!0})]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:[u," trend"]})]})}function cd(){const{clientId:t,userId:a}=er(),s=Ra(),r=te(c=>c.loadUserDetail),i=te(c=>c.clearUserDetail),n=Ec(),o=$c(),u=t?_t(t):null;if(x.useEffect(()=>(t&&a&&r(t,a),()=>{i()}),[t,a,r,i]),o)return e.jsx(Q,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Le,{className:"w-8 h-8 text-primary-500 animate-spin"})})});if(!n||!u)return e.jsx(Q,{children:e.jsxs(M,{className:"p-12 text-center",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"User not found"}),e.jsx(L,{variant:"outline",onClick:()=>s("/clients"),children:"Back to Clients"})]})});const m=Wc(n);return e.jsxs(Q,{title:n.name,subtitle:`${u.name} - ${n.archetype}`,maxWidth:"2xl",actions:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ia,{to:"/clients",children:e.jsxs(L,{variant:"ghost",size:"sm",children:[e.jsx(_r,{className:"w-4 h-4 mr-1"}),"Back to Clients"]})}),e.jsxs(L,{variant:"outline",size:"sm",children:[e.jsx(Rr,{className:"w-4 h-4 mr-1"}),"Export Report"]})]}),children:[e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-6",children:e.jsx(Yc,{name:n.name,avatar:n.avatar,archetype:n.archetype,clientName:u.name,clientLogo:u.logo,enrollmentDate:n.enrollmentDate,activeDays:n.activeDays,complianceRate:n.complianceRate,currentPhase:n.currentPhase,tags:n.tags,dataSources:n.dataSources,additionalStats:[{label:"insights",value:n.personalInsights.length}]})}),e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-6",children:e.jsx(H,{title:"Key Metrics",subtitle:"Your most important health indicators",children:e.jsx(B,{columns:3,gap:"md",children:n.keyMetrics.map(c=>e.jsx(ld,{name:c.name,value:c.value,unit:c.unit,change:c.change,changeDirection:c.changeDirection,isGood:c.isGood,sparklineData:c.sparklineData,period:c.period},c.id))})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[m&&n.cgmReadings.length>0&&e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsx(rd,{readings:n.cgmReadings})}),e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsx(H,{title:"Personal Insights",subtitle:"Causal discoveries unique to you",actions:e.jsxs(_,{variant:"outline",className:"text-primary-600 border-primary-200",children:[e.jsx(fe,{className:"w-3 h-3 mr-1"}),n.personalInsights.length," insights"]}),children:e.jsx("div",{className:"space-y-4",children:n.personalInsights.map(c=>e.jsx(sd,{insight:c},c.id))})})}),m&&n.labHistory.length>0&&e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsx(H,{title:"Lab Trends",subtitle:"Biomarker progress over time",actions:e.jsxs(_,{variant:"outline",className:"text-rose-600 border-rose-200",children:[e.jsx(Ft,{className:"w-3 h-3 mr-1"}),n.labHistory.length," markers"]}),children:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:n.labHistory.map(c=>{const d=c.readings[c.readings.length-1]?.value,l=c.readings[c.readings.length-2]?.value,h=l?d-l:0;return e.jsxs(M,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:c.biomarker}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Target: ",c.targetRange.low,"-",c.targetRange.high," ",c.unit]})]}),e.jsx(_,{variant:c.trend==="improving"?"success":c.trend==="worsening"?"danger":"outline",children:c.trend})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:d}),e.jsx("span",{className:"text-sm text-gray-500",children:c.unit}),h!==0&&e.jsxs("span",{className:c.trend==="improving"?"text-green-600 text-sm":"text-red-600 text-sm",children:[h>0?"+":"",h.toFixed(1)]})]}),e.jsx("div",{className:"mt-2 flex gap-1",children:c.readings.map((p,f)=>e.jsx("div",{className:"flex-1 h-1 rounded",style:{backgroundColor:p.value>=c.targetRange.low&&p.value<=c.targetRange.high?"#10B981":"#F59E0B"},title:`${p.date}: ${p.value} ${c.unit}`},f))})]},c.biomarker)})})})})]}),e.jsxs("div",{className:"space-y-6",children:[m&&n.dailyProtocol&&e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},children:e.jsx(nd,{items:n.dailyProtocol,clientId:t})}),m&&n.interventions.length>0&&e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.35},children:e.jsxs(M,{className:"overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-50",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Active Interventions"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Your current health protocols"})]}),e.jsx("div",{className:"divide-y divide-gray-50",children:n.interventions.map(c=>e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:c.name}),e.jsx("p",{className:"text-xs text-gray-500",children:c.category})]}),e.jsxs(_,{variant:c.compliance>=90?"success":c.compliance>=70?"warning":"danger",children:[c.compliance,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{children:["Target: ",c.targetMetric]}),e.jsxs("span",{children:["Streak: ",c.streak," days"]})]}),e.jsx("div",{className:"mt-2 h-1.5 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${c.compliance}%`,backgroundColor:c.compliance>=90?"#10B981":c.compliance>=70?"#F59E0B":"#EF4444"}})})]},c.code))})]})})]})]})]})}const dd=[{id:"labs",name:"Laboratory / Blood Biomarkers",icon:Fa,category:"Markers",ingestionPath:["Lab PDF/HL7","OCR Pipeline","Validation","BigQuery"],cadence:"Event-based (Day 0, 90, 180)",lastSync:"3 days ago",status:"event",dataPoints:78},{id:"wearables",name:"Digital Biomarkers – Wearables",icon:Ee,category:"Physiology + Loads",ingestionPath:["Terra API","Pub/Sub","Kafka","BigQuery"],cadence:"Continuous → Daily summary",lastSync:"2 hours ago",status:"live",dataPoints:45},{id:"cgm",name:"CGM (Continuous Glucose)",icon:F,category:"Physiology",ingestionPath:["LibreView Cloud","Terra Pull","Webhook","BigQuery"],cadence:"96 readings/day (15-min)",lastSync:"15 min ago",status:"live",dataPoints:12},{id:"devices",name:"Connected Medical Devices",icon:Ar,category:"Physiology",ingestionPath:["Withings/Omron","Terra SDK","Webhook","BigQuery"],cadence:"User-triggered events",lastSync:"1 day ago",status:"event",dataPoints:8},{id:"profile",name:"Profile & Lifestyle Self-Report",icon:Lr,category:"Choices",ingestionPath:["Mobile App","Firestore","Cloud Function","BigQuery"],cadence:"Baseline + weekly surveys",lastSync:"6 hours ago",status:"daily",dataPoints:25},{id:"interventions",name:"Intervention Catalogue",icon:U,category:"Protocols",ingestionPath:["Clinician CMS","PostgreSQL","REST API","BigQuery"],cadence:"Event-based assignments",lastSync:"1 hour ago",status:"event",dataPoints:1200},{id:"compliance",name:"Compliance & Behavior Logs",icon:xe,category:"Outcomes",ingestionPath:["Wearables + App","Compliance Service","BigQuery"],cadence:"Daily scoring at 02:00",lastSync:"4 hours ago",status:"daily",dataPoints:15},{id:"environment",name:"Environmental Context",icon:nt,category:"Environment",ingestionPath:["OpenWeatherMap","BreezoMeter","REST Pull","BigQuery"],cadence:"Nightly refresh",lastSync:"8 hours ago",status:"daily",dataPoints:7},{id:"telemetry",name:"Engagement & UX Telemetry",icon:et,category:"Analytics",ingestionPath:["Firebase Analytics","FCM","Export","BigQuery"],cadence:"Real-time streaming",lastSync:"Live",status:"live",dataPoints:20}],md={live:{color:"bg-emerald-500",label:"LIVE",pulse:!0},daily:{color:"bg-blue-500",label:"DAILY",pulse:!1},event:{color:"bg-amber-500",label:"EVENT",pulse:!1},quarterly:{color:"bg-violet-500",label:"QUARTERLY",pulse:!1}};function ud(){return e.jsxs("div",{className:"space-y-3",children:[dd.map(t=>{const a=t.icon,s=md[t.status];return e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 border border-gray-200 hover:border-gray-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 w-64 flex-shrink-0",children:[e.jsx("div",{className:"p-2 bg-black text-white",children:e.jsx(a,{className:"w-4 h-4"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-bold text-black truncate",children:t.name}),e.jsx("div",{className:"text-xs text-gray-500",children:t.category})]})]}),e.jsx("div",{className:"flex-1 flex items-center gap-1 overflow-x-auto",children:t.ingestionPath.map((r,i)=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"px-2 py-1 bg-white border border-gray-200 text-xs font-mono text-gray-700 whitespace-nowrap",children:r}),i<t.ingestionPath.length-1&&e.jsx("span",{className:"text-gray-400",children:"→"})]},i))}),e.jsxs("div",{className:"w-44 flex-shrink-0 text-right",children:[e.jsx("div",{className:"text-xs font-bold text-gray-600 uppercase",children:t.cadence}),e.jsx("div",{className:"text-xs text-gray-400",children:t.lastSync})]}),e.jsx("div",{className:"w-20 flex-shrink-0 flex justify-end",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:`w-2 h-2 ${s.color} ${s.pulse?"animate-pulse":""}`}),e.jsx("span",{className:"text-xs font-bold uppercase text-gray-600",children:s.label})]})}),e.jsxs("div",{className:"w-16 flex-shrink-0 text-right",children:[e.jsx("span",{className:"text-sm font-mono font-bold text-black",children:t.dataPoints}),e.jsx("span",{className:"text-xs text-gray-400 ml-1",children:"var"})]})]},t.id)}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-500 animate-pulse"}),e.jsx("span",{className:"text-xs font-bold text-gray-600",children:"3 Live Streams"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500"}),e.jsx("span",{className:"text-xs font-bold text-gray-600",children:"3 Daily Batches"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-amber-500"}),e.jsx("span",{className:"text-xs font-bold text-gray-600",children:"3 Event-Driven"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-lg font-black text-black",children:"1,410"}),e.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"total variables tracked"})]})]})]})}function hd(){const t={E:{x:100,y:130,color:"#64748B",label:"Environment",sublabel:"Context"},C:{x:280,y:130,color:"#0EA5E9",label:"Choices",sublabel:"You Control"},P:{x:520,y:130,color:"#F59E0B",label:"Physiology",sublabel:"Fast Signals"},O:{x:700,y:130,color:"#10B981",label:"Outcomes",sublabel:"Optimize"},L:{x:280,y:310,color:"#8B5CF6",label:"Loads",sublabel:"Accumulated"},M:{x:520,y:310,color:"#EC4899",label:"Markers",sublabel:"Slow Biology"}},a=40,s=({x:r,y:i,text:n,color:o="#6366F1",italic:u=!1})=>e.jsxs("g",{children:[e.jsx("rect",{x:r-n.length*3.2,y:i-10,width:n.length*6.4,height:16,rx:"8",fill:"white",fillOpacity:"0.95"}),e.jsx("text",{x:r,y:i+2,textAnchor:"middle",fontSize:"10",fontStyle:u?"italic":"normal",fontWeight:"500",fill:o,children:n})]});return e.jsxs("div",{className:"relative w-full overflow-x-auto",children:[e.jsxs("svg",{viewBox:"0 0 800 440",className:"w-full min-w-[700px]",style:{maxHeight:"480px"},children:[e.jsxs("defs",{children:[e.jsx("marker",{id:"arrowhead-learned",markerWidth:"12",markerHeight:"8",refX:"10",refY:"4",orient:"auto",children:e.jsx("polygon",{points:"0 0, 12 4, 0 8",fill:"#6366F1"})}),e.jsx("marker",{id:"arrowhead-fixed",markerWidth:"12",markerHeight:"8",refX:"10",refY:"4",orient:"auto",children:e.jsx("polygon",{points:"0 0, 12 4, 0 8",fill:"#64748B"})}),e.jsx("marker",{id:"arrowhead-modifier",markerWidth:"12",markerHeight:"8",refX:"10",refY:"4",orient:"auto",children:e.jsx("polygon",{points:"0 0, 12 4, 0 8",fill:"#F472B6"})}),e.jsxs("linearGradient",{id:"safeguard-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FDF2F8",stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:"#FCE7F3",stopOpacity:"0.2"})]})]}),e.jsx("rect",{x:"20",y:"20",width:"760",height:"400",rx:"16",fill:"url(#safeguard-gradient)",stroke:"#F9A8D4",strokeWidth:"2",strokeDasharray:"10 5"}),e.jsxs("g",{transform:"translate(40, 50)",children:[e.jsx("rect",{x:"-8",y:"-14",width:"120",height:"36",rx:"8",fill:"white",fillOpacity:"0.9"}),e.jsx("text",{fontSize:"13",fontWeight:"600",fill:"#DB2777",children:"Safeguards (S)"}),e.jsx("text",{y:"16",fontSize:"10",fill:"#9CA3AF",children:"FDA & Medical Bounds"})]}),e.jsx("path",{d:`M ${100+a+5} 130 L ${280-a-12} 130`,stroke:"#64748B",strokeWidth:"2.5",fill:"none",markerEnd:"url(#arrowhead-fixed)"}),e.jsx("path",{d:`M 280 ${130+a+5} L 280 ${310-a-12}`,stroke:"#64748B",strokeWidth:"2.5",fill:"none",markerEnd:"url(#arrowhead-fixed)"}),e.jsx("path",{d:`M ${280+a+5} 130 L ${520-a-12} 130`,stroke:"#6366F1",strokeWidth:"2.5",fill:"none",markerEnd:"url(#arrowhead-learned)"}),e.jsx(s,{x:400,y:115,text:"effects & thresholds"}),e.jsx("path",{d:`M ${520+a+5} 130 L ${700-a-12} 130`,stroke:"#6366F1",strokeWidth:"2.5",fill:"none",markerEnd:"url(#arrowhead-learned)"}),e.jsx(s,{x:610,y:115,text:"effects & thresholds"}),e.jsx("path",{d:"M 310 102 Q 490 30 670 102",stroke:"#6366F1",strokeWidth:"2.5",fill:"none",markerEnd:"url(#arrowhead-learned)"}),e.jsx(s,{x:490,y:55,text:"direct effects"}),e.jsx("path",{d:`M ${280+a+5} 310 L ${520-a-12} 310`,stroke:"#6366F1",strokeWidth:"2.5",fill:"none",markerEnd:"url(#arrowhead-learned)"}),e.jsx(s,{x:400,y:295,text:"effects & thresholds"}),e.jsx("path",{d:"M 710 168 Q 750 220 558 300",stroke:"#6366F1",strokeWidth:"2.5",fill:"none",markerEnd:"url(#arrowhead-learned)"}),e.jsx(s,{x:720,y:230,text:"accumulates"}),e.jsx("path",{d:"M 315 290 Q 420 200 665 155",stroke:"#F472B6",strokeWidth:"2",strokeDasharray:"8 4",fill:"none",markerEnd:"url(#arrowhead-modifier)",opacity:"0.85"}),e.jsx(s,{x:440,y:215,text:"modifies effects",color:"#DB2777",italic:!0}),Object.entries(t).map(([r,i])=>e.jsxs("g",{children:[e.jsx("circle",{cx:i.x+2,cy:i.y+3,r:a,fill:"black",fillOpacity:"0.1"}),e.jsx("circle",{cx:i.x,cy:i.y,r:a,fill:i.color}),e.jsx("circle",{cx:i.x-8,cy:i.y-8,r:12,fill:"white",fillOpacity:"0.2"}),e.jsx("text",{x:i.x,y:i.y+2,textAnchor:"middle",dominantBaseline:"middle",fontSize:"22",fontWeight:"bold",fill:"white",children:r}),e.jsx("text",{x:i.x,y:i.y+a+22,textAnchor:"middle",fontSize:"13",fontWeight:"600",fill:"#1F2937",children:i.label}),e.jsx("text",{x:i.x,y:i.y+a+38,textAnchor:"middle",fontSize:"11",fill:"#6B7280",children:i.sublabel})]},r))]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-8 mt-6 pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("svg",{width:"40",height:"12",children:[e.jsx("line",{x1:"0",y1:"6",x2:"32",y2:"6",stroke:"#6366F1",strokeWidth:"2.5"}),e.jsx("polygon",{points:"32,2 40,6 32,10",fill:"#6366F1"})]}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Learned Effect"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("svg",{width:"40",height:"12",children:[e.jsx("line",{x1:"0",y1:"6",x2:"32",y2:"6",stroke:"#F472B6",strokeWidth:"2",strokeDasharray:"6 3"}),e.jsx("polygon",{points:"32,2 40,6 32,10",fill:"#F472B6"})]}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Modifies Effect"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("svg",{width:"40",height:"12",children:[e.jsx("line",{x1:"0",y1:"6",x2:"32",y2:"6",stroke:"#64748B",strokeWidth:"2.5"}),e.jsx("polygon",{points:"32,2 40,6 32,10",fill:"#64748B"})]}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Fixed Relation"})]})]})]})}const pd=[{id:"choices",letter:"C",name:"Choices",description:"Behavioral inputs you control",color:"from-blue-500 to-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-700",icon:Ir,variables:["Caffeine intake (mg, time)","Alcohol (units, time)","Supplements taken","Meal timing","Exercise type & duration","Screen time","Meditation minutes"]},{id:"outcomes",letter:"O",name:"Outcomes",description:"Health results we measure",color:"from-emerald-500 to-emerald-600",bgColor:"bg-emerald-50",borderColor:"border-emerald-200",textColor:"text-emerald-700",icon:U,variables:["Sleep efficiency %","Deep sleep minutes","REM sleep minutes","Sleep latency","Energy score","Mood rating","Cognitive performance"]},{id:"markers",letter:"M",name:"Markers",description:"Lab values & biomarkers",color:"from-violet-500 to-violet-600",bgColor:"bg-violet-50",borderColor:"border-violet-200",textColor:"text-violet-700",icon:Fa,variables:["Fasting glucose","HbA1c","Lipid panel (LDL, HDL, Trig)","hsCRP","Cortisol","Testosterone","Vitamin D","Ferritin"]},{id:"physiology",letter:"P",name:"Physiology",description:"Real-time body signals",color:"from-rose-500 to-rose-600",bgColor:"bg-rose-50",borderColor:"border-rose-200",textColor:"text-rose-700",icon:F,variables:["Heart rate variability (ms)","Resting heart rate","Body temperature","Blood oxygen (SpO2)","Respiratory rate","Blood pressure"]},{id:"loads",letter:"L",name:"Loads",description:"Stressors on the system",color:"from-amber-500 to-amber-600",bgColor:"bg-amber-50",borderColor:"border-amber-200",textColor:"text-amber-700",icon:G,variables:["Training load score","Strain score","Steps count","Active calories","Work stress rating","Travel (timezone shifts)","Illness/recovery"]},{id:"environment",letter:"E",name:"Environment",description:"External context factors",color:"from-sky-500 to-sky-600",bgColor:"bg-sky-50",borderColor:"border-sky-200",textColor:"text-sky-700",icon:nt,variables:["Ambient temperature (°C/°F)","Bedroom temperature","Humidity %","Air quality index (AQI)","PM2.5 / PM10 levels","Pollen count","Light exposure (lux)","Barometric pressure (hPa)","UV index","Daylight hours","Weather conditions","Altitude / elevation"]}],xd=[{id:"dau",name:"Daily Active Users",value:"2,847",change:12,changeLabel:"vs last week",status:"good"},{id:"push_delivery",name:"Push Delivery Rate",value:"94.2%",change:1.3,changeLabel:"vs last week",status:"good"},{id:"push_open",name:"Push Open Rate",value:"38.7%",change:-2.1,changeLabel:"vs last week",status:"warning"},{id:"avg_session",name:"Avg Session Duration",value:"4m 23s",change:8,changeLabel:"vs last week",status:"good"},{id:"screens_per_session",name:"Screens / Session",value:"6.2",change:.4,changeLabel:"vs last week",status:"neutral"},{id:"protocol_completion",name:"Protocol Completion",value:"73.8%",change:5.2,changeLabel:"vs last week",status:"good"},{id:"insight_views",name:"Insight Card Views",value:"12,439",change:18,changeLabel:"vs last week",status:"good"},{id:"sync_rate",name:"Device Sync Rate",value:"89.1%",change:-.8,changeLabel:"vs last week",status:"neutral"}],gd=[{event:"app_open",count:8432,trend:"up"},{event:"insight_viewed",count:12439,trend:"up"},{event:"protocol_started",count:892,trend:"stable"},{event:"protocol_completed",count:658,trend:"up"},{event:"device_synced",count:3201,trend:"stable"},{event:"lab_uploaded",count:127,trend:"up"},{event:"coach_message_sent",count:445,trend:"down"},{event:"notification_clicked",count:1893,trend:"up"}];function fd(){return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-4 gap-4",children:xd.map(t=>e.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200",children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:t.name}),e.jsx("div",{className:"text-2xl font-black text-black",children:t.value}),t.change!==void 0&&e.jsxs("div",{className:`text-xs font-bold mt-1 ${t.change>0?"text-emerald-600":t.change<0?"text-rose-600":"text-gray-500"}`,children:[t.change>0?"↑":t.change<0?"↓":"→"," ",Math.abs(t.change),"% ",t.changeLabel]})]},t.id))}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-black text-gray-500 uppercase tracking-wider mb-3",children:"Event Stream (Last 24h)"}),e.jsx("div",{className:"space-y-2",children:gd.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white border border-gray-100",children:[e.jsx("span",{className:"text-sm font-mono text-gray-700",children:t.event}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-bold text-black",children:t.count.toLocaleString()}),e.jsx("span",{className:`text-xs ${t.trend==="up"?"text-emerald-500":t.trend==="down"?"text-rose-500":"text-gray-400"}`,children:t.trend==="up"?"↑":t.trend==="down"?"↓":"→"})]})]},t.event))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-black text-gray-500 uppercase tracking-wider mb-3",children:"Data Pipeline Status"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-emerald-50 border border-emerald-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-bold text-emerald-800",children:"Firebase → BigQuery Export"}),e.jsx("span",{className:"text-xs font-bold text-emerald-600 uppercase",children:"Healthy"})]}),e.jsx("div",{className:"text-xs text-emerald-600 mt-1",children:"Last sync: 2 min ago • 0 errors"})]}),e.jsxs("div",{className:"p-3 bg-emerald-50 border border-emerald-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-bold text-emerald-800",children:"Terra Webhook Ingestion"}),e.jsx("span",{className:"text-xs font-bold text-emerald-600 uppercase",children:"Healthy"})]}),e.jsx("div",{className:"text-xs text-emerald-600 mt-1",children:"Last event: 47 sec ago • 99.8% success"})]}),e.jsxs("div",{className:"p-3 bg-emerald-50 border border-emerald-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-bold text-emerald-800",children:"Lab OCR Pipeline"}),e.jsx("span",{className:"text-xs font-bold text-emerald-600 uppercase",children:"Healthy"})]}),e.jsx("div",{className:"text-xs text-emerald-600 mt-1",children:"Last processed: 3 hrs ago • Queue: 0"})]}),e.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-bold text-amber-800",children:"Weather API (BreezoMeter)"}),e.jsx("span",{className:"text-xs font-bold text-amber-600 uppercase",children:"Degraded"})]}),e.jsx("div",{className:"text-xs text-amber-600 mt-1",children:"Rate limit reached • Next refresh: 2 hrs"})]})]})]})]})]})}function bd(){return e.jsxs(Q,{title:"Data Categories (COMPLE)",subtitle:"How we structure health data for causal learning",children:[e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsxs(M,{padding:"none",className:"overflow-hidden",children:[e.jsx("div",{className:"px-6 py-3 bg-black text-white",children:e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Framework Overview"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-black",children:e.jsx(F,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-black text-black uppercase tracking-tight mb-2",children:"The COMPLE Framework"}),e.jsxs("p",{className:"text-gray-600 leading-relaxed",children:["Serif organizes health data into six categories that enable causal inference.",e.jsx("strong",{className:"text-black font-bold",children:" Choices"})," are what you control,",e.jsx("strong",{className:"text-black font-bold",children:" Outcomes"})," are what you optimize for daily,",e.jsx("strong",{className:"text-black font-bold",children:" Markers"})," are slow-changing biology,",e.jsx("strong",{className:"text-black font-bold",children:" Physiology"})," tracks acute signals,",e.jsx("strong",{className:"text-black font-bold",children:" Loads"})," accumulate over time, and",e.jsx("strong",{className:"text-black font-bold",children:" Environment"})," provides context you can't control."]})]})]})})]})}),e.jsx(B,{columns:3,gap:"lg",children:pd.map((t,a)=>(t.icon,e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.1},children:e.jsxs(M,{padding:"none",className:"h-full overflow-hidden",children:[e.jsx("div",{className:`px-5 py-4 ${t.bgColor} border-b-2 border-black`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 bg-gradient-to-br ${t.color} flex items-center justify-center`,children:e.jsx("span",{className:"text-white font-black text-lg",children:t.letter})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-black uppercase tracking-tight ${t.textColor}`,children:t.name}),e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase",children:t.description})]})]})}),e.jsx("div",{className:"px-5 py-4",children:e.jsx("ul",{className:"space-y-2",children:t.variables.map((s,r)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx("div",{className:`w-2 h-2 bg-gradient-to-br ${t.color}`}),s]},r))})})]})},t.id)))}),e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-8",children:e.jsxs(M,{padding:"none",className:"overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-slate-800 text-white border-b-2 border-black",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20",children:e.jsx(re,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-black uppercase tracking-tight",children:"Data Ingestion Pipeline"}),e.jsx("p",{className:"text-sm text-slate-300",children:"Source systems, ingestion paths, and native cadence"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx(ud,{})})]})}),e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"mt-8",children:e.jsxs(M,{padding:"none",className:"overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-indigo-600 text-white border-b-2 border-black",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20",children:e.jsx($e,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-black uppercase tracking-tight",children:"How Data Flows in Causal Learning"}),e.jsx("p",{className:"text-sm text-indigo-100",children:"The COMPLE Directed Acyclic Graph"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx(hd,{})}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:e.jsxs("p",{className:"text-sm text-gray-600 leading-relaxed",children:[e.jsx("strong",{className:"text-black font-black",children:"KEY INSIGHT:"})," Serif learns causal effects (blue arrows) from data while respecting the graph structure. ",e.jsx("strong",{className:"text-rose-600 font-bold",children:"Physiology (P)"})," is monitored for safety but excluded from outcome learning to prevent reverse causation. All learned effects operate within the ",e.jsx("strong",{className:"text-pink-600 font-bold",children:"Safeguards (S)"})," boundary."]})})]})}),e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"mt-8",children:e.jsxs(M,{padding:"none",className:"overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-violet-600 text-white border-b-2 border-black",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20",children:e.jsx(et,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-black uppercase tracking-tight",children:"Engagement & UX Telemetry"}),e.jsx("p",{className:"text-sm text-violet-200",children:"Real-time user engagement metrics and pipeline health"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx(fd,{})})]})})]})}const I={title:"Sleep Duration → Recovery Score",theta:"7.2 hours",beta:"+18%",certainty:87,personalData:89},Be=[{label:"Outcomes",count:12,color:"#10B981"},{label:"Loads",count:8,color:"#F59E0B"},{label:"Markers",count:5,color:"#8B5CF6"}];function yd(){return e.jsxs("div",{className:"p-8 bg-white rounded-2xl",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-emerald-600 uppercase tracking-wider mb-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full"}),"Sleep Insight"]}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:I.title})]}),e.jsx("div",{className:"grid grid-cols-3 gap-px bg-gray-200 rounded-lg overflow-hidden mb-6",children:Be.map(t=>e.jsxs("div",{className:"bg-white p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t.count}),e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide mt-1",children:t.label})]},t.label))}),e.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:[e.jsx("div",{className:"h-1 bg-emerald-500"}),e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-baseline justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Your threshold"}),e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:I.theta})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Effect above"}),e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:I.beta})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsx("span",{children:"Certainty"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[I.certainty,"%"]})]}),e.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full",style:{width:`${I.certainty}%`}})})]}),e.jsx("div",{className:"h-px bg-gray-100 my-4"}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Evidence mix"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"w-24 h-1.5 bg-gray-100 rounded-full overflow-hidden flex",children:[e.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${I.personalData}%`}}),e.jsx("div",{className:"h-full bg-emerald-200",style:{width:`${100-I.personalData}%`}})]}),e.jsxs("span",{className:"text-gray-900 font-medium",children:[I.personalData,"% yours"]})]})]})]})]}),e.jsxs("button",{className:"w-full mt-4 py-3 text-sm font-medium text-emerald-600 border border-emerald-200 rounded-lg hover:bg-emerald-50 transition-colors flex items-center justify-center gap-2",children:["View Full Analysis",e.jsx(ve,{className:"w-4 h-4"})]})]})}function vd(){return e.jsxs("div",{className:"p-8 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-2xl text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-emerald-400 text-xs font-bold uppercase tracking-widest mb-1",children:"Sleep Insight"}),e.jsx("h3",{className:"text-xl font-bold",children:I.title})]}),e.jsxs("div",{className:"px-3 py-1 bg-emerald-500/20 border border-emerald-500/30 rounded-full text-emerald-400 text-xs font-bold",children:[I.certainty,"% CERTAIN"]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3 mb-6",children:Be.map(t=>e.jsxs("div",{className:"relative p-4 rounded-xl overflow-hidden",style:{backgroundColor:`${t.color}15`},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"text-3xl font-black",style:{color:t.color},children:t.count}),e.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider mt-1",children:t.label})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1",style:{backgroundColor:t.color}})]},t.label))}),e.jsxs("div",{className:"bg-white/5 backdrop-blur border border-white/10 rounded-xl p-5",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-5",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-400 text-xs uppercase tracking-wider mb-1",children:"Threshold θ"}),e.jsx("div",{className:"text-4xl font-black bg-gradient-to-r from-emerald-400 to-cyan-400 bg-clip-text text-transparent",children:I.theta})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-400 text-xs uppercase tracking-wider mb-1",children:"Effect β"}),e.jsx("div",{className:"text-4xl font-black text-emerald-400",children:I.beta})]})]}),e.jsx("div",{className:"h-2 bg-slate-700 rounded-full overflow-hidden mb-2",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-cyan-400 rounded-full",style:{width:`${I.certainty}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[e.jsx("span",{children:"0%"}),e.jsxs("span",{className:"text-emerald-400 font-bold",children:[I.certainty,"% Certainty"]}),e.jsx("span",{children:"100%"})]}),e.jsx("div",{className:"mt-5 pt-5 border-t border-white/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1 h-3 rounded-full overflow-hidden flex",children:[e.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-emerald-400",style:{width:`${I.personalData}%`}}),e.jsx("div",{className:"h-full bg-slate-600",style:{width:`${100-I.personalData}%`}})]}),e.jsxs("span",{className:"text-xs text-slate-400",children:[e.jsxs("span",{className:"text-emerald-400 font-bold",children:[I.personalData,"%"]})," Personal"]})]})})]}),e.jsxs("button",{className:"w-full mt-4 py-3 bg-gradient-to-r from-emerald-500 to-cyan-500 text-white font-bold rounded-xl hover:from-emerald-400 hover:to-cyan-400 transition-all flex items-center justify-center gap-2",children:[e.jsx(ee,{className:"w-4 h-4"}),"Explore Insight"]})]})}function jd(){return e.jsxs("div",{className:"p-8 bg-gradient-to-br from-stone-50 to-amber-50/30 rounded-3xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-100 to-teal-100 rounded-2xl flex items-center justify-center",children:e.jsx(J,{className:"w-6 h-6 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-emerald-600 uppercase tracking-wide",children:"Sleep Pattern"}),e.jsx("h3",{className:"text-lg font-semibold text-stone-800",children:I.title})]})]}),e.jsx("div",{className:"flex gap-2 mb-6",children:Be.map(t=>e.jsxs("div",{className:"flex-1 py-3 px-4 rounded-2xl text-center",style:{backgroundColor:`${t.color}12`},children:[e.jsx("div",{className:"text-xl font-bold",style:{color:t.color},children:t.count}),e.jsx("div",{className:"text-xs text-stone-500 mt-0.5",children:t.label})]},t.label))}),e.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-sm shadow-stone-200/50 border border-stone-100",children:[e.jsxs("div",{className:"flex gap-1 mb-4",children:[e.jsx("div",{className:"h-1 flex-1 bg-emerald-400 rounded-full"}),e.jsx("div",{className:"h-1 w-8 bg-emerald-200 rounded-full"}),e.jsx("div",{className:"h-1 w-4 bg-emerald-100 rounded-full"})]}),e.jsxs("div",{className:"flex items-end justify-between mb-5",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-stone-400 mb-1",children:"Your optimal threshold"}),e.jsx("div",{className:"text-3xl font-bold text-stone-800",children:I.theta})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-emerald-50 rounded-full",children:[e.jsx(G,{className:"w-3.5 h-3.5 text-emerald-600"}),e.jsx("span",{className:"text-sm font-semibold text-emerald-700",children:I.beta})]})})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-stone-400",children:"Certainty level"}),e.jsxs("span",{className:"font-semibold text-stone-600",children:[I.certainty,"%"]})]}),e.jsx("div",{className:"h-2.5 bg-stone-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-400 to-teal-400 rounded-full transition-all",style:{width:`${I.certainty}%`}})})]}),e.jsxs("div",{className:"relative my-5",children:[e.jsx("div",{className:"h-px bg-stone-100"}),e.jsx("div",{className:"absolute left-0 top-0 w-12 h-px bg-emerald-300"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"h-2 rounded-full overflow-hidden flex bg-stone-100",children:e.jsx("div",{className:"h-full bg-emerald-400 rounded-l-full",style:{width:`${I.personalData}%`}})})}),e.jsxs("div",{className:"text-xs text-stone-500",children:[e.jsxs("span",{className:"font-semibold text-emerald-600",children:[I.personalData,"%"]})," your data"]})]})]}),e.jsxs("button",{className:"w-full mt-4 py-3 text-sm font-semibold text-emerald-700 bg-emerald-50 hover:bg-emerald-100 rounded-2xl transition-colors flex items-center justify-center gap-2",children:["See Full Pattern",e.jsx(ve,{className:"w-4 h-4"})]})]})}function wd(){return e.jsxs("div",{className:"p-8 bg-white rounded-lg border-2 border-black",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"inline-block px-2 py-1 bg-emerald-500 text-white text-xs font-black uppercase tracking-wider mb-2",children:"Sleep"}),e.jsx("h3",{className:"text-xl font-black text-black uppercase tracking-tight",children:I.title})]}),e.jsxs("div",{className:"text-4xl font-black text-emerald-500",children:[I.certainty,"%"]})]}),e.jsx("div",{className:"flex border-2 border-black divide-x-2 divide-black mb-6",children:Be.map(t=>e.jsxs("div",{className:"flex-1 p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-black",style:{color:t.color},children:t.count}),e.jsx("div",{className:"text-xs font-bold text-black uppercase tracking-widest mt-1",children:t.label})]},t.label))}),e.jsxs("div",{className:"border-2 border-black",children:[e.jsx("div",{className:"bg-emerald-500 px-5 py-3 border-b-2 border-black",children:e.jsx("span",{className:"text-white font-black uppercase tracking-wider text-sm",children:"Your Numbers"})}),e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-5",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Threshold θ"}),e.jsx("div",{className:"text-4xl font-black text-black mt-1",children:I.theta})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Effect β"}),e.jsx("div",{className:"text-4xl font-black text-emerald-500 mt-1",children:I.beta})]})]}),e.jsx("div",{className:"h-4 bg-gray-200 mb-2",children:e.jsx("div",{className:"h-full bg-black",style:{width:`${I.certainty}%`}})}),e.jsxs("div",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:["Certainty: ",I.certainty,"%"]}),e.jsx("div",{className:"h-0.5 bg-black my-5"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1 h-3 bg-gray-200 flex",children:e.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${I.personalData}%`}})}),e.jsxs("span",{className:"text-xs font-black text-black uppercase",children:[I.personalData,"% Personal"]})]})]})]}),e.jsxs("button",{className:"w-full mt-4 py-4 bg-black text-white font-black uppercase tracking-wider hover:bg-emerald-500 transition-colors flex items-center justify-center gap-2",children:["Analyze",e.jsx(ve,{className:"w-5 h-5"})]})]})}function Nd(){return e.jsxs("div",{className:"p-8 bg-gradient-to-br from-slate-900 via-violet-950 to-slate-900 rounded-3xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-emerald-500/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-violet-500/20 rounded-full blur-3xl"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-white/10 backdrop-blur-xl rounded-xl border border-white/20 flex items-center justify-center",children:e.jsx(J,{className:"w-5 h-5 text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-emerald-400 text-xs font-medium tracking-wider uppercase",children:"Sleep Insight"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:I.title})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2 mb-6",children:Be.map(t=>e.jsxs("div",{className:"p-4 rounded-2xl bg-white/5 backdrop-blur-xl border border-white/10 text-center relative overflow-hidden group hover:bg-white/10 transition-all",children:[e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity",style:{boxShadow:`inset 0 0 30px ${t.color}20`}}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:t.count}),e.jsx("div",{className:"text-xs text-white/50 mt-1",children:t.label})]}),e.jsx("div",{className:"absolute bottom-0 left-1/4 right-1/4 h-px opacity-60",style:{background:`linear-gradient(90deg, transparent, ${t.color}, transparent)`}})]},t.label))}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-xl rounded-2xl border border-white/10 p-5 relative",children:[e.jsx("div",{className:"absolute top-0 left-8 right-8 h-px bg-gradient-to-r from-transparent via-emerald-400/50 to-transparent"}),e.jsxs("div",{className:"flex items-end justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-white/40 text-xs uppercase tracking-wider mb-1",children:"Threshold θ"}),e.jsx("div",{className:"text-4xl font-bold text-white",children:I.theta})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-white/40 text-xs uppercase tracking-wider mb-1",children:"Effect β"}),e.jsx("div",{className:"text-3xl font-bold text-emerald-400",children:I.beta})]})]}),e.jsxs("div",{className:"relative mb-2",children:[e.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-emerald-400 rounded-full relative",style:{width:`${I.certainty}%`},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent to-white/30"})})}),e.jsx("div",{className:"absolute -bottom-2 left-0 h-4 bg-emerald-500/30 blur-md rounded-full",style:{width:`${I.certainty}%`}})]}),e.jsxs("div",{className:"text-xs text-white/40",children:[e.jsxs("span",{className:"text-emerald-400 font-medium",children:[I.certainty,"%"]})," certainty"]}),e.jsxs("div",{className:"relative my-5",children:[e.jsx("div",{className:"h-px bg-white/10"}),e.jsx("div",{className:"absolute left-0 top-0 w-1/3 h-px bg-gradient-to-r from-emerald-400/50 to-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1 h-1.5 bg-white/10 rounded-full overflow-hidden flex",children:e.jsx("div",{className:"h-full bg-emerald-400/80 rounded-l-full",style:{width:`${I.personalData}%`}})}),e.jsxs("span",{className:"text-xs text-white/50",children:[e.jsxs("span",{className:"text-emerald-400",children:[I.personalData,"%"]})," personal"]})]})]}),e.jsxs("button",{className:"w-full mt-4 py-3.5 bg-gradient-to-r from-emerald-500/80 to-emerald-600/80 backdrop-blur text-white font-medium rounded-xl border border-emerald-400/30 hover:from-emerald-500 hover:to-emerald-600 transition-all flex items-center justify-center gap-2 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),e.jsx("span",{className:"relative",children:"Explore Insight"}),e.jsx(we,{className:"w-4 h-4 relative"})]})]})]})}function kd(){const[t,a]=x.useState(null),s=[{id:1,name:"Precision",subtitle:"Neo-Medical",description:"Clean, clinical, generous whitespace. Thin borders and single accent colors per section. Inspired by premium medical devices.",component:yd},{id:2,name:"Signal",subtitle:"Data-Forward",description:"Bold gradients, dark backgrounds, chart-like feel. High contrast with prominent metrics. Inspired by financial terminals.",component:vd},{id:3,name:"Meridian",subtitle:"Soft Science",description:"Organic curves, warm pastels, thin accent lines. Scientific but approachable. Inspired by wellness apps.",component:jd},{id:4,name:"Contrast",subtitle:"Brutalist Modern",description:"Hard edges, bold borders, high contrast blocks. Magazine-like typography. Striking and memorable.",component:wd},{id:5,name:"Aurora",subtitle:"Luminous Glass",description:"Glassmorphism with glows, layered depth, ethereal feel. Premium and futuristic. Inspired by luxury interfaces.",component:Nd}];return e.jsx("div",{className:"min-h-screen bg-gray-100 py-12 px-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"Choose Your Signature Style"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Select the aesthetic direction that best represents the Serif platform. Each style uses your color scheme with different approaches to color blocking, typography, and visual hierarchy."})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-8 mb-12",children:s.map(r=>{const i=r.component,n=t===r.id;return e.jsxs(P.div,{whileHover:{y:-4},className:`relative ${n?"ring-4 ring-primary-500 ring-offset-4 rounded-3xl":""}`,children:[n&&e.jsx("div",{className:"absolute -top-3 -right-3 w-8 h-8 bg-primary-500 rounded-full flex items-center justify-center z-10 shadow-lg",children:e.jsx(K,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("span",{className:"text-sm font-bold text-primary-600",children:["Style ",r.id]}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:r.name}),e.jsxs("span",{className:"text-sm text-gray-500",children:["/ ",r.subtitle]})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r.description})]}),e.jsx("div",{className:"cursor-pointer transition-transform",onClick:()=>a(r.id),children:e.jsx(i,{})}),e.jsx("button",{onClick:()=>a(r.id),className:`w-full mt-4 py-3 rounded-xl font-semibold transition-all ${n?"bg-primary-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:n?"Selected":"Select This Style"})]},r.id)})}),t&&e.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-200 text-center",children:[e.jsx("div",{className:"text-sm font-medium text-primary-600 mb-2",children:"You've selected"}),e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:[s.find(r=>r.id===t)?.name," / ",s.find(r=>r.id===t)?.subtitle]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Tell me to apply this style and I'll update the entire platform with this aesthetic direction."}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:()=>a(null),className:"px-6 py-3 border border-gray-300 rounded-xl font-medium text-gray-700 hover:bg-gray-50",children:"Compare Again"}),e.jsx("button",{className:"px-6 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700",children:"Apply This Style"})]})]})]})})}const Ie={source:"bedtime_hour",target:"sleep_efficiency",theta:{value:22.25,unit:"hour",low:21.75,high:22.75,displayValue:"10:15 PM"},betaBelow:{value:.02,unit:"%",description:"+2% per hour earlier"},betaAbove:{value:-.023,unit:"%",description:"-2.3% per hour later"},curveType:"plateau_down",observations:142,completePct:94.5,changepointProb:.92,sizeCategory:"medium",currentValue:23.5,currentStatus:"above_optimal"},V={curve:"#10B981",threshold:"#10B981",current:"#F59E0B",fill:"rgba(16, 185, 129, 0.15)"};function Sd({params:t}){const r={top:30,right:50,bottom:50,left:60},i=400-r.left-r.right,n=180-r.top-r.bottom;return e.jsx("div",{className:"bg-white border-2 border-black p-4",children:e.jsxs("svg",{width:400,height:180,children:[e.jsx("rect",{x:r.left,y:r.top,width:i,height:n,fill:"#FAFAFA",stroke:"#E5E7EB",strokeWidth:"1"}),[.25,.5,.75].map(o=>e.jsx("line",{x1:r.left,y1:r.top+n*o,x2:r.left+i,y2:r.top+n*o,stroke:"#E5E7EB",strokeDasharray:"2 4"},o)),e.jsx("path",{d:`M ${r.left} ${r.top+n*.15}
              L ${r.left+i*.5} ${r.top+n*.15}
              Q ${r.left+i*.65} ${r.top+n*.3}
              ${r.left+i} ${r.top+n*.85}`,fill:"none",stroke:V.curve,strokeWidth:"3",strokeLinecap:"round"}),e.jsx("path",{d:`M ${r.left} ${r.top+n*.15}
              L ${r.left+i*.5} ${r.top+n*.15}
              Q ${r.left+i*.65} ${r.top+n*.3}
              ${r.left+i} ${r.top+n*.85}
              L ${r.left+i} ${r.top+n}
              L ${r.left} ${r.top+n}
              Z`,fill:V.fill}),e.jsx("line",{x1:r.left+i*.5,y1:r.top,x2:r.left+i*.5,y2:r.top+n,stroke:V.threshold,strokeWidth:"2",strokeDasharray:"6 4"}),e.jsx("circle",{cx:r.left+i*.5,cy:r.top+n*.15,r:"8",fill:V.threshold}),e.jsx("circle",{cx:r.left+i*.5,cy:r.top+n*.15,r:"4",fill:"white"}),e.jsx("circle",{cx:r.left+i*.75,cy:r.top+n*.55,r:"7",fill:V.current}),e.jsx("circle",{cx:r.left+i*.75,cy:r.top+n*.55,r:"3",fill:"white"}),e.jsx("text",{x:15,y:r.top+n/2,textAnchor:"middle",className:"text-xs font-bold fill-gray-600 uppercase",transform:`rotate(-90, 15, ${r.top+n/2})`,children:"Sleep Efficiency"}),e.jsx("text",{x:r.left+i/2,y:172,textAnchor:"middle",className:"text-xs font-bold fill-gray-600 uppercase",children:"Bedtime Hour"}),e.jsx("text",{x:r.left+i*.5,y:r.top-10,textAnchor:"middle",className:"text-sm font-black fill-emerald-600",children:"θ = 10:15 PM"}),e.jsx("text",{x:r.left+i*.75,y:r.top-10,textAnchor:"middle",className:"text-sm font-bold fill-amber-600",children:"YOU: 11:30 PM"})]})})}function Cd({params:t}){return e.jsxs("div",{className:"flex border-2 border-black",children:[e.jsx("div",{className:"p-4 border-r-2 border-black bg-gray-50",children:e.jsxs("svg",{width:160,height:160,children:[e.jsx("rect",{x:"0",y:"0",width:160,height:160,fill:"#FAFAFA"}),e.jsx("line",{x1:"0",y1:160,x2:160,y2:160,stroke:"#000",strokeWidth:"2"}),e.jsx("line",{x1:"0",y1:"0",x2:"0",y2:160,stroke:"#000",strokeWidth:"2"}),e.jsx("path",{d:`M 0 ${160*.2}
                L ${160*.5} ${160*.2}
                Q ${160*.7} ${160*.35}
                160 ${160*.85}`,fill:V.fill,stroke:V.curve,strokeWidth:"3"}),e.jsx("line",{x1:160*.5,y1:"0",x2:160*.5,y2:160,stroke:V.threshold,strokeWidth:"2",strokeDasharray:"4 4"}),e.jsx("circle",{cx:160*.5,cy:160*.2,r:"8",fill:V.threshold}),e.jsx("circle",{cx:160*.5,cy:160*.2,r:"4",fill:"white"}),e.jsx("circle",{cx:160*.75,cy:160*.55,r:"6",fill:V.current})]})}),e.jsx("div",{className:"flex-1 p-4 bg-white",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Threshold (θ)"}),e.jsx("div",{className:"text-2xl font-black text-black",children:"10:15 PM"})]}),e.jsx("div",{className:"h-0.5 bg-black"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase",children:"Before θ"}),e.jsx("div",{className:"text-lg font-bold text-emerald-600",children:"+2%/hr"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase",children:"After θ"}),e.jsx("div",{className:"text-lg font-bold text-rose-600",children:"-2.3%/hr"})]})]}),e.jsx("div",{className:"h-0.5 bg-gray-200"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase",children:"Your Current"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg font-black text-amber-600",children:"11:30 PM"}),e.jsx("span",{className:"px-2 py-0.5 bg-amber-500 text-white text-xs font-bold uppercase",children:"Above θ"})]})]})]})})]})}function Md({params:t}){return e.jsxs("div",{className:"border-2 border-black",children:[e.jsx("div",{className:"px-4 py-2 bg-black text-white",children:e.jsx("div",{className:"text-xs font-bold uppercase tracking-wider",children:"Dose-Response: Bedtime → Sleep"})}),e.jsx("div",{className:"p-4 bg-gray-50 border-b-2 border-black",children:e.jsxs("svg",{width:340,height:140,children:[e.jsx("rect",{x:"40",y:"10",width:280,height:110,fill:"white",stroke:"#E5E7EB"}),e.jsx("path",{d:`M 40 ${140*.2}
                L ${340*.45} ${140*.2}
                Q ${340*.6} ${140*.35}
                320 ${140*.75}`,fill:V.fill,stroke:V.curve,strokeWidth:"3",strokeLinecap:"round"}),e.jsx("line",{x1:340*.45,y1:"10",x2:340*.45,y2:120,stroke:V.threshold,strokeWidth:"2",strokeDasharray:"6 3"}),e.jsx("circle",{cx:340*.45,cy:140*.2,r:"10",fill:V.threshold}),e.jsx("text",{x:340*.45,y:140*.2+4,textAnchor:"middle",className:"text-xs font-black fill-white",children:"θ"}),e.jsx("circle",{cx:340*.7,cy:140*.5,r:"8",fill:V.current,stroke:"white",strokeWidth:"2"}),e.jsx("text",{x:"40",y:135,className:"text-xs fill-gray-500",children:"Early"}),e.jsx("text",{x:320,y:135,textAnchor:"end",className:"text-xs fill-gray-500",children:"Late"})]})}),e.jsxs("div",{className:"grid grid-cols-3",children:[e.jsxs("div",{className:"p-3 border-r-2 border-black text-center",children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase",children:"Threshold"}),e.jsx("div",{className:"text-xl font-black text-emerald-600",children:"10:15 PM"})]}),e.jsxs("div",{className:"p-3 border-r-2 border-black text-center",children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase",children:"Effect (β)"}),e.jsx("div",{className:"text-xl font-black text-rose-600",children:"-2.3%/hr"})]}),e.jsxs("div",{className:"p-3 text-center bg-amber-50",children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase",children:"You Now"}),e.jsx("div",{className:"text-xl font-black text-amber-600",children:"11:30 PM"})]})]})]})}function Td({params:t}){return e.jsxs("div",{className:"relative border-2 border-black bg-white p-4",children:[e.jsxs("svg",{width:360,height:200,children:[e.jsx("defs",{children:e.jsx("pattern",{id:"minGrid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"#F3F4F6",strokeWidth:"1"})})}),e.jsx("rect",{width:360,height:200,fill:"url(#minGrid)"}),e.jsx("path",{d:`M 20 ${200*.25}
              L ${360*.45} ${200*.25}
              Q ${360*.6} ${200*.4}
              340 ${200*.8}`,fill:"none",stroke:V.curve,strokeWidth:"4",strokeLinecap:"round"}),e.jsx("path",{d:`M 20 ${200*.25}
              L ${360*.45} ${200*.25}
              Q ${360*.6} ${200*.4}
              340 ${200*.8}
              L 340 200
              L 20 200
              Z`,fill:V.fill}),e.jsx("rect",{x:360*.45-3,y:"0",width:"6",height:200,fill:V.threshold,opacity:"0.2"}),e.jsx("circle",{cx:360*.45,cy:200*.25,r:"12",fill:V.threshold}),e.jsx("circle",{cx:360*.45,cy:200*.25,r:"6",fill:"white"}),e.jsx("circle",{cx:360*.72,cy:200*.55,r:"10",fill:V.current}),e.jsx("circle",{cx:360*.72,cy:200*.55,r:"5",fill:"white"}),e.jsx("line",{x1:360*.45,y1:200*.25,x2:360*.72,y2:200*.55,stroke:"#CBD5E1",strokeWidth:"1",strokeDasharray:"4 4"})]}),e.jsx("div",{className:"absolute px-3 py-1.5 bg-emerald-500 text-white font-black text-sm uppercase",style:{top:"10px",left:"calc(45% - 40px)"},children:"θ = 10:15 PM"}),e.jsx("div",{className:"absolute px-3 py-1.5 bg-amber-500 text-white font-black text-sm uppercase",style:{top:"45%",right:"20px"},children:"YOU: 11:30 PM"}),e.jsx("div",{className:"absolute px-2 py-1 bg-rose-500 text-white font-bold text-xs uppercase",style:{bottom:"20px",right:"60px"},children:"-2.3%/hr after θ"})]})}function Pd({params:t}){return e.jsxs("div",{className:"border-2 border-black",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 border-b-2 border-black",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-black text-black uppercase",children:"Bedtime → Sleep Efficiency"}),e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Plateau-Down Curve • n=142"})]}),e.jsxs("svg",{width:120,height:80,className:"border border-gray-200",children:[e.jsx("path",{d:`M 5 ${80*.25}
                L ${120*.45} ${80*.25}
                Q ${120*.6} ${80*.4}
                115 ${80*.8}`,fill:V.fill,stroke:V.curve,strokeWidth:"2"}),e.jsx("circle",{cx:120*.45,cy:80*.25,r:"4",fill:V.threshold}),e.jsx("circle",{cx:120*.72,cy:80*.55,r:"4",fill:V.current})]})]}),e.jsx("table",{className:"w-full",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"px-4 py-3 bg-emerald-50 font-bold text-xs uppercase text-gray-600 w-1/3",children:"Threshold (θ)"}),e.jsx("td",{className:"px-4 py-3 font-black text-xl text-emerald-600",children:"10:15 PM"})]}),e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"px-4 py-3 bg-gray-50 font-bold text-xs uppercase text-gray-600",children:"Effect Before θ"}),e.jsx("td",{className:"px-4 py-3 font-bold text-lg text-emerald-600",children:"+2% per hour earlier"})]}),e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"px-4 py-3 bg-gray-50 font-bold text-xs uppercase text-gray-600",children:"Effect After θ"}),e.jsx("td",{className:"px-4 py-3 font-bold text-lg text-rose-600",children:"-2.3% per hour later"})]}),e.jsxs("tr",{className:"bg-amber-50",children:[e.jsx("td",{className:"px-4 py-3 font-bold text-xs uppercase text-gray-600",children:"Your Current"}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-black text-xl text-amber-600",children:"11:30 PM"}),e.jsx("span",{className:"px-2 py-1 bg-amber-500 text-white text-xs font-bold uppercase",children:"1h 15m after optimal"})]})})]})]})})]})}function Dd(){const[t,a]=x.useState(null),s=[{id:1,name:"Expanded Horizontal",description:"Wide format with generous spacing. Labels outside chart area for maximum clarity.",pros:["Clear axis labels","No overlapping elements","Room for annotations"],cons:["Takes more horizontal space","May not fit in 2-column grid well"]},{id:2,name:"Split Panel",description:"Chart and parameters in separate panels. Clean separation of visual and numeric data.",pros:["Clear parameter display","Chart stays simple","Brutalist blocks aesthetic"],cons:["More complex layout","Duplicates some information"]},{id:3,name:"Stacked Vertical",description:"Large chart on top, parameter blocks below. Vertical flow is easy to scan.",pros:["Natural top-to-bottom flow","Parameters as color blocks","Works well in cards"],cons:["Taller component","Chart width limited"]},{id:4,name:"Minimal Annotation",description:"Large clean curve with floating badges. Emphasizes the visual relationship.",pros:["Dramatic visual impact","Clear markers","Modern feel"],cons:["Annotations could overlap","Less precise than numbers"]},{id:5,name:"Data Table Focus",description:"Mini chart as icon, emphasis on tabular parameter display. Best for data accuracy.",pros:["Precise numbers","Easy to scan","Most space-efficient"],cons:["Chart is decorative only","Less visual impact"]}];return e.jsx(Q,{title:"Curve Visualization Styles",subtitle:"Select the best format for dose-response curves",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs(M,{padding:"none",className:"overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-gray-100 border-b-2 border-black flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-black uppercase",children:["Style 1: ",s[0].name]}),e.jsx("p",{className:"text-sm text-gray-600",children:s[0].description})]}),e.jsx(L,{variant:t===1?"success":"outline",size:"sm",onClick:()=>a(1),leftIcon:t===1?e.jsx(K,{className:"w-4 h-4"}):void 0,children:t===1?"Selected":"Select"})]}),e.jsx("div",{className:"p-6 bg-white",children:e.jsx(Sd,{params:Ie})}),e.jsxs("div",{className:"p-4 bg-gray-50 border-t-2 border-black flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Pros:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s[0].pros.map(r=>e.jsx(_,{variant:"success",size:"sm",children:r},r))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Cons:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s[0].cons.map(r=>e.jsx(_,{variant:"warning",size:"sm",children:r},r))})]})]})]}),e.jsxs(M,{padding:"none",className:"overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-gray-100 border-b-2 border-black flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-black uppercase",children:["Style 2: ",s[1].name]}),e.jsx("p",{className:"text-sm text-gray-600",children:s[1].description})]}),e.jsx(L,{variant:t===2?"success":"outline",size:"sm",onClick:()=>a(2),leftIcon:t===2?e.jsx(K,{className:"w-4 h-4"}):void 0,children:t===2?"Selected":"Select"})]}),e.jsx("div",{className:"p-6 bg-white",children:e.jsx(Cd,{params:Ie})}),e.jsxs("div",{className:"p-4 bg-gray-50 border-t-2 border-black flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Pros:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s[1].pros.map(r=>e.jsx(_,{variant:"success",size:"sm",children:r},r))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Cons:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s[1].cons.map(r=>e.jsx(_,{variant:"warning",size:"sm",children:r},r))})]})]})]}),e.jsxs(M,{padding:"none",className:"overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-gray-100 border-b-2 border-black flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-black uppercase",children:["Style 3: ",s[2].name]}),e.jsx("p",{className:"text-sm text-gray-600",children:s[2].description})]}),e.jsx(L,{variant:t===3?"success":"outline",size:"sm",onClick:()=>a(3),leftIcon:t===3?e.jsx(K,{className:"w-4 h-4"}):void 0,children:t===3?"Selected":"Select"})]}),e.jsx("div",{className:"p-6 bg-white",children:e.jsx(Md,{params:Ie})}),e.jsxs("div",{className:"p-4 bg-gray-50 border-t-2 border-black flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Pros:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s[2].pros.map(r=>e.jsx(_,{variant:"success",size:"sm",children:r},r))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Cons:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s[2].cons.map(r=>e.jsx(_,{variant:"warning",size:"sm",children:r},r))})]})]})]}),e.jsxs(M,{padding:"none",className:"overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-gray-100 border-b-2 border-black flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-black uppercase",children:["Style 4: ",s[3].name]}),e.jsx("p",{className:"text-sm text-gray-600",children:s[3].description})]}),e.jsx(L,{variant:t===4?"success":"outline",size:"sm",onClick:()=>a(4),leftIcon:t===4?e.jsx(K,{className:"w-4 h-4"}):void 0,children:t===4?"Selected":"Select"})]}),e.jsx("div",{className:"p-6 bg-white",children:e.jsx(Td,{params:Ie})}),e.jsxs("div",{className:"p-4 bg-gray-50 border-t-2 border-black flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Pros:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s[3].pros.map(r=>e.jsx(_,{variant:"success",size:"sm",children:r},r))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Cons:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s[3].cons.map(r=>e.jsx(_,{variant:"warning",size:"sm",children:r},r))})]})]})]}),e.jsxs(M,{padding:"none",className:"overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-gray-100 border-b-2 border-black flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-black uppercase",children:["Style 5: ",s[4].name]}),e.jsx("p",{className:"text-sm text-gray-600",children:s[4].description})]}),e.jsx(L,{variant:t===5?"success":"outline",size:"sm",onClick:()=>a(5),leftIcon:t===5?e.jsx(K,{className:"w-4 h-4"}):void 0,children:t===5?"Selected":"Select"})]}),e.jsx("div",{className:"p-6 bg-white",children:e.jsx(Pd,{params:Ie})}),e.jsxs("div",{className:"p-4 bg-gray-50 border-t-2 border-black flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Pros:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s[4].pros.map(r=>e.jsx(_,{variant:"success",size:"sm",children:r},r))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Cons:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s[4].cons.map(r=>e.jsx(_,{variant:"warning",size:"sm",children:r},r))})]})]})]}),t&&e.jsx("div",{className:"p-4 bg-emerald-50 border-2 border-emerald-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-bold text-emerald-700 uppercase",children:"Selected:"}),e.jsxs("span",{className:"ml-2 text-lg font-black text-emerald-900",children:["Style ",t,": ",s[t-1].name]})]}),e.jsx(L,{variant:"primary",size:"sm",children:"Apply to Insights"})]})})]})})}function _d(){return e.jsx(tr,{basename:"/serif-demo",children:e.jsx(ar,{children:e.jsxs(X,{element:e.jsx(Ms,{}),children:[e.jsx(X,{path:"/",element:e.jsx(Tn,{})}),e.jsx(X,{path:"/clients",element:e.jsx(Fc,{})}),e.jsx(X,{path:"/clients/:clientId/users/:userId",element:e.jsx(cd,{})}),e.jsx(X,{path:"/data",element:e.jsx(bd,{})}),e.jsx(X,{path:"/integration",element:e.jsx(_n,{})}),e.jsx(X,{path:"/insights",element:e.jsx(Cl,{})}),e.jsx(X,{path:"/protocols",element:e.jsx(Xl,{})}),e.jsx(X,{path:"/coach",element:e.jsx(sc,{})}),e.jsx(X,{path:"/api",element:e.jsx(rc,{})}),e.jsx(X,{path:"/admin",element:e.jsx(ic,{})}),e.jsx(X,{path:"/style-demo",element:e.jsx(kd,{})}),e.jsx(X,{path:"/curve-demo",element:e.jsx(Dd,{})})]})})})}Or.createRoot(document.getElementById("root")).render(e.jsx(x.StrictMode,{children:e.jsx(_d,{})}));
